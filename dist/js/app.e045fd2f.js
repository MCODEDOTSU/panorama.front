(function(t){function e(e){for(var n,i,s=e[0],c=e[1],l=e[2],d=0,p=[];d<s.length;d++)i=s[d],r[i]&&p.push(r[i][0]),r[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(p.length)p.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,s=1;s<a.length;s++){var c=a[s];0!==r[c]&&(n=!1)}n&&(o.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},r={app:0},o=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},"16b7":function(t,e,a){"use strict";var n=a("5d15"),r=a.n(n);r.a},"2c98":function(t,e,a){"use strict";var n=a("b2b8"),r=a.n(n);r.a},3564:function(t,e,a){"use strict";var n=a("e94c"),r=a.n(n);r.a},"570f":function(t,e,a){},"5c0b":function(t,e,a){"use strict";var n=a("5e27"),r=a.n(n);r.a},"5d15":function(t,e,a){},"5e27":function(t,e,a){},9683:function(t,e,a){},a3fd:function(t,e,a){"use strict";var n=a("d033"),r=a.n(n);r.a},b2b8:function(t,e,a){},cd49:function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("097d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},o=[],i=(a("5c0b"),a("2877")),s={},c=Object(i["a"])(s,r,o,!1,null,null,null);c.options.__file="App.vue";var l=c.exports,u=a("8c4f"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("notifications"),a("div",{staticClass:"main"},[a("a",{staticClass:"logo",attrs:{href:"/",title:"Панорама"}}),a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Email"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Пароль"},domProps:{value:t.user.password},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.login(e):null},input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),a("button",{staticClass:"btn btn-lg btn-primary btn-block",on:{click:t.login}},[t._v("Войти")])])])],1)},p=[],m=a("d4ec"),y=a("bee2"),g=a("99de"),f=a("7e84"),v=a("262e"),h=a("9ab4"),b=a("60a3"),_=a("4bb5"),C=a("bc3a"),S=a.n(C),k="https://city-panorama.ru/api/",w="https://city-panorama.ru/",O=function(t){S.a.defaults.headers.common["Authorization"]=t.token},j=function(t){var e=JSON.parse(t).user.token;e&&(S.a.defaults.headers.common["Authorization"]=e)},x=function(){function t(){Object(m["a"])(this,t)}return Object(y["a"])(t,null,[{key:"notify",value:function(){n["default"].prototype.$notify({classes:"vue-notification-error",title:"Ошибка",text:"При выполнении запроса произошла ошибка"})}},{key:"notifyWithCustomMessage",value:function(t){n["default"].prototype.$notify({classes:"vue-notification-error",title:"Ошибка",text:t})}}]),t}(),E=x,M=function(t){function e(){var t;return Object(m["a"])(this,e),t=Object(g["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.user={email:"",password:""},t}return Object(v["a"])(e,t),Object(y["a"])(e,[{key:"login",value:function(){var t=this;S.a.post("".concat(k,"login"),this.user).then(function(e){t.userState.token="Bearer "+e.data.access_token,t.userState.role=e.data.role,O(t.userState),t.getUser()}).catch(function(e){401===e.response.status?E.notifyWithCustomMessage("Аутентификация не удалась: неверное имя пользователя или пароль"):E.notifyWithCustomMessage(e.data.message),t.user.password=""})}}]),e}(b["e"]);h["a"]([Object(b["d"])()],M.prototype,"user",void 0),h["a"]([Object(_["b"])("user")],M.prototype,"userState",void 0),h["a"]([_["a"]],M.prototype,"getUser",void 0),M=h["a"]([Object(b["a"])({})],M);var R=M,I=R,L=Object(i["a"])(I,d,p,!1,null,null,null);L.options.__file="Home.vue";var $=L.exports,P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("notifications"),a("div",{staticClass:"main"},[a("a",{staticClass:"logo",attrs:{href:"/",title:"Панорама"}}),a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Email"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Пароль"},domProps:{value:t.user.password},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.login(e):null},input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),a("button",{staticClass:"btn btn-lg btn-primary btn-block",on:{click:t.login}},[t._v("Войти")])])])],1)},G=[],T=function(t){function e(){var t;return Object(m["a"])(this,e),t=Object(g["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.user={email:"",password:""},t}return Object(v["a"])(e,t),Object(y["a"])(e,[{key:"login",value:function(){var t=this;S.a.post("".concat(k,"login"),this.user).then(function(e){t.userState.token="Bearer "+e.data.access_token,t.userState.role=e.data.role,O(t.userState),t.getUser()}).catch(function(e){401===e.response.status?E.notifyWithCustomMessage("Аутентификация не удалась: неверное имя пользователя или пароль"):E.notifyWithCustomMessage(e.data.message),t.user.password=""})}}]),e}(b["e"]);h["a"]([Object(b["d"])()],T.prototype,"user",void 0),h["a"]([Object(_["b"])("user")],T.prototype,"userState",void 0),h["a"]([_["a"]],T.prototype,"getUser",void 0),T=h["a"]([Object(b["a"])({})],T);var N=T,F=N,U=Object(i["a"])(F,P,G,!1,null,null,null);U.options.__file="Login.vue";var B=U.exports,A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-desktop manager"},[a("notifications"),a("header-component"),a("div",{staticClass:"container"},[a("router-view")],1)],1)},D=[],H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"manager"},[a("nav",{staticClass:"navbar navbar-expand-md navbar-dark fixed-top bg-dark nav-backround"},[t._m(0),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarCollapse"}},[a("ul",{staticClass:"navbar-nav mr-auto"},[a("li",{staticClass:"nav-item active"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/",tag:"a"}},[t._v("На главную "),a("span",{staticClass:"sr-only"})])],1),a("li",{staticClass:"nav-item dropdown"},[a("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",id:"navbarDropdownMenuManagerLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("\n                        Управление\n                    ")]),"superadmin"===t.userState.role?a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"navbarDropdownMenuManagerLink"}},[a("router-link",{staticClass:"nav-link dropdown-item",attrs:{to:"/manager/contractors",tag:"a"}},[t._v("Контрагенты\n                        ")]),a("router-link",{staticClass:"nav-link dropdown-item",attrs:{to:"/manager/modules",tag:"a"}},[t._v("Модули\n                        ")]),a("router-link",{staticClass:"nav-link dropdown-item",attrs:{to:"/manager/layers",tag:"a"}},[t._v("Слои")]),a("router-link",{staticClass:"nav-link dropdown-item",attrs:{to:"/manager/gis",tag:"a"}},[t._v("Картография\n                        ")])],1):a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"navbarDropdownMenuManagerLink"}},[a("router-link",{staticClass:"nav-link dropdown-item",attrs:{to:"/manager/contractors/modules",tag:"a"}},[t._v("Модули\n                        ")]),a("router-link",{staticClass:"nav-link dropdown-item",attrs:{to:"/manager/gis",tag:"a"}},[t._v("Картография\n                        ")])],1)]),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/login",tag:"a"}},[t._v("Выйти "),a("span",{staticClass:"sr-only"})])],1)])])])])},z=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarCollapse","aria-controls":"navbarCollapse","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("span",{staticClass:"navbar-toggler-icon"})])}],q=function(t){function e(){return Object(m["a"])(this,e),Object(g["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),e}(b["e"]);h["a"]([Object(_["b"])("user")],q.prototype,"userState",void 0),q=h["a"]([Object(b["a"])({})],q);var V=q,J=V,W=Object(i["a"])(J,H,z,!1,null,null,null);W.options.__file="HeaderClosed.vue";var Y=W.exports,Z=function(t){function e(){return Object(m["a"])(this,e),Object(g["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),e}(b["e"]);Z=h["a"]([Object(b["a"])({components:{HeaderComponent:Y}})],Z);var K=Z,Q=K,X=Object(i["a"])(Q,A,D,!1,null,null,null);X.options.__file="Desktop.vue";var tt=X.exports,et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-modules-container content"},[a("h1",[t._v("Панель редактирования данных")]),a("div",{staticClass:"grid-data"},[t._m(0),t._l(t.moduleState.infomodules,function(e){return a("div",t._l(e.layers,function(n){return a("div",{staticClass:"row row-body"},[a("div",{staticClass:"col-7"},[a("label",{staticClass:"title"},[t._v(t._s(n.title))]),a("label",{staticClass:"description",domProps:{innerHTML:t._s(n.description)}}),a("div",{staticClass:"actions"},[a("button",{staticClass:"btn-info",on:{click:function(e){t.showLayer(n)}}},[t._v("Редактор данных")]),a("button",{staticClass:"btn-info",on:{click:function(e){t.showMap(n)}}},[t._v("Картографический редактор")])])]),a("div",{staticClass:"col-5"},[a("label",{staticClass:"title"},[t._v(t._s(e.title))]),a("label",{staticClass:"description",domProps:{innerHTML:t._s(e.description)}})])])}),0)}),t._m(1)],2)])},at=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-header"},[a("div",{staticClass:"col-7"},[t._v("Доступные данные")]),a("div",{staticClass:"col-5"},[t._v("Наименование модуля")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-footer"},[a("div",{staticClass:"col-7"},[t._v("Доступные данные")]),a("div",{staticClass:"col-5"},[t._v("Наименование модуля")])])}],nt=function(t){function e(){return Object(m["a"])(this,e),Object(g["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),Object(y["a"])(e,[{key:"created",value:function(){this.getModules()}},{key:"showLayer",value:function(t){this.$router.push("/manager/information/".concat(t.id))}},{key:"showMap",value:function(t){this.$router.push("/manager/gis")}}]),e}(b["e"]);h["a"]([Object(_["a"])("getModules")],nt.prototype,"getModules",void 0),h["a"]([Object(_["b"])("infomodule")],nt.prototype,"moduleState",void 0),nt=h["a"]([b["a"]],nt);var rt=nt,ot=rt,it=Object(i["a"])(ot,et,at,!1,null,null,null);it.options.__file="Modules.vue";var st=it.exports,ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-modules-container content"},[a("h1",[t._v('Редактор открытых данных слоя "'+t._s(t.layerState.layer.title)+'"')]),a("button",{staticClass:"btn btn-info",attrs:{"data-toggle":"modal","data-target":"#singleInformationModal"},on:{click:t.createElement}},[a("i",{staticClass:"fas fa-plus-circle"}),t._v("\n        Создать новый элемент\n    ")]),a("button",{staticClass:"btn btn-info btn-right",on:{click:function(e){t.$router.go(-1)}}},[a("i",{staticClass:"fas fa-arrow-circle-left"}),t._v("\n        Назад\n    ")]),a("div",{staticClass:"grid-data"},[t._m(0),t._l(t.elementState.elements,function(e){return a("div",{staticClass:"row row-body"},[a("div",{staticClass:"col-6"},[a("label",{staticClass:"title"},[t._v(t._s(e.title))]),a("label",{staticClass:"description"},[t._v("Количество геоэлементов: "+t._s(e.geometries_count))]),a("div",{staticClass:"actions"},[a("button",{staticClass:"btn-info",attrs:{"data-toggle":"modal","data-target":"#singleInformationModal"},on:{click:function(a){t.managerSetSingleElement(e)}}},[t._v("Изменить")]),a("button",{staticClass:"btn-info",on:{click:function(a){t.getElementGeometries(e)}}},[t._v("Состав элемента")]),a("button",{staticClass:"btn-danger",attrs:{"data-toggle":"modal","data-target":"#sureModal"},on:{click:function(a){t.setSureModalContent(e)}}},[t._v("Удалить")])])]),a("div",{staticClass:"col-6"},[a("label",{domProps:{innerHTML:t._s(e.description)}})])])}),t._m(1)],2),a("single-information"),a("sure-modal")],1)},lt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-header"},[a("div",{staticClass:"col-6"},[t._v("Наименование")]),a("div",{staticClass:"col-6"},[t._v("Описание")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-footer"},[a("div",{staticClass:"col-6"},[t._v("Наименование")]),a("div",{staticClass:"col-6"},[t._v("Описание")])])}],ut=(a("96cf"),a("1da1")),dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"singleInformationModal",tabindex:"-1",role:"dialog","aria-labelledby":"singleInformationModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"singleInformationModalLabel"}},[0===t.elementState.element.id?a("span",[t._v("Создание нового элемента")]):a("span",[t._v('Изменение элемента "'+t._s(t.elementState.element.title)+'"')])]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleInformationTitle"}},[t._v("Наименование *")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.elementState.element.title,expression:"elementState.element.title"}],staticClass:"form-control",attrs:{type:"text",id:"singleInformationTitle",required:"",placeholder:"Наименование элемента"},domProps:{value:t.elementState.element.title},on:{input:function(e){e.target.composing||t.$set(t.elementState.element,"title",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleInformationDescription"}},[t._v("Описание")]),a("vue-editor",{ref:"wysiwygContents",attrs:{id:"singleInformationDescription",editorToolbar:t.toolbar},model:{value:t.elementState.element.description,callback:function(e){t.$set(t.elementState.element,"description",e)},expression:"elementState.element.description"}})],1)])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.managerUpdateElement}},[t._v("\n                    Сохранить\n                ")]),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Закрыть")])])])])])},pt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],mt=a("b3e9"),yt=function(t){function e(){var t;return Object(m["a"])(this,e),t=Object(g["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.toolbar=[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{align:[]}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["clean"]],t}return Object(v["a"])(e,t),e}(b["e"]);h["a"]([_["a"]],yt.prototype,"managerUpdateElement",void 0),h["a"]([Object(_["b"])("managerElement")],yt.prototype,"elementState",void 0),h["a"]([Object(b["d"])()],yt.prototype,"toolbar",void 0),yt=h["a"]([Object(b["a"])({components:{VueEditor:mt["VueEditor"]}})],yt);var gt=yt,ft=gt,vt=Object(i["a"])(ft,dt,pt,!1,null,null,null);vt.options.__file="SingleInformation.vue";var ht=vt.exports,bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"sureModal",tabindex:"-1",role:"dialog","aria-labelledby":"sureModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"sureModalLabel"}},[t._v(t._s(t.sureModalState.modal.title))]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("p",[t._v(t._s(t.sureModalState.modal.text))])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.sureModalState.modal.action}},[t._v(t._s(t.sureModalState.modal.buttonOk))]),a("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"}},[t._v(t._s(t.sureModalState.modal.buttonCansel))])])])])])},_t=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],Ct=function(t){function e(){return Object(m["a"])(this,e),Object(g["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),e}(b["e"]);h["a"]([Object(_["b"])("sureModal")],Ct.prototype,"sureModalState",void 0),Ct=h["a"]([Object(b["a"])({})],Ct);var St=Ct,kt=St,wt=Object(i["a"])(kt,bt,_t,!1,null,null,null);wt.options.__file="SureModal.vue";var Ot=wt.exports,jt=function(t){function e(){return Object(m["a"])(this,e),Object(g["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),Object(y["a"])(e,[{key:"created",value:function(){this.getLayerById({id:this.$route.params.id}),this.managerGetElements({layerId:this.$route.params.id})}},{key:"setSureModalContent",value:function(t){var e=this;this.setSureModal({title:"Удалить элемент?",text:'Вы уверены, что хотите удалить элемент "'.concat(t.title,'" из системы?'),action:function(){var a=Object(ut["a"])(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return e.managerSetSingleElement(t),a.next=3,e.managerDeleteElement();case 3:e.managerUnsetSingleElement({layerId:e.$route.params.id});case 4:case"end":return a.stop()}},a,this)}));function n(){return a.apply(this,arguments)}return n}()})}},{key:"createElement",value:function(){this.managerUnsetSingleElement({layerId:this.$route.params.id})}},{key:"getElementGeometries",value:function(t){this.managerSetSingleElement(t),this.$router.push("/manager/element/".concat(t.id))}}]),e}(b["e"]);h["a"]([_["a"]],jt.prototype,"setSureModal",void 0),h["a"]([_["a"]],jt.prototype,"getLayerById",void 0),h["a"]([_["a"]],jt.prototype,"managerGetElements",void 0),h["a"]([_["a"]],jt.prototype,"managerSetSingleElement",void 0),h["a"]([_["a"]],jt.prototype,"managerUnsetSingleElement",void 0),h["a"]([_["a"]],jt.prototype,"managerDeleteElement",void 0),h["a"]([Object(_["b"])("managerLayer")],jt.prototype,"layerState",void 0),h["a"]([Object(_["b"])("managerElement")],jt.prototype,"elementState",void 0),jt=h["a"]([Object(b["a"])({components:{SingleInformation:ht,SureModal:Ot}})],jt);var xt=jt,Et=xt,Mt=Object(i["a"])(Et,ct,lt,!1,null,null,null);Mt.options.__file="Information.vue";var Rt=Mt.exports,It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-modules-container content"},[a("h1",[t._v('Редактор геообъектов элемента "'+t._s(t.elementState.element.title)+'"')]),a("button",{staticClass:"btn btn-info",attrs:{"data-toggle":"modal","data-target":"#singleGeometryInformationModal"},on:{click:t.createGeometry}},[a("i",{staticClass:"fas fa-plus-circle"}),t._v("\n        Создать новый геообъект\n    ")]),a("button",{staticClass:"btn btn-info btn-right",on:{click:function(e){t.$router.go(-1)}}},[a("i",{staticClass:"fas fa-arrow-circle-left"}),t._v("\n        Назад\n    ")]),a("div",{staticClass:"grid-data"},[t._m(0),t._l(t.geometryState.geometries,function(e){return a("div",{staticClass:"row row-body"},[a("div",{staticClass:"col-4"},[a("label",{staticClass:"title"},[t._v(t._s(e.title))]),a("div",{staticClass:"actions"},[a("button",{staticClass:"btn-info",attrs:{"data-toggle":"modal","data-target":"#singleGeometryInformationModal"},on:{click:function(a){t.managerSetSingleGeometry(e)}}},[t._v("Изменить")]),a("button",{staticClass:"btn-danger",attrs:{"data-toggle":"modal","data-target":"#sureModal"},on:{click:function(a){t.setSureModalContent(e)}}},[t._v("Удалить")])])]),a("div",{staticClass:"col-4"},[a("label",{domProps:{innerHTML:t._s(e.description)}})]),a("div",{staticClass:"col-4"},[a("label",[t._v(t._s(e.city)+", "+t._s(e.street)+", "+t._s(e.build))])])])}),t._m(1)],2),a("single-geometry-information"),a("sure-modal")],1)},Lt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-header"},[a("div",{staticClass:"col-4"},[t._v("Наименование")]),a("div",{staticClass:"col-4"},[t._v("Описание")]),a("div",{staticClass:"col-4"},[t._v("Адрес")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-footer"},[a("div",{staticClass:"col-4"},[t._v("Наименование")]),a("div",{staticClass:"col-4"},[t._v("Описание")]),a("div",{staticClass:"col-4"},[t._v("Адрес")])])}],$t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"singleGeometryInformationModal",tabindex:"-1",role:"dialog","aria-labelledby":"singleGeometryInformationModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"singleGeometryInformationModalLabel"}},[0===t.geometryState.geometry.id?a("span",[t._v("Создание нового геообъекта")]):a("span",[t._v('Изменение геообъекта "'+t._s(t.geometryState.geometry.title)+'"')])]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleGeometryTitle"}},[t._v("Наименование *")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.geometryState.geometry.title,expression:"geometryState.geometry.title"}],staticClass:"form-control",attrs:{type:"text",id:"singleGeometryTitle",required:"",placeholder:"Наименование геообъекта"},domProps:{value:t.geometryState.geometry.title},on:{input:function(e){e.target.composing||t.$set(t.geometryState.geometry,"title",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleGeometryDescription"}},[t._v("Описание")]),a("vue-editor",{ref:"wysiwygContents",attrs:{id:"singleGeometryDescription",editorToolbar:t.toolbar},model:{value:t.geometryState.geometry.description,callback:function(e){t.$set(t.geometryState.geometry,"description",e)},expression:"geometryState.geometry.description"}})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleGeometryComposition"}},[t._v("Тип геообъекта:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.geometryState.geometry.layer_composition_id,expression:"geometryState.geometry.layer_composition_id"}],staticClass:"form-control",attrs:{id:"singleGeometryComposition",disabled:0!==t.geometryState.geometry.id},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.geometryState.geometry,"layer_composition_id",e.target.multiple?a:a[0])}}},t._l(t.layerCompositionState.compositions,function(e){return a("option",{domProps:{value:e.id}},[t._v("\n                                "+t._s(e.title)+"\n                            ")])}),0)]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleGeometryAddressCity"}},[t._v("Город")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.geometryState.geometry.city,expression:"geometryState.geometry.city"}],staticClass:"form-control",attrs:{type:"text",id:"singleGeometryAddressCity",placeholder:"г. Астрахань"},domProps:{value:t.geometryState.geometry.city},on:{input:function(e){e.target.composing||t.$set(t.geometryState.geometry,"city",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleGeometryAddressStreet"}},[t._v("Улица")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.geometryState.geometry.street,expression:"geometryState.geometry.street"}],staticClass:"form-control",attrs:{type:"text",id:"singleGeometryAddressStreet",placeholder:"ул. Кр.Набережная"},domProps:{value:t.geometryState.geometry.street},on:{input:function(e){e.target.composing||t.$set(t.geometryState.geometry,"street",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleGeometryAddressBuild"}},[t._v("Дом, строение")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.geometryState.geometry.build,expression:"geometryState.geometry.build"}],staticClass:"form-control",attrs:{type:"text",id:"singleGeometryAddressBuild"},domProps:{value:t.geometryState.geometry.build},on:{input:function(e){e.target.composing||t.$set(t.geometryState.geometry,"build",e.target.value)}}})])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.managerUpdateGeometry}},[t._v("\n                    Сохранить\n                ")]),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Закрыть")])])])])])},Pt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],Gt=function(t){function e(){var t;return Object(m["a"])(this,e),t=Object(g["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.toolbar=[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{align:[]}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["clean"]],t}return Object(v["a"])(e,t),e}(b["e"]);h["a"]([_["a"]],Gt.prototype,"managerUpdateGeometry",void 0),h["a"]([_["a"]],Gt.prototype,"getLayerCompositions",void 0),h["a"]([Object(_["b"])("managerElement")],Gt.prototype,"elementState",void 0),h["a"]([Object(_["b"])("managerGeometry")],Gt.prototype,"geometryState",void 0),h["a"]([Object(_["b"])("managerLayerComposition")],Gt.prototype,"layerCompositionState",void 0),h["a"]([Object(b["d"])()],Gt.prototype,"toolbar",void 0),Gt=h["a"]([Object(b["a"])({components:{VueEditor:mt["VueEditor"]}})],Gt);var Tt=Gt,Nt=Tt,Ft=Object(i["a"])(Nt,$t,Pt,!1,null,null,null);Ft.options.__file="SingleGeometryInformation.vue";var Ut=Ft.exports,Bt=function(t){function e(){return Object(m["a"])(this,e),Object(g["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),Object(y["a"])(e,[{key:"created",value:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.managerGetElementById({id:this.$route.params.id});case 2:this.getLayerCompositions({layerId:this.elementState.element.layer_id}),this.managerGetGeometries({elementId:this.$route.params.id});case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"setSureModalContent",value:function(t){var e=this;this.setSureModal({title:"Удалить геообъект?",text:'Вы уверены, что хотите удалить геообъект "'.concat(t.title,'" из системы?'),action:function(){var a=Object(ut["a"])(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return e.managerSetSingleGeometry(t),a.next=3,e.managerDeleteGeometry();case 3:e.managerUnsetSingleGeometry({elementId:e.$route.params.id});case 4:case"end":return a.stop()}},a,this)}));function n(){return a.apply(this,arguments)}return n}()})}},{key:"createGeometry",value:function(){this.managerUnsetSingleGeometry({elementId:this.$route.params.id})}}]),e}(b["e"]);h["a"]([_["a"]],Bt.prototype,"setSureModal",void 0),h["a"]([_["a"]],Bt.prototype,"managerGetElementById",void 0),h["a"]([_["a"]],Bt.prototype,"managerGetGeometries",void 0),h["a"]([_["a"]],Bt.prototype,"managerSetSingleGeometry",void 0),h["a"]([_["a"]],Bt.prototype,"managerUnsetSingleGeometry",void 0),h["a"]([_["a"]],Bt.prototype,"managerDeleteGeometry",void 0),h["a"]([_["a"]],Bt.prototype,"getLayerCompositions",void 0),h["a"]([Object(_["b"])("managerElement")],Bt.prototype,"elementState",void 0),h["a"]([Object(_["b"])("managerGeometry")],Bt.prototype,"geometryState",void 0),Bt=h["a"]([Object(b["a"])({components:{SingleGeometryInformation:Ut,SureModal:Ot}})],Bt);var At=Bt,Dt=At,Ht=Object(i["a"])(Dt,It,Lt,!1,null,null,null);Ht.options.__file="GeometriesInformation.vue";var zt=Ht.exports,qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-geom-data-container"},[a("gis-data-editor")],1)},Vt=[],Jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"geom-data manager"},[a("ol-map",{attrs:{editor:!0},on:{modifyend:t.onModifyend,drawend:t.onDrawend}}),a("a",{staticClass:"btn-come-back",on:{click:function(e){t.$router.go(-1)}}},[a("i",{staticClass:"fas fa-arrow-left"}),a("label",[t._v("назад")])]),a("div",{staticClass:"geom-data-list"},[a("h2",[t._v("Картографические слои")]),a("ul",{staticClass:"layers-list"},t._l(this.layerState.layers,function(e,n){return a("li",{key:e.id,staticClass:"layer-item",class:{empty:0===e.elements.length}},[a("span",{staticClass:"layer-item-content"},[a("button",{staticClass:"btn-checked layer-item-select",class:{checked:e.checked},attrs:{disabled:0===e.elements.length},on:{click:function(e){t.selectLayer(n)}}}),a("label",[t._v(t._s(e.title))]),a("button",{staticClass:"layer-item-hidden",on:{click:function(e){t.hiddenLayer(n)}}},[e.hidden?a("i",{staticClass:"fas fa-angle-up"}):a("i",{staticClass:"fas fa-angle-down"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:!e.hidden,expression:"!layer.hidden"}],staticClass:"btn-action btn-add-element",attrs:{title:"Создать элемент"},on:{click:function(e){t.createElement(n)}}},[a("i",{staticClass:"fas fa-plus-circle"})])]),a("ul",{directives:[{name:"show",rawName:"v-show",value:!e.hidden,expression:"!layer.hidden"}],staticClass:"elements-list"},t._l(e.elements,function(e,r){return a("li",{key:e.id,staticClass:"element-item"},[a("span",{class:{"is-editor":t.elementState.element.id===e.id}},[0!==e.geometries_count?a("button",{staticClass:"btn-checked element-item-select",class:{checked:e.checked},on:{click:function(e){t.selectElement(n,r)}}}):a("i",{staticClass:"fas fa-exclamation-triangle",attrs:{title:"Геометрия элемента не задана"}}),t.elementState.element.id===e.id?a("single-element"):a("label",{class:{warning:0===e.geometries_count}},[t._v("\n                                "+t._s(e.title)+"\n                                "),a("button",{staticClass:"btn-action btn-edit",attrs:{title:"Редактировать элемент"},on:{click:function(e){t.changeElement(n,r)}}},[a("i",{staticClass:"fa fa-pen"})]),a("button",{staticClass:"btn-action btn-delete",attrs:{title:"Удалить элемент","data-toggle":"modal","data-target":"#sureModal"},on:{click:function(e){t.setSureModalContent(n,r)}}},[a("i",{staticClass:"fas fa-trash"})])])],1)])}),0)])}),0)]),a("sure-modal")],1)},Wt=[],Yt=(a("f751"),a("ac6a"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{attrs:{id:"map"}}),a("div",{attrs:{id:"mouse-position"}}),a("div",{attrs:{id:"current-zoom"}},[t._v(t._s(t.mapState.properties.zoom))])])}),Zt=[],Kt=(a("ac4d"),a("8a81"),a("64d9")),Qt=a("5831"),Xt=a("3e6b"),te=a("c807"),ee=function(){var t=new Qt["a"]({});return new Xt["a"]({source:t})},ae=function(t,e){var a=new te["a"]({source:t});return a.on("modifyend",e),a},ne=function(t,e,a){a=a||"id";var n=t.filter(function(t){return t[a]===e});return 0!==n.length&&n[0]},re=function(t,e,a){a=a||"id";for(var n=0;n<t.length;n++)if(t[n][a]===e)return n;return-1},oe=(a("8449"),a("6c7b"),a("6b54"),a("8682")),ie=a("83a6"),se=a("6cbf"),ce=a("ce2c"),le=a("35d8"),ue=a("8295"),de=a("6c77"),pe=function(t,e){if(!e)return t;var a=Math.floor(255*e/100).toString(16);return t+(a.length%2?"0"+a:a)},me=function(t,e){var a={};if(t.stroke&&(a=Object.assign({},{stroke:new oe["a"]({color:pe(t.stroke.color,100-t.stroke.opacity),width:t.stroke.width})})),t.fill&&(a=Object.assign({},a,{fill:new ie["a"]({color:pe(t.fill.color,100-t.fill.opacity)})})),"icon"===t.pointType&&t.icon)a=Object.assign({},a,{image:new se["a"]({src:t.icon.src,anchor:t.icon.anchor,anchorXUnits:"pixels",anchorYUnits:"pixels",opacity:(100-t.icon.opacity)/100,scale:t.icon.scale,rotation:t.icon.rotation*Math.PI/180})});else if(t.shape){var n={fill:new ie["a"]({color:pe(t.shape.fill.color,100-t.shape.fill.opacity)}),stroke:new oe["a"]({color:pe(t.shape.stroke.color,100-t.shape.stroke.opacity),width:t.shape.stroke.width}),radius:t.shape.radius};void 0!==t.shape.points&&t.shape.points>10?a=Object.assign({},a,{image:new ce["a"](n)}):void 0!==t.shape.points&&(n=Object.assign({},n,{points:t.shape.points,rotation:t.shape.rotation}),a=Object.assign({},a,{image:new le["a"](n)}))}if(e){var r={text:e,font:t.font.font,textBaseline:t.font.textBaseline,fill:new ie["a"](t.font.fill)};t.font.stroke&&(r=Object.assign({},r,{stroke:new oe["a"](t.font.stroke)})),t.font.offsetY&&(r=Object.assign({},r,{offsetY:t.font.offsetY})),t.font.placement&&(r=Object.assign({},r,{placement:t.font.placement})),a=Object.assign({},a,{text:new ue["a"](r)})}return new de["c"](a)},ye=function(t,e,a,n){var r=new Kt["a"],o=r.readFeature(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});if(n){var i=me(n,a.title);o.setStyle(i)}return o.setProperties(a),o.setId(t),o},ge=function(t,e){var a=me(e,t.get("title"));t.setStyle(a)},fe=function(t){return-1!==t.indexOf("POINT")?"point":-1!==t.indexOf("LINESTRING")?"linestring":"polygon"},ve=a("5eee"),he=a("a2c7"),be=a("480c"),_e=a("d0e9"),Ce=a("2ce2"),Se=a("ac29"),ke=a("020f"),we=a("a568"),Oe=a("256f"),je=a("8f3a"),xe=function(t,e,a,n){var r=new ke["a"]({coordinateFormat:Object(we["c"])(4),projection:"EPSG:4326",className:"map-mouse-position",target:document.getElementById("mouse-position"),undefinedHTML:"&nbsp;"});return new ve["a"]({layers:[new be["a"]({source:new _e["a"]})],target:n||"map",controls:Object(je["a"])().extend([r]),view:new he["a"]({center:Object(Oe["h"])([t,e],"EPSG:4326","EPSG:3857"),zoom:a})})},Ee=function(t){var e=new Ce["a"];return e.on("select",t),e},Me=function(t,e){t.getSource().forEachFeature(function(t){var a=re(e,t.get("layer_composition_id"));-1!==a&&ge(t,e[a])})},Re=function(t,e,a){if(""!==t){var n=new Se["a"]({source:e.getSource(),type:t});return n.on("drawend",a),n}},Ie=function(t,e){var a=e.getGeometry().getExtent();a[0]===a[2]&&a[1]===a[3]?t.getView().animate({center:[(a[0]+a[2])/2,(a[1]+a[3])/2],duration:300}):t.getView().fit(a,{padding:[0,180,0,0],minResolution:5,duration:300})},Le=function(t,e){if(0!==e.length){var a=e[0].getGeometry().getExtent();e.forEach(function(t){var e=t.getGeometry().getExtent();a[0]>e[0]&&(a[0]=e[0]),a[1]>e[1]&&(a[1]=e[1]),a[2]<e[2]&&(a[2]=e[2]),a[3]<e[3]&&(a[3]=e[3])}),a[0]===a[2]&&a[1]===a[3]?t.getView().animate({center:[(a[0]+a[2])/2,(a[1]+a[3])/2],duration:300}):t.getView().fit(a,{padding:[0,180,0,0],minResolution:5,duration:300})}},$e=function(t){function e(){return Object(m["a"])(this,e),Object(g["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),Object(y["a"])(e,[{key:"selected",value:function(t){if(0!==t.selected.length)return t.selected[0].getProperties()}},{key:"modifyend",value:function(t){var e=t.features.getArray(),a=!0,n=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var s=o.value,c=s.getRevision();if(c>3)return{properties:s.getProperties(),geom:(new Kt["a"]).writeFeature(s,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"})}}}catch(l){n=!0,r=l}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}}},{key:"drawend",value:function(t){return{properties:t.feature.getProperties(),geom:(new Kt["a"]).writeFeature(t.feature,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"})}}},{key:"onChangeInteractionDrawMode",value:function(){this.editor&&(this.createInteractions(),this.mapState.map.render())}},{key:"mounted",value:function(){this.init()}},{key:"init",value:function(){var t=this,e=xe(this.mapState.properties.longitude,this.mapState.properties.latitude,this.mapState.properties.zoom,this.mapState.properties.selectorMapContainer);e.addInteraction(Ee(this.selected)),e.on("moveend",function(){t.getMapCenter()});var a=ee();if(e.addLayer(a),this.editor){var n=ae(a.getSource(),this.modifyend);e.addInteraction(n)}this.createMap({map:e,layer:a})}},{key:"createInteractions",value:function(){this.removeInteractions(),""!==this.mapState.interaction.draw.mode&&(this.mapState.interaction.draw.layer||(this.mapState.interaction.draw.layer=ee(),this.mapState.map.addLayer(this.mapState.interaction.draw.layer)),this.mapState.interaction.draw.draw=Re(this.mapState.interaction.draw.mode,this.mapState.interaction.draw.layer,this.drawend),this.mapState.map.addInteraction(this.mapState.interaction.draw.draw))}},{key:"removeInteractions",value:function(){!1!==this.mapState.interaction.draw.draw&&(this.mapState.map.removeInteraction(this.mapState.interaction.draw.draw),this.mapState.interaction.draw.draw=!1)}}]),e}(b["e"]);h["a"]([Object(_["b"])("map")],$e.prototype,"mapState",void 0),h["a"]([Object(b["c"])(Boolean)],$e.prototype,"editor",void 0),h["a"]([_["a"]],$e.prototype,"createMap",void 0),h["a"]([_["a"]],$e.prototype,"getMapCenter",void 0),h["a"]([Object(b["b"])()],$e.prototype,"selected",null),h["a"]([Object(b["b"])()],$e.prototype,"modifyend",null),h["a"]([Object(b["b"])()],$e.prototype,"drawend",null),h["a"]([Object(b["f"])("mapState.interaction.draw.mode")],$e.prototype,"onChangeInteractionDrawMode",null),$e=h["a"]([Object(b["a"])({components:{}})],$e);var Pe=$e,Ge=Pe,Te=Object(i["a"])(Ge,Yt,Zt,!1,null,null,null);Te.options.__file="Map.vue";var Ne=Te.exports,Fe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"single-element"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.elementState.element.title,expression:"elementState.element.title"}],staticClass:"element-title-field",attrs:{type:"text",placeholder:"Наименование элемента"},domProps:{value:t.elementState.element.title},on:{blur:function(e){t.updateSingleElement()},input:function(e){e.target.composing||t.$set(t.elementState.element,"title",e.target.value)}}}),0!==t.elementState.element.id?a("span",{staticClass:"element-geometries-container"},[a("h3",[t._v("Добавить геообъект:")]),a("div",{staticClass:"add-geometry-container"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.composition,expression:"composition"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.composition=e.target.multiple?a:a[0]}}},t._l(t.compositions,function(e){return a("option",{domProps:{value:e}},[t._v("\n                    "+t._s(e.title)+"\n                ")])}),0)]),a("button",{staticClass:"btn-add-geometry",attrs:{title:"Создать геообъект"},on:{click:function(e){t.createGeometry()}}},[a("i",{staticClass:"fas fa-plus"})]),0!==t.elementState.element.geometries.length?a("h3",[t._v("Состав слоя:")]):t._e(),a("ul",{staticClass:"element-geometries-list"},t._l(t.elementState.element.geometries,function(e){return a("li",{staticClass:"element-geometry-item point"},[e.geom?a("button",{staticClass:"geometry-geom",attrs:{title:"Изменить геометрию объекта"},on:{click:function(a){t.focusGeometry(e)}}},["point"===e.type?a("i",{staticClass:"fas fa-map-marker-alt"}):"linestring"===e.type?a("i",{staticClass:"fas fa-route"}):"polygon"===e.type?a("i",{staticClass:"fas fa-draw-polygon"}):t._e()]):a("button",{staticClass:"geometry-geom empty",attrs:{title:"Задать геометрию объекта"},on:{click:function(a){t.updateEmptyGeometry(e)}}},["point"===e.type?a("i",{staticClass:"fas fa-map-marker-alt"}):"linestring"===e.type?a("i",{staticClass:"fas fa-route"}):"polygon"===e.type?a("i",{staticClass:"fas fa-draw-polygon"}):t._e()]),a("div",{staticClass:"geometry-title",class:{empty:!e.geom}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"geometry.title"}],staticClass:"geometry-title-field",attrs:{type:"text"},domProps:{value:e.title},on:{blur:function(a){t.updateSingleGeometry(e)},input:function(a){a.target.composing||t.$set(e,"title",a.target.value)}}})]),a("button",{staticClass:"btn-remove-geometry",attrs:{title:"Удалить геометрию"},on:{click:function(a){t.deleteSingleGeometry(e)}}},[a("i",{staticClass:"fas fa-trash"})])])}),0)]):t._e(),a("div",{staticClass:"actions"},[a("button",{staticClass:"btn-edit-save btn-danger",attrs:{title:"Свернуть редактор"},on:{click:t.closeSingleElement}},[a("label",[t._v("Закрыть")])])])])},Ue=[],Be=function(t){function e(){return Object(m["a"])(this,e),Object(g["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),Object(y["a"])(e,[{key:"created",value:function(){this.getCompositionsList()}},{key:"getCompositionsList",value:function(){var t=re(this.layerState.layers,this.elementState.element.layer_id);this.compositions=this.layerState.layers[t].composition,this.composition=this.compositions[0]}},{key:"updateSingleElement",value:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.updateElement(),e=this.layerState.currentLayerIndex,a=this.layerState.currentElementIndex,this.layerState.layers[e].elements[a]=Object.assign({},this.layerState.layers[e].elements[a],this.elementState.element);case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"createGeometry",value:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.unsetSingleGeometry({layer_composition_id:this.composition.id,type:this.composition.geometry_type}),this.setMapInteraction({mode:this.composition.geometry_type});case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"updateEmptyGeometry",value:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.setSingleGeometry(e),this.setMapInteraction({mode:e.type});case 2:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"focusGeometry",value:function(t){this.focusOfFeature({id:"".concat(t.type,"-").concat(t.id)})}},{key:"updateSingleGeometry",value:function(t){this.setSingleGeometry(t),this.updateGeometry({type:t.type}),this.removeFeatureFromMap({id:"".concat(t.type,"-").concat(t.id)}),this.addFeatureToMap({id:"".concat(t.type,"-").concat(t.id),layer_composition_id:t.layer_composition_id,geom:t.geom,property:t})}},{key:"deleteSingleGeometry",value:function(t){this.setSingleGeometry(t),this.deleteGeometry({type:t.type}),this.removeFeatureFromMap({id:"".concat(t.type,"-").concat(t.id)});var e=re(this.elementState.element.geometries,t.id);this.elementState.element.geometries.splice(e,1)}},{key:"closeSingleElement",value:function(){this.unsetSingleElement({layerId:0}),this.unsetCurrentIndex()}}]),e}(b["e"]);h["a"]([Object(_["b"])("gisLayer")],Be.prototype,"layerState",void 0),h["a"]([Object(_["b"])("gisElement")],Be.prototype,"elementState",void 0),h["a"]([Object(_["b"])("gisGeometry")],Be.prototype,"geometryState",void 0),h["a"]([_["a"]],Be.prototype,"updateElement",void 0),h["a"]([_["a"]],Be.prototype,"unsetSingleElement",void 0),h["a"]([_["a"]],Be.prototype,"setSingleGeometry",void 0),h["a"]([_["a"]],Be.prototype,"unsetSingleGeometry",void 0),h["a"]([_["a"]],Be.prototype,"updateGeometry",void 0),h["a"]([_["a"]],Be.prototype,"deleteGeometry",void 0),h["a"]([_["a"]],Be.prototype,"setMapInteraction",void 0),h["a"]([_["a"]],Be.prototype,"setMapElements",void 0),h["a"]([_["a"]],Be.prototype,"unsetCurrentIndex",void 0),h["a"]([_["a"]],Be.prototype,"removeFeatureFromMap",void 0),h["a"]([_["a"]],Be.prototype,"addFeatureToMap",void 0),h["a"]([_["a"]],Be.prototype,"focusOfFeature",void 0),h["a"]([Object(b["d"])("IComposition[]")],Be.prototype,"compositions",void 0),h["a"]([Object(b["d"])("IComposition")],Be.prototype,"composition",void 0),Be=h["a"]([Object(b["a"])({})],Be);var Ae=Be,De=Ae,He=Object(i["a"])(De,Fe,Ue,!1,null,null,null);He.options.__file="SingleElement.vue";var ze=He.exports,qe=function(t,e){return t.map(function(t){return t.id===e.id&&(t=Object.assign({},t,e)),t})},Ve=function(t,e){return t.filter(function(t){return t.id!==e.id})},Je=function(t){function e(){return Object(m["a"])(this,e),Object(g["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),Object(y["a"])(e,[{key:"created",value:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.gisGetLayerCompositionsToContractor();case 2:return t.next=4,this.gisGetLayersToContractor();case 4:this.setMapStyles({styles:this.layerCompositionState.styles});case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"selectElement",value:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){var n,r,o=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n=this.layerState.layers[e].elements,n[a].checked=!n[a].checked,this.layerState.layers[e].elements=n.slice(0),!n[a].checked){t.next=11;break}return t.next=6,this.selectedElement({i:e,j:a});case 6:r=[],this.layerState.layers[e].elements[a].geometries.forEach(function(t){o.addFeatureToMap({id:"".concat(t.type,"-").concat(t.id),layer_composition_id:t.layer_composition_id,geom:t.geom,property:t}),r.push("".concat(t.type,"-").concat(t.id))}),this.focusOfFeatures({ids:r}),t.next=12;break;case 11:this.layerState.layers[e].elements[a].geometries.forEach(function(t){o.removeFeatureFromMap({id:"".concat(t.type,"-").concat(t.id)})});case 12:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"selectLayer",value:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e){var a,n,r=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a=this.layerState.layers,a[e].checked=!a[e].checked,!a[e].checked){t.next=11;break}return a[e].elements.forEach(function(t){t.checked=a[e].checked,t.geometries=[]}),t.next=6,this.selectedLayer({i:e});case 6:n=[],this.layerState.layers[e].elements.forEach(function(t){t.geometries.forEach(function(t){r.addFeatureToMap({id:"".concat(t.type,"-").concat(t.id),layer_composition_id:t.layer_composition_id,geom:t.geom,property:t}),n.push("".concat(t.type,"-").concat(t.id))})}),this.focusOfFeatures({ids:n}),t.next=13;break;case 11:this.layerState.layers[e].elements.forEach(function(t){t.geometries.forEach(function(t){r.removeFeatureFromMap({id:"".concat(t.type,"-").concat(t.id)})})}),a[e].elements.forEach(function(t){t.checked=a[e].checked,t.geometries=[]});case 13:this.layerState.layers=a.slice(0);case 14:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"hiddenLayer",value:function(t){var e=this.layerState.layers;e[t].hidden=!e[t].hidden,this.layerState.layers=e.slice(0)}},{key:"createElement",value:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.unsetSingleElement({layerId:this.layerState.layers[e].id}),t.next=3,this.updateElement();case 3:this.layerState.layers[e].elements.push(this.elementState.element),this.setCurrentIndex({layerIndex:e,elementIndex:this.layerState.layers[e].elements.length-1});case 5:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"changeElement",value:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.layerState.layers[e].elements[a].checked){t.next=3;break}return t.next=3,this.selectElement(e,a);case 3:this.setSingleElement({element:this.layerState.layers[e].elements[a]}),this.setCurrentIndex({layerIndex:e,elementIndex:a});case 5:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"setSureModalContent",value:function(t,e){var a=this,n=Object.assign({},this.layerState.layers[t].elements[e]);this.setSureModal({title:"Удалить элемент?",text:'Вы уверены, что хотите удалить элемент "'.concat(n.title,'" из системы?'),action:function(){var r=Object(ut["a"])(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,a.deleteElement({elementId:n.id,elementTitle:n.title});case 2:a.layerState.layers[t].elements[e].geometries&&a.layerState.layers[t].elements[e].geometries.forEach(function(t){a.removeFeatureFromMap({id:t.id})}),a.layerState.layers[t].elements.splice(e,1),a.unsetCurrentIndex();case 5:case"end":return r.stop()}},r,this)}));function o(){return r.apply(this,arguments)}return o}()})}},{key:"onModifyend",value:function(t){this.setSingleGeometry({id:t.properties.id,title:t.properties.title,description:t.properties.description,geom:t.geom,layer_composition_id:t.properties.layer_composition_id}),this.updateGeometry({type:t.properties.type})}},{key:"onDrawend",value:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e){var a,n,r,o=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=this.geometryState.geometry.id,this.geometryState.geometry.geom=e.geom,this.geometryState.geometry.type=fe(e.geom),t.next=5,this.updateGeometry({type:fe(e.geom),elementId:this.elementState.element.id});case 5:this.setMapInteraction({mode:""}),0===a?this.elementState.element.geometries.push(this.geometryState.geometry):this.elementState.element.geometries=qe(this.elementState.element.geometries,this.geometryState.geometry),n=this.layerState.currentLayerIndex,r=this.layerState.currentElementIndex,this.layerState.layers[n].elements[r]=Object.assign({},this.layerState.layers[n].elements[r],this.elementState.element),this.layerState.layers[n].elements[r].geometries.forEach(function(t){o.removeFeatureFromMap({id:"".concat(t.type,"-").concat(t.id)}),o.addFeatureToMap({id:"".concat(t.type,"-").concat(t.id),layer_composition_id:t.layer_composition_id,geom:t.geom,property:t})});case 11:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()}]),e}(b["e"]);h["a"]([Object(_["b"])("gisLayer")],Je.prototype,"layerState",void 0),h["a"]([Object(_["b"])("gisElement")],Je.prototype,"elementState",void 0),h["a"]([Object(_["b"])("gisGeometry")],Je.prototype,"geometryState",void 0),h["a"]([Object(_["b"])("gisLayerComposition")],Je.prototype,"layerCompositionState",void 0),h["a"]([_["a"]],Je.prototype,"gisGetLayersToContractor",void 0),h["a"]([_["a"]],Je.prototype,"gisGetLayerCompositionsToContractor",void 0),h["a"]([_["a"]],Je.prototype,"selectedLayer",void 0),h["a"]([_["a"]],Je.prototype,"unselectedLayer",void 0),h["a"]([_["a"]],Je.prototype,"setCurrentIndex",void 0),h["a"]([_["a"]],Je.prototype,"unsetCurrentIndex",void 0),h["a"]([_["a"]],Je.prototype,"updateElement",void 0),h["a"]([_["a"]],Je.prototype,"deleteElement",void 0),h["a"]([_["a"]],Je.prototype,"setSingleElement",void 0),h["a"]([_["a"]],Je.prototype,"unsetSingleElement",void 0),h["a"]([_["a"]],Je.prototype,"selectedElement",void 0),h["a"]([_["a"]],Je.prototype,"updateGeometry",void 0),h["a"]([_["a"]],Je.prototype,"setSingleGeometry",void 0),h["a"]([_["a"]],Je.prototype,"setSureModal",void 0),h["a"]([_["a"]],Je.prototype,"setMapStyles",void 0),h["a"]([_["a"]],Je.prototype,"addFeatureToMap",void 0),h["a"]([_["a"]],Je.prototype,"removeFeatureFromMap",void 0),h["a"]([_["a"]],Je.prototype,"setMapInteraction",void 0),h["a"]([_["a"]],Je.prototype,"focusOfFeatures",void 0),Je=h["a"]([Object(b["a"])({components:{OlMap:Ne,SingleElement:ze,SureModal:Ot}})],Je);var We=Je,Ye=We,Ze=Object(i["a"])(Ye,Jt,Wt,!1,null,null,null);Ze.options.__file="GisDataEditor.vue";var Ke=Ze.exports,Qe=function(t){function e(){return Object(m["a"])(this,e),Object(g["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),e}(b["e"]);Qe=h["a"]([Object(b["a"])({components:{GisDataEditor:Ke}})],Qe);var Xe=Qe,ta=Xe,ea=Object(i["a"])(ta,qt,Vt,!1,null,null,null);ea.options.__file="Gis.vue";var aa=ea.exports,na=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-modules-container content"},[a("h1",[t._v("Справочник контрагентов")]),a("button",{staticClass:"btn btn-info",attrs:{"data-toggle":"modal","data-target":"#singleContractorModal"},on:{click:t.unsetSingleContractor}},[a("i",{staticClass:"fas fa-plus-circle"}),t._v("\n        Создать нового\n    ")]),a("div",{staticClass:"grid-data"},[t._m(0),t._l(t.contractorState.contractors,function(e){return a("div",{staticClass:"row row-body"},[a("div",{staticClass:"col-5"},[a("label",{staticClass:"title"},[t._v(t._s(e.name))]),a("label",{staticClass:"description"},[t._v(t._s(e.full_name))]),a("div",{staticClass:"actions"},[a("button",{staticClass:"btn-info",attrs:{"data-toggle":"modal","data-target":"#singleContractorModal"},on:{click:function(a){t.setSingleContractor(e)}}},[t._v("Изменить")]),a("button",{staticClass:"btn-info",attrs:{"data-toggle":"modal","data-target":"#contractorModules"},on:{click:function(a){t.setSingleContractor(e)}}},[t._v("Доступные модули")]),a("button",{staticClass:"btn-info",on:{click:function(a){t.getContractorUsers(e)}}},[t._v("Пользователи")]),a("button",{staticClass:"btn-danger",attrs:{"data-toggle":"modal","data-target":"#sureModal"},on:{click:function(a){t.setSureModalContent(e)}}},[t._v("Удалить")])])]),a("div",{staticClass:"col-2"},[a("label",{staticClass:"title"},[t._v(t._s(e.inn))])]),a("div",{staticClass:"col-2"},[a("label",{staticClass:"title"},[t._v(t._s(e.kpp))])]),a("div",{staticClass:"col-3"},[a("label",{staticClass:"title"},[t._v("\n                "+t._s(e.address.city)+", "+t._s(e.address.street)+", "+t._s(e.address.build)+"\n            ")])])])}),t._m(1)],2),a("single-contractor"),a("contractor-module"),a("sure-modal")],1)},ra=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-header"},[a("div",{staticClass:"col-5"},[t._v("Наименование")]),a("div",{staticClass:"col-2"},[t._v("ИНН")]),a("div",{staticClass:"col-2"},[t._v("КПП")]),a("div",{staticClass:"col-3"},[t._v("Адрес")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-footer"},[a("div",{staticClass:"col-5"},[t._v("Наименование")]),a("div",{staticClass:"col-2"},[t._v("ИНН")]),a("div",{staticClass:"col-2"},[t._v("КПП")]),a("div",{staticClass:"col-3"},[t._v("Адрес")])])}],oa=(a("7f7f"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"singleContractorModal",tabindex:"-1",role:"dialog","aria-labelledby":"singleContractorModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"singleContractorModalLabel"}},[0===t.contractorState.contractor.id?a("span",[t._v("Создание нового контрагента")]):a("span",[t._v('Изменение контрагента "'+t._s(t.contractorState.contractor.name)+'"')])]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleContractorName"}},[t._v("Наименование *")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.contractorState.contractor.name,expression:"contractorState.contractor.name"}],staticClass:"form-control",attrs:{type:"text",id:"singleContractorName",required:"",placeholder:"Наименование контрагента"},domProps:{value:t.contractorState.contractor.name},on:{input:function(e){e.target.composing||t.$set(t.contractorState.contractor,"name",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleContractorFullName"}},[t._v("Полное наименование *")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.contractorState.contractor.full_name,expression:"contractorState.contractor.full_name"}],staticClass:"form-control",attrs:{type:"text",id:"singleContractorFullName",required:"",placeholder:"Полное наименование контрагента"},domProps:{value:t.contractorState.contractor.full_name},on:{input:function(e){e.target.composing||t.$set(t.contractorState.contractor,"full_name",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleContractorINN"}},[t._v("ИНН *")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.contractorState.contractor.inn,expression:"contractorState.contractor.inn"}],staticClass:"form-control",attrs:{type:"number",id:"singleContractorINN",required:"",placeholder:"ИНН"},domProps:{value:t.contractorState.contractor.inn},on:{input:function(e){e.target.composing||t.$set(t.contractorState.contractor,"inn",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleContractorKPP"}},[t._v("КПП *")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.contractorState.contractor.kpp,expression:"contractorState.contractor.kpp"}],staticClass:"form-control",attrs:{type:"number",id:"singleContractorKPP",placeholder:"КПП"},domProps:{value:t.contractorState.contractor.kpp},on:{input:function(e){e.target.composing||t.$set(t.contractorState.contractor,"kpp",e.target.value)}}})]),t.contractorState.contractor.address?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleContractorAddressCity"}},[t._v("Город контрагента")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.contractorState.contractor.address.city,expression:"contractorState.contractor.address.city"}],staticClass:"form-control",attrs:{type:"text",id:"singleContractorAddressCity",placeholder:"г. Астрахань"},domProps:{value:t.contractorState.contractor.address.city},on:{input:function(e){e.target.composing||t.$set(t.contractorState.contractor.address,"city",e.target.value)}}})]):t._e(),t.contractorState.contractor.address?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleContractorAddressStreet"}},[t._v("Улица")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.contractorState.contractor.address.street,expression:"contractorState.contractor.address.street"}],staticClass:"form-control",attrs:{type:"text",id:"singleContractorAddressStreet",placeholder:"ул. Кр.Набережная"},domProps:{value:t.contractorState.contractor.address.street},on:{input:function(e){e.target.composing||t.$set(t.contractorState.contractor.address,"street",e.target.value)}}})]):t._e(),t.contractorState.contractor.address?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleContractorAddressBuild"}},[t._v("Дом, строение")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.contractorState.contractor.address.build,expression:"contractorState.contractor.address.build"}],staticClass:"form-control",attrs:{type:"text",id:"singleContractorAddressBuild"},domProps:{value:t.contractorState.contractor.address.build},on:{input:function(e){e.target.composing||t.$set(t.contractorState.contractor.address,"build",e.target.value)}}})]):t._e()])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.updateContractor}},[t._v("\n                    Сохранить\n                ")]),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Закрыть")])])])])])}),ia=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],sa=function(t){function e(){return Object(m["a"])(this,e),Object(g["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),e}(b["e"]);h["a"]([_["a"]],sa.prototype,"updateContractor",void 0),h["a"]([Object(_["b"])("managerContractor")],sa.prototype,"contractorState",void 0),sa=h["a"]([Object(b["a"])({})],sa);var ca=sa,la=ca,ua=Object(i["a"])(la,oa,ia,!1,null,null,null);ua.options.__file="SingleContractor.vue";var da=ua.exports,pa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"contractorModules",tabindex:"-1",role:"dialog","aria-labelledby":"contractorModulesLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"contractorModulesLabel"}},[a("span",[t._v('Модули контрагента "'+t._s(t.contractorState.contractor.name)+'"')])]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("form",[a("include-list")],1)])])])])},ma=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],ya=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"include-list"},t._l(t.includeListState.list,function(e){return a("div",{class:{checkbox:!0,checked:e.checked},on:{click:function(a){t.toggle(e)}}},[a("div",{staticClass:"checkbox-awesome"}),a("label",[t._v(t._s(e.title))])])}),0)},ga=[],fa=function(t){function e(){return Object(m["a"])(this,e),Object(g["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),Object(y["a"])(e,[{key:"toggle",value:function(t){t.checked=!t.checked,this.toggleIncludeItem({item:t})}}]),e}(b["e"]);h["a"]([Object(_["b"])("includeList")],fa.prototype,"includeListState",void 0),h["a"]([_["a"]],fa.prototype,"toggleIncludeItem",void 0),fa=h["a"]([Object(b["a"])({})],fa);var va=fa,ha=va,ba=Object(i["a"])(ha,ya,ga,!1,null,null,null);ba.options.__file="IncludeList.vue";var _a=ba.exports,Ca=function(t){function e(){return Object(m["a"])(this,e),Object(g["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),Object(y["a"])(e,[{key:"onChangeContractor",value:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.managerGetModules();case 2:this.setIncludeList({list:this.moduleState.modules,key:"contractors",parent:this.contractorState.contractor.id}),this.setIncludeListActions({attach:this.attachContractorToModule,detach:this.detachContractorToModule});case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}]),e}(b["e"]);h["a"]([_["a"]],Ca.prototype,"managerGetModules",void 0),h["a"]([_["a"]],Ca.prototype,"setIncludeList",void 0),h["a"]([_["a"]],Ca.prototype,"setIncludeListActions",void 0),h["a"]([_["a"]],Ca.prototype,"attachContractorToModule",void 0),h["a"]([_["a"]],Ca.prototype,"detachContractorToModule",void 0),h["a"]([Object(_["b"])("managerContractor")],Ca.prototype,"contractorState",void 0),h["a"]([Object(_["b"])("managerModule")],Ca.prototype,"moduleState",void 0),h["a"]([Object(b["f"])("contractorState.contractor.id")],Ca.prototype,"onChangeContractor",null),Ca=h["a"]([Object(b["a"])({components:{IncludeList:_a}})],Ca);var Sa=Ca,ka=Sa,wa=Object(i["a"])(ka,pa,ma,!1,null,null,null);wa.options.__file="ContractorModules.vue";var Oa=wa.exports,ja=function(t){function e(){return Object(m["a"])(this,e),Object(g["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),Object(y["a"])(e,[{key:"created",value:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getContractors();case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"setSureModalContent",value:function(t){var e=this;this.setSureModal({title:"Удалить контрагента?",text:'Вы уверены, что хотите удалить контрагента "'.concat(t.name,'" из системы?'),action:function(){var a=Object(ut["a"])(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return e.setSingleContractor(t),a.next=3,e.deleteContractor();case 3:e.unsetSingleContractor();case 4:case"end":return a.stop()}},a,this)}));function n(){return a.apply(this,arguments)}return n}()})}},{key:"getContractorUsers",value:function(t){this.setSingleContractor(t),this.$router.push("/manager/contractors/users/".concat(t.id))}}]),e}(b["e"]);h["a"]([_["a"]],ja.prototype,"getContractors",void 0),h["a"]([_["a"]],ja.prototype,"setSureModal",void 0),h["a"]([_["a"]],ja.prototype,"deleteContractor",void 0),h["a"]([_["a"]],ja.prototype,"setSingleContractor",void 0),h["a"]([_["a"]],ja.prototype,"unsetSingleContractor",void 0),h["a"]([Object(_["b"])("managerContractor")],ja.prototype,"contractorState",void 0),ja=h["a"]([Object(b["a"])({components:{SingleContractor:da,ContractorModule:Oa,SureModal:Ot}})],ja);var xa=ja,Ea=xa,Ma=Object(i["a"])(Ea,na,ra,!1,null,null,null);Ma.options.__file="Contractors.vue";var Ra=Ma.exports,Ia=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-modules-container content"},[a("h1",[t._v('Пользователи контрагента "'+t._s(t.contractorState.contractor.name)+'"')]),a("button",{staticClass:"btn btn-info",attrs:{"data-toggle":"modal","data-target":"#singleUserModal"},on:{click:function(e){t.createUser()}}},[a("i",{staticClass:"fas fa-plus-circle"}),t._v("\n        Создать нового\n    ")]),a("button",{staticClass:"btn btn-info btn-right",on:{click:function(e){t.$router.go(-1)}}},[a("i",{staticClass:"fas fa-arrow-circle-left"}),t._v("\n        Назад\n    ")]),a("div",{staticClass:"grid-data"},[t._m(0),t._l(t.userState.users,function(e){return a("div",{staticClass:"row row-body"},[a("div",{staticClass:"col-12"},[a("label",{staticClass:"title"},[t._v(t._s(e.email))]),a("div",{staticClass:"actions"},[a("button",{staticClass:"btn-info",attrs:{"data-toggle":"modal","data-target":"#singleUserModal"},on:{click:function(a){t.setSingleUser(e)}}},[t._v("Изменить")]),a("button",{staticClass:"btn-danger",attrs:{"data-toggle":"modal","data-target":"#sureModal"},on:{click:function(a){t.setSureModalContent(e)}}},[t._v("Удалить")])])])])}),t._m(1)],2),a("single-user"),a("sure-modal")],1)},La=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-header"},[a("div",{staticClass:"col-12"},[t._v("Адрес электронной почты (логин)")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-footer"},[a("div",{staticClass:"col-12"},[t._v("Адрес электронной почты (логин)")])])}],$a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"singleUserModal",tabindex:"-1",role:"dialog","aria-labelledby":"singleUserModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"singleUserModalLabel"}},[0===t.userState.user.id?a("span",[t._v("Регистрация пользователя")]):a("span",[t._v('Изменение пользователя "'+t._s(t.userState.user.email)+'"')])]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleUserEmail"}},[t._v("Адрес электронной почты *")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.userState.user.email,expression:"userState.user.email"}],staticClass:"form-control",attrs:{type:"text",id:"singleUserEmail",required:"",placeholder:"user@mail.ru"},domProps:{value:t.userState.user.email},on:{input:function(e){e.target.composing||t.$set(t.userState.user,"email",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleUserPassword"}},[t._v("Пароль *")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.userState.user.password,expression:"userState.user.password"}],staticClass:"form-control",attrs:{type:"password",id:"singleUserPassword",required:""},domProps:{value:t.userState.user.password},on:{input:function(e){e.target.composing||t.$set(t.userState.user,"password",e.target.value)}}})])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.updateUser}},[t._v("\n                    Сохранить\n                ")]),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Закрыть")])])])])])},Pa=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],Ga=function(t){function e(){return Object(m["a"])(this,e),Object(g["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),e}(b["e"]);h["a"]([_["a"]],Ga.prototype,"updateUser",void 0),h["a"]([Object(_["b"])("managerUser")],Ga.prototype,"userState",void 0),Ga=h["a"]([Object(b["a"])({})],Ga);var Ta=Ga,Na=Ta,Fa=Object(i["a"])(Na,$a,Pa,!1,null,null,null);Fa.options.__file="SingleUser.vue";var Ua=Fa.exports,Ba=function(t){function e(){return Object(m["a"])(this,e),Object(g["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),Object(y["a"])(e,[{key:"onContractorIdChange",value:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getUsersByContractor({contractorId:this.$route.params.id});case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"created",value:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.geContractorById({id:this.$route.params.id});case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"createUser",value:function(){this.unsetSingleUser({contractorId:this.$route.params.id})}},{key:"setSureModalContent",value:function(t){var e=this;this.setSureModal({title:"Удалить пользователя?",text:'Вы уверены, что хотите удалить пользователя "'.concat(t.email,'" из системы?'),action:function(){var a=Object(ut["a"])(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return e.setSingleUser(t),a.next=3,e.deleteUser();case 3:e.unsetSingleUser({contractorId:0});case 4:case"end":return a.stop()}},a,this)}));function n(){return a.apply(this,arguments)}return n}()})}}]),e}(b["e"]);h["a"]([_["a"]],Ba.prototype,"getUsersByContractor",void 0),h["a"]([_["a"]],Ba.prototype,"setSureModal",void 0),h["a"]([_["a"]],Ba.prototype,"deleteUser",void 0),h["a"]([_["a"]],Ba.prototype,"setSingleUser",void 0),h["a"]([_["a"]],Ba.prototype,"unsetSingleUser",void 0),h["a"]([_["a"]],Ba.prototype,"geContractorById",void 0),h["a"]([Object(_["b"])("managerContractor")],Ba.prototype,"contractorState",void 0),h["a"]([Object(_["b"])("managerUser")],Ba.prototype,"userState",void 0),h["a"]([Object(b["f"])("this.$route.params.id",{immediate:!0,deep:!0})],Ba.prototype,"onContractorIdChange",null),Ba=h["a"]([Object(b["a"])({components:{SingleUser:Ua,SureModal:Ot}})],Ba);var Aa=Ba,Da=Aa,Ha=Object(i["a"])(Da,Ia,La,!1,null,null,null);Ha.options.__file="Users.vue";var za=Ha.exports,qa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-modules-container content"},[a("h1",[t._v("Справочник модулей")]),a("button",{staticClass:"btn btn-info",attrs:{"data-toggle":"modal","data-target":"#singleModuleModal"},on:{click:t.unsetSingleModule}},[a("i",{staticClass:"fas fa-plus-circle"}),t._v("\n        Создать новый\n    ")]),a("div",{staticClass:"grid-data"},[t._m(0),t._l(t.moduleState.modules,function(e){return a("div",{staticClass:"row row-body"},[a("div",{staticClass:"col-6"},[a("label",{staticClass:"title"},[t._v(t._s(e.title))]),a("label",{staticClass:"description",domProps:{innerHTML:t._s(e.description)}}),a("div",{staticClass:"actions"},[a("button",{staticClass:"btn-info",attrs:{"data-toggle":"modal","data-target":"#singleModuleModal"},on:{click:function(a){t.setSingleModule(e)}}},[t._v("Изменить")]),a("button",{staticClass:"btn-danger",attrs:{"data-toggle":"modal","data-target":"#sureModal"},on:{click:function(a){t.setSureModalContent(e)}}},[t._v("Удалить")])])]),a("div",{staticClass:"col-6"},[t._l(e.layers,function(e,n){return n<=2?a("label",[t._v(t._s(e.title))]):t._e()}),e.layers.length>3?a("label",[t._v("... (всего "+t._s(e.layers.length)+")")]):t._e()],2)])}),t._m(1)],2),a("single-module"),a("sure-modal")],1)},Va=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-header"},[a("div",{staticClass:"col-6"},[t._v("Наименование")]),a("div",{staticClass:"col-6"},[t._v("Слои")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-footer"},[a("div",{staticClass:"col-6"},[t._v("Наименование")]),a("div",{staticClass:"col-6"},[t._v("Слои")])])}],Ja=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"singleModuleModal",tabindex:"-1",role:"dialog","aria-labelledby":"singleModuleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"singleModuleModalLabel"}},[0===t.moduleState.module.id?a("span",[t._v("Создание нового модуля")]):a("span",[t._v('Изменение модуля "'+t._s(t.moduleState.module.title)+'"')])]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleModuleTitle"}},[t._v("Наименование *")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.moduleState.module.title,expression:"moduleState.module.title"}],staticClass:"form-control",attrs:{type:"text",id:"singleModuleTitle",required:"",placeholder:"Наименование модуля"},domProps:{value:t.moduleState.module.title},on:{input:function(e){e.target.composing||t.$set(t.moduleState.module,"title",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleModuleDescription"}},[t._v("Описание")]),a("vue-editor",{ref:"wysiwygContents",attrs:{id:"singleModuleDescription",editorToolbar:t.toolbar},model:{value:t.moduleState.module.description,callback:function(e){t.$set(t.moduleState.module,"description",e)},expression:"moduleState.module.description"}})],1)])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.updateModule}},[t._v("Сохранить")]),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Закрыть")])])])])])},Wa=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],Ya=function(t){function e(){var t;return Object(m["a"])(this,e),t=Object(g["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.toolbar=[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{align:[]}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["clean"]],t}return Object(v["a"])(e,t),e}(b["e"]);h["a"]([_["a"]],Ya.prototype,"updateModule",void 0),h["a"]([Object(_["b"])("managerModule")],Ya.prototype,"moduleState",void 0),h["a"]([Object(b["d"])()],Ya.prototype,"toolbar",void 0),Ya=h["a"]([Object(b["a"])({components:{VueEditor:mt["VueEditor"]}})],Ya);var Za=Ya,Ka=Za,Qa=Object(i["a"])(Ka,Ja,Wa,!1,null,null,null);Qa.options.__file="SingleModule.vue";var Xa=Qa.exports,tn=function(t){function e(){return Object(m["a"])(this,e),Object(g["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),Object(y["a"])(e,[{key:"created",value:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.managerGetModules();case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"setSureModalContent",value:function(t){var e=this;this.setSureModal({title:"Удалить модуль?",text:'Вы уверены, что хотите удалить модуль "'.concat(t.title,'" из системы?'),action:function(){var a=Object(ut["a"])(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return e.setSingleModule(t),a.next=3,e.deleteModule();case 3:e.unsetSingleModule();case 4:case"end":return a.stop()}},a,this)}));function n(){return a.apply(this,arguments)}return n}()})}}]),e}(b["e"]);h["a"]([_["a"]],tn.prototype,"managerGetModules",void 0),h["a"]([_["a"]],tn.prototype,"setSureModal",void 0),h["a"]([_["a"]],tn.prototype,"deleteModule",void 0),h["a"]([_["a"]],tn.prototype,"setSingleModule",void 0),h["a"]([_["a"]],tn.prototype,"unsetSingleModule",void 0),h["a"]([Object(_["b"])("managerModule")],tn.prototype,"moduleState",void 0),tn=h["a"]([Object(b["a"])({components:{SingleModule:Xa,SureModal:Ot}})],tn);var en=tn,an=en,nn=Object(i["a"])(an,qa,Va,!1,null,null,null);nn.options.__file="Modules.vue";var rn=nn.exports,on=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-modules-container content"},[a("h1",[t._v("Справочник картографических слоёв")]),a("button",{staticClass:"btn btn-info",attrs:{"data-toggle":"modal","data-target":"#singleLayerModal"},on:{click:t.unsetSingleLayer}},[a("i",{staticClass:"fas fa-plus-circle"}),t._v("\n        Создать новый\n    ")]),a("div",{staticClass:"grid-data"},[t._m(0),t._l(t.layerState.layers,function(e){return a("div",{staticClass:"row row-body"},[a("div",{staticClass:"col-6"},[a("label",{staticClass:"title"},[t._v(t._s(e.title))]),a("label",{staticClass:"description",domProps:{innerHTML:t._s(e.description)}}),a("div",{staticClass:"actions"},[a("button",{staticClass:"btn-info",attrs:{"data-toggle":"modal","data-target":"#singleLayerModal"},on:{click:function(a){t.setSingleLayer(e)}}},[t._v("Изменить")]),a("button",{staticClass:"btn-info",on:{click:function(a){t.getLayerCompositions(e)}}},[t._v("Состав слоя")]),a("button",{staticClass:"btn-danger",attrs:{"data-toggle":"modal","data-target":"#sureModal"},on:{click:function(a){t.setSureModalContent(e)}}},[t._v("Удалить")])])]),a("div",{staticClass:"col-3"},[e.parent?a("label",{staticClass:"title"},[t._v(t._s(e.parent.title))]):a("label",{staticClass:"title"},[t._v("-")])]),a("div",{staticClass:"col-3"},[a("label",{staticClass:"title"},[t._v(t._s(e.module.title))])])])}),t._m(1)],2),a("single-layer"),a("sure-modal")],1)},sn=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-header"},[a("div",{staticClass:"col-6"},[t._v("Наименование")]),a("div",{staticClass:"col-3"},[t._v("Родительский слой")]),a("div",{staticClass:"col-3"},[t._v("Включен в модуль")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-footer"},[a("div",{staticClass:"col-6"},[t._v("Наименование")]),a("div",{staticClass:"col-3"},[t._v("Родительский слой")]),a("div",{staticClass:"col-3"},[t._v("Включен в модуль")])])}],cn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"singleLayerModal",tabindex:"-1",role:"dialog","aria-labelledby":"singleLayerModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"singleLayerModalLabel"}},[0===t.layerState.layer.id?a("span",[t._v("Создание нового слоя")]):a("span",[t._v('Изменение слоя "'+t._s(t.layerState.layer.title)+'"')])]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleLayerTitle"}},[t._v("Наименование *")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.layerState.layer.title,expression:"layerState.layer.title"}],staticClass:"form-control",attrs:{type:"text",id:"singleLayerTitle",required:"",placeholder:"Наименование слоя"},domProps:{value:t.layerState.layer.title},on:{input:function(e){e.target.composing||t.$set(t.layerState.layer,"title",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleLayerDescription"}},[t._v("Описание")]),a("vue-editor",{ref:"wysiwygContents",attrs:{id:"singleLayerDescription",editorToolbar:t.toolbar},model:{value:t.layerState.layer.description,callback:function(e){t.$set(t.layerState.layer,"description",e)},expression:"layerState.layer.description"}})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleLayerParentId"}},[t._v("Родительский слой")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.layerState.layer.parent_id,expression:"layerState.layer.parent_id"}],staticClass:"form-control",attrs:{id:"singleLayerParentId",disabled:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.layerState.layer,"parent_id",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"0"}}),t._l(t.layerState.layers,function(e){return t.layerState.layer.id!==e.id?a("option",{attrs:{title:e.description},domProps:{value:e.id}},[t._v("\n                                "+t._s(e.title)+"\n                            ")]):t._e()})],2)]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleLayerModuleId"}},[t._v("Включить в модуль *")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.layerState.layer.module_id,expression:"layerState.layer.module_id"}],staticClass:"form-control",attrs:{id:"singleLayerModuleId",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.layerState.layer,"module_id",e.target.multiple?a:a[0])}}},t._l(t.moduleState.modules,function(e){return a("option",{attrs:{title:e.description},domProps:{value:e.id}},[t._v("\n                                "+t._s(e.title)+"\n                            ")])}),0)])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.updateLayer}},[t._v("\n                    Сохранить\n                ")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){t.$router.push("/manager/layer/"+t.layerState.layer.id)}}},[t._v("\n                    Состав слоя\n                ")]),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Закрыть")])])])])])},ln=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],un=function(t){function e(){var t;return Object(m["a"])(this,e),t=Object(g["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.toolbar=[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{align:[]}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["clean"]],t}return Object(v["a"])(e,t),Object(y["a"])(e,[{key:"created",value:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.managerGetModules();case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}]),e}(b["e"]);h["a"]([_["a"]],un.prototype,"managerGetModules",void 0),h["a"]([_["a"]],un.prototype,"updateLayer",void 0),h["a"]([Object(_["b"])("managerModule")],un.prototype,"moduleState",void 0),h["a"]([Object(_["b"])("managerLayer")],un.prototype,"layerState",void 0),h["a"]([Object(b["d"])()],un.prototype,"toolbar",void 0),un=h["a"]([Object(b["a"])({components:{VueEditor:mt["VueEditor"]}})],un);var dn=un,pn=dn,mn=Object(i["a"])(pn,cn,ln,!1,null,null,null);mn.options.__file="SingleLayer.vue";var yn=mn.exports,gn=function(t){function e(){return Object(m["a"])(this,e),Object(g["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),Object(y["a"])(e,[{key:"created",value:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.managerGetLayers();case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"setSureModalContent",value:function(t){var e=this;this.setSureModal({title:"Удалить слой?",text:'Вы уверены, что хотите удалить слой "'.concat(t.title,'" из системы?'),action:function(){var a=Object(ut["a"])(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return e.setSingleLayer(t),a.next=3,e.deleteLayer();case 3:e.unsetSingleLayer();case 4:case"end":return a.stop()}},a,this)}));function n(){return a.apply(this,arguments)}return n}()})}},{key:"getLayerCompositions",value:function(t){this.setSingleLayer(t),this.$router.push("/manager/layer/".concat(t.id))}}]),e}(b["e"]);h["a"]([_["a"]],gn.prototype,"managerGetLayers",void 0),h["a"]([_["a"]],gn.prototype,"setSureModal",void 0),h["a"]([_["a"]],gn.prototype,"deleteLayer",void 0),h["a"]([_["a"]],gn.prototype,"setSingleLayer",void 0),h["a"]([_["a"]],gn.prototype,"unsetSingleLayer",void 0),h["a"]([Object(_["b"])("managerLayer")],gn.prototype,"layerState",void 0),gn=h["a"]([Object(b["a"])({components:{SingleLayer:yn,SureModal:Ot}})],gn);var fn=gn,vn=fn,hn=Object(i["a"])(vn,on,sn,!1,null,null,null);hn.options.__file="Layers.vue";var bn=hn.exports,_n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-modules-container content"},[a("h1",[t._v('Состав слоя "'+t._s(t.layerState.layer.title)+'"')]),a("button",{staticClass:"btn btn-info",attrs:{"data-toggle":"modal","data-target":"#singleLayerCompositionModal"},on:{click:t.createLayerComposition}},[a("i",{staticClass:"fas fa-plus-circle"}),t._v("\n        Создать новый компонент\n    ")]),a("button",{staticClass:"btn btn-info btn-right",on:{click:function(e){t.$router.go(-1)}}},[a("i",{staticClass:"fas fa-arrow-circle-left"}),t._v("\n        Назад\n    ")]),a("div",{staticClass:"grid-data"},[t._m(0),t._l(t.layerCompositionState.compositions,function(e){return a("div",{staticClass:"row row-body"},[a("div",{staticClass:"col-9"},[a("label",{staticClass:"title"},[t._v(t._s(e.title))]),a("label",{staticClass:"description",domProps:{innerHTML:t._s(e.description)}}),a("div",{staticClass:"actions"},[a("button",{staticClass:"btn-info",attrs:{"data-toggle":"modal","data-target":"#singleLayerCompositionModal"},on:{click:function(a){t.editLayerComposition(e)}}},[t._v("\n                        Изменить\n                    ")]),a("button",{staticClass:"btn-danger",attrs:{"data-toggle":"modal","data-target":"#sureModal"},on:{click:function(a){t.setSureModalContent(e)}}},[t._v("\n                        Удалить\n                    ")])])]),a("div",{staticClass:"col-3"},[a("label",{staticClass:"title"},[t._v(t._s(t.getGeometryTypeTitle(e.geometry_type)))])])])}),t._m(1)],2),a("single-layer-composition"),a("sure-modal")],1)},Cn=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-header"},[a("div",{staticClass:"col-9"},[t._v("Наименование")]),a("div",{staticClass:"col-3"},[t._v("Тип геометрии")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-footer"},[a("div",{staticClass:"col-9"},[t._v("Наименование")]),a("div",{staticClass:"col-3"},[t._v("Тип геометрии")])])}],Sn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"singleLayerCompositionModal",tabindex:"-1",role:"dialog","aria-labelledby":"singleLayerCompositionModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"singleLayerCompositionModalLabel"}},[0===t.layerCompositionState.composition.id?a("span",[t._v("Создание нового компонента слоя")]):a("span",[t._v('Изменение компонента слоя "'+t._s(t.layerCompositionState.composition.title)+'"')])]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("b-tabs",[a("b-tab",{attrs:{title:"Свойства",active:""}},[a("form",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleLayerCompositionTitle"}},[t._v("Наименование *")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.layerCompositionState.composition.title,expression:"layerCompositionState.composition.title"}],staticClass:"form-control",attrs:{type:"text",id:"singleLayerCompositionTitle",required:"",placeholder:"Наименование компонента слоя"},domProps:{value:t.layerCompositionState.composition.title},on:{input:function(e){e.target.composing||t.$set(t.layerCompositionState.composition,"title",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleLayerCompositionDescription"}},[t._v("Описание")]),a("vue-editor",{ref:"wysiwygContents",attrs:{id:"singleLayerCompositionDescription",editorToolbar:t.toolbar},model:{value:t.layerCompositionState.composition.description,callback:function(e){t.$set(t.layerCompositionState.composition,"description",e)},expression:"layerCompositionState.composition.description"}})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleLayerCompositionGeometryType"}},[t._v("Тип геометрии *")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.layerCompositionState.composition.geometry_type,expression:"layerCompositionState.composition.geometry_type"}],staticClass:"form-control",attrs:{id:"singleLayerCompositionGeometryType",required:"",disabled:0!==t.layerCompositionState.composition.id},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.layerCompositionState.composition,"geometry_type",e.target.multiple?a:a[0])},t.geometryTypeChanged]}},[a("option",{attrs:{value:"point"}},[t._v("Точечный элемент")]),a("option",{attrs:{value:"linestring"}},[t._v("Линейный элемент")]),a("option",{attrs:{value:"polygon"}},[t._v("Полигональный элемент")])])])])]),a("b-tab",{ref:"style-tab",attrs:{title:"Стиль"},on:{click:t.resizeMap}},[a("layer-style-editor",{attrs:{geometryType:"point"}})],1)],1)],1),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.updateLayerComposition}},[t._v("\n                    Сохранить\n                ")]),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Закрыть")])])])])])},kn=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],wn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"style-editor"},[""!==t.styleEditorState.geometryType?a("div",{staticClass:"style-editor-fields"},[a("vue-scrollbar",{ref:"scrollbar",staticClass:"scrollbar scrollbar-min"},["point"===t.styleEditorState.geometryType?a("point-fields"):t._e(),"linestring"===t.styleEditorState.geometryType?a("linestring-fields"):t._e(),"polygon"===t.styleEditorState.geometryType?a("polygon-fields"):t._e()],1)],1):t._e(),a("div",{staticClass:"style-editor-map clearfix"},[a("ol-map")],1)])},On=[],jn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",[t.styleEditorState.style.pointType?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointType"}},[t._v("Фигура или иконка")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.pointType,expression:"styleEditorState.style.pointType"}],staticClass:"form-control",attrs:{id:"styleEditorPointType"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.styleEditorState.style,"pointType",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"shape"}},[t._v("Фигура")]),a("option",{attrs:{value:"icon"}},[t._v("Иконка")])])]):t._e(),"shape"===t.styleEditorState.style.pointType?a("div",[t.styleEditorState.style.shape?a("div",{staticClass:"form-group"},[a("label",[t._v("Цвет обводки")]),a("color-picker",{on:{change:t.onChangeStrokeColor},model:{value:t.styleEditorState.style.shape.stroke.color,callback:function(e){t.$set(t.styleEditorState.style.shape.stroke,"color",e)},expression:"styleEditorState.style.shape.stroke.color"}})],1):t._e(),t.styleEditorState.style.shape?a("div",{staticClass:"form-group"},[a("label",[t._v("Цвет заливки")]),a("color-picker",{on:{change:t.onChangeFillColor},model:{value:t.styleEditorState.style.shape.fill.color,callback:function(e){t.$set(t.styleEditorState.style.shape.fill,"color",e)},expression:"styleEditorState.style.shape.fill.color"}})],1):t._e(),t.styleEditorState.style.shape?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointStrokeRadius"}},[t._v("Радиус фигуры")]),a("div",{staticClass:"input-group"},[t._m(0),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.shape.radius,expression:"styleEditorState.style.shape.radius"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPointStrokeRadius",step:"1",min:"3",max:"20"},domProps:{value:t.styleEditorState.style.shape.radius},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.shape,"radius",e.target.value)}}})])]):t._e(),t.styleEditorState.style.shape?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointStrokePoints"}},[t._v("Количество вершин фигуры")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.shape.points,expression:"styleEditorState.style.shape.points"}],staticClass:"form-control",attrs:{id:"styleEditorPointStrokePoints"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.styleEditorState.style.shape,"points",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"11"}},[t._v("Окружность")]),a("option",{attrs:{value:"3"}},[t._v("Треугольник")]),a("option",{attrs:{value:"4"}},[t._v("Квадрат")]),a("option",{attrs:{value:"5"}},[t._v("Пятиугольник (пентагон)")]),a("option",{attrs:{value:"6"}},[t._v("Шестиугольник (гексагон)")]),a("option",{attrs:{value:"7"}},[t._v("Семиугольник (гептагон)")]),a("option",{attrs:{value:"8"}},[t._v("Восьмиугольник (октагон)")]),a("option",{attrs:{value:"9"}},[t._v("Девятиугольник (нонагон)")]),a("option",{attrs:{value:"10"}},[t._v("Десятиугольник (декагон)")])])]):t._e(),t.styleEditorState.style.shape?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointStrokeRotation"}},[t._v("Поворот")]),a("div",{staticClass:"input-group"},[t._m(1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.shape.rotation,expression:"styleEditorState.style.shape.rotation"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPointStrokeRotation",step:"5",min:"-180",max:"180"},domProps:{value:t.styleEditorState.style.shape.rotation},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.shape,"rotation",e.target.value)}}})])]):t._e(),t.styleEditorState.style.shape?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointStrokeOpacity"}},[t._v("Прозрачность обводки")]),a("div",{staticClass:"input-group"},[t._m(2),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.shape.stroke.opacity,expression:"styleEditorState.style.shape.stroke.opacity"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPointStrokeOpacity",step:"5",min:"0",max:"100"},domProps:{value:t.styleEditorState.style.shape.stroke.opacity},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.shape.stroke,"opacity",e.target.value)}}})])]):t._e(),t.styleEditorState.style.shape?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointStrokeWidth"}},[t._v("Толщина обводки")]),a("div",{staticClass:"input-group"},[t._m(3),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.shape.stroke.width,expression:"styleEditorState.style.shape.stroke.width"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPointStrokeWidth",step:"1",min:"0",max:"20"},domProps:{value:t.styleEditorState.style.shape.stroke.width},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.shape.stroke,"width",e.target.value)}}})])]):t._e(),t.styleEditorState.style.shape?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointFillOpacity"}},[t._v("Прозрачность заливки")]),a("div",{staticClass:"input-group"},[t._m(4),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.shape.fill.opacity,expression:"styleEditorState.style.shape.fill.opacity"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPointFillOpacity",step:"5",min:"0",max:"100"},domProps:{value:t.styleEditorState.style.shape.fill.opacity},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.shape.fill,"opacity",e.target.value)}}})])]):t._e()]):t._e(),"icon"===t.styleEditorState.style.pointType?a("div",[a("div",{staticClass:"form-group file-upload"},[a("label",{attrs:{for:"styleEditorPointIconSrc"}},[t._v("Изображение")]),a("div",{staticClass:"input-group"},[a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[a("img",{staticClass:"icon",attrs:{src:t.styleEditorState.style.icon.src}})])]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"styleEditorPointIconSrc",readonly:"",value:"Выбрать иконку"},on:{click:function(e){t.$refs.icon.click()}}})]),a("input",{ref:"icon",staticClass:"form-control-file",attrs:{type:"file",accept:"image/jpeg,image/png,image/gif"},on:{change:t.uploadIcon}})]),t.styleEditorState.style.icon?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointIconAnchor0"}},[t._v("Смещение по горизонтали влево")]),a("div",{staticClass:"input-group"},[t._m(5),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.icon.anchor[0],expression:"styleEditorState.style.icon.anchor[0]"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPointIconAnchor0",step:"1",min:"-256",max:"256"},domProps:{value:t.styleEditorState.style.icon.anchor[0]},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.icon.anchor,0,e.target.value)}}})])]):t._e(),t.styleEditorState.style.icon?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointIconAnchor1"}},[t._v("Смещение по вертикали вверх")]),a("div",{staticClass:"input-group"},[t._m(6),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.icon.anchor[1],expression:"styleEditorState.style.icon.anchor[1]"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPointIconAnchor1",step:"1",min:"-256",max:"256"},domProps:{value:t.styleEditorState.style.icon.anchor[1]},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.icon.anchor,1,e.target.value)}}})])]):t._e(),t.styleEditorState.style.icon?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointIconOpacity"}},[t._v("Прозрачность")]),a("div",{staticClass:"input-group"},[t._m(7),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.icon.opacity,expression:"styleEditorState.style.icon.opacity"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPointIconOpacity",step:"5",min:"0",max:"100"},domProps:{value:t.styleEditorState.style.icon.opacity},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.icon,"opacity",e.target.value)}}})])]):t._e(),t.styleEditorState.style.icon?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointIconScale"}},[t._v("Масштаб")]),a("div",{staticClass:"input-group"},[t._m(8),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.icon.scale,expression:"styleEditorState.style.icon.scale"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPointIconScale",step:"0.05",min:"0",max:"5"},domProps:{value:t.styleEditorState.style.icon.scale},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.icon,"scale",e.target.value)}}})])]):t._e(),t.styleEditorState.style.icon?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointIconRotation"}},[t._v("Поворот")]),a("div",{staticClass:"input-group"},[t._m(9),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.icon.rotation,expression:"styleEditorState.style.icon.rotation"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPointIconRotation",step:"5",min:"-180",max:"180"},domProps:{value:t.styleEditorState.style.icon.rotation},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.icon,"rotation",e.target.value)}}})])]):t._e()]):t._e()])},xn=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("px")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("°")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("%")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("px")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("%")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("px")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("px")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("%")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("х")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("°")])])}],En=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.value?a("div",{staticClass:"color-picker"},[a("div",{staticClass:"input-group",on:{click:function(e){t.isShowModal=!t.isShowModal}}},[a("div",{staticClass:"input-group-prepend color-picker-input"},[a("div",{staticClass:"input-group-text",style:"background-color:"+t.color.hex+";"},[a("i",{staticClass:"fas fa-palette"})])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.color.hex,expression:"color.hex"}],staticClass:"form-control color-picker-input",style:"background-color:"+t.color.hex+"30;",attrs:{type:"text",readonly:""},domProps:{value:t.color.hex},on:{input:function(e){e.target.composing||t.$set(t.color,"hex",e.target.value)}}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowModal,expression:"isShowModal"}],staticClass:"color-picker-modal"},[a("div",{staticClass:"color-picker-modal-wrapper",on:{click:function(e){t.isShowModal=!1}}}),a("sketch-picker",{staticClass:"color-picker-sketch-picker",on:{input:t.Change},model:{value:t.color,callback:function(e){t.color=e},expression:"color"}})],1)]):t._e()},Mn=[],Rn=a("c345"),In=function(t){function e(){var t;return Object(m["a"])(this,e),t=Object(g["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.isShowModal=!1,t.color={hex:t.value},t}return Object(v["a"])(e,t),Object(y["a"])(e,[{key:"onChangeValue",value:function(){this.color={hex:this.value}}},{key:"Change",value:function(t){return t.hex}}]),e}(b["e"]);h["a"]([Object(b["c"])()],In.prototype,"value",void 0),h["a"]([Object(b["d"])("Boolean")],In.prototype,"isShowModal",void 0),h["a"]([Object(b["d"])()],In.prototype,"color",void 0),h["a"]([Object(b["f"])("value",{deep:!0})],In.prototype,"onChangeValue",null),h["a"]([Object(b["b"])()],In.prototype,"Change",null),In=h["a"]([Object(b["a"])({components:{"sketch-picker":Rn["Sketch"]}})],In);var Ln=In,$n=Ln,Pn=(a("a3fd"),Object(i["a"])($n,En,Mn,!1,null,null,null));Pn.options.__file="ColorPicker.vue";var Gn=Pn.exports,Tn=function(t){function e(){return Object(m["a"])(this,e),Object(g["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),Object(y["a"])(e,[{key:"onChangeStrokeColor",value:function(t){var e=this.styleEditorState.style;e.shape.stroke.color=t,this.styleEditorState.style=Object.assign({},e)}},{key:"onChangeFillColor",value:function(t){var e=this.styleEditorState.style;e.shape.fill.color=t,this.styleEditorState.style=Object.assign({},e)}},{key:"uploadIcon",value:function(){var t=this.$refs.icon;if(t&&t.files&&0!==t.files.length){var e=t.files[0];this.uploadIconByStyleEditor({file:e})}}}]),e}(b["e"]);h["a"]([Object(_["b"])("styleEditor")],Tn.prototype,"styleEditorState",void 0),h["a"]([Object(_["b"])("geoLayer")],Tn.prototype,"geoLayerState",void 0),h["a"]([_["a"]],Tn.prototype,"setMapStyles",void 0),h["a"]([_["a"]],Tn.prototype,"setMapElements",void 0),h["a"]([_["a"]],Tn.prototype,"setMapCenterDefault",void 0),h["a"]([_["a"]],Tn.prototype,"uploadIconByStyleEditor",void 0),Tn=h["a"]([Object(b["a"])({components:{ColorPicker:Gn}})],Tn);var Nn=Tn,Fn=Nn,Un=Object(i["a"])(Fn,jn,xn,!1,null,null,null);Un.options.__file="PointFields.vue";var Bn=Un.exports,An=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",[t.styleEditorState.style.stroke?a("div",{staticClass:"form-group"},[a("label",[t._v("Цвет линии")]),a("color-picker",{on:{change:t.onChangeStrokeColor},model:{value:t.styleEditorState.style.stroke.color,callback:function(e){t.$set(t.styleEditorState.style.stroke,"color",e)},expression:"styleEditorState.style.stroke.color"}})],1):t._e(),t.styleEditorState.style.stroke?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorLinestringStrokeOpacity"}},[t._v("Прозрачность линии")]),a("div",{staticClass:"input-group"},[t._m(0),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.stroke.opacity,expression:"styleEditorState.style.stroke.opacity"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorLinestringStrokeOpacity",required:"",step:"5",min:"0",max:"100"},domProps:{value:t.styleEditorState.style.stroke.opacity},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.stroke,"opacity",e.target.value)}}})])]):t._e(),t.styleEditorState.style.stroke?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorLinestringStrokeWidth"}},[t._v("Толщина линии")]),a("div",{staticClass:"input-group"},[t._m(1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.stroke.width,expression:"styleEditorState.style.stroke.width"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorLinestringStrokeWidth",required:"",step:"1",min:"1",max:"20"},domProps:{value:t.styleEditorState.style.stroke.width},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.stroke,"width",e.target.value)}}})])]):t._e()])},Dn=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("%")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("px")])])}],Hn=function(t){function e(){return Object(m["a"])(this,e),Object(g["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),Object(y["a"])(e,[{key:"onChangeStrokeColor",value:function(t){var e=this.styleEditorState.style;e.stroke.color=t,this.styleEditorState.style=Object.assign({},e)}}]),e}(b["e"]);h["a"]([Object(_["b"])("styleEditor")],Hn.prototype,"styleEditorState",void 0),h["a"]([_["a"]],Hn.prototype,"setMapStyles",void 0),h["a"]([_["a"]],Hn.prototype,"setMapElements",void 0),h["a"]([_["a"]],Hn.prototype,"setMapCenterDefault",void 0),Hn=h["a"]([Object(b["a"])({components:{ColorPicker:Gn}})],Hn);var zn=Hn,qn=zn,Vn=Object(i["a"])(qn,An,Dn,!1,null,null,null);Vn.options.__file="LinestringFields.vue";var Jn=Vn.exports,Wn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",[t.styleEditorState.style.stroke?a("div",{staticClass:"form-group"},[a("label",[t._v("Цвет обводки")]),a("color-picker",{on:{change:t.onChangeStrokeColor},model:{value:t.styleEditorState.style.stroke.color,callback:function(e){t.$set(t.styleEditorState.style.stroke,"color",e)},expression:"styleEditorState.style.stroke.color"}})],1):t._e(),t.styleEditorState.style.fill?a("div",{staticClass:"form-group"},[a("label",[t._v("Цвет заливки")]),a("color-picker",{on:{change:t.onChangeFillColor},model:{value:t.styleEditorState.style.fill.color,callback:function(e){t.$set(t.styleEditorState.style.fill,"color",e)},expression:"styleEditorState.style.fill.color"}})],1):t._e(),t.styleEditorState.style.stroke?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPolygonStrokeOpacity"}},[t._v("Прозрачность обводки")]),a("div",{staticClass:"input-group"},[t._m(0),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.stroke.opacity,expression:"styleEditorState.style.stroke.opacity"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPolygonStrokeOpacity",required:"",step:"5",min:"0",max:"100"},domProps:{value:t.styleEditorState.style.stroke.opacity},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.stroke,"opacity",e.target.value)}}})])]):t._e(),t.styleEditorState.style.stroke?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPolygonStrokeWidth"}},[t._v("Толщина обводки")]),a("div",{staticClass:"input-group"},[t._m(1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.stroke.width,expression:"styleEditorState.style.stroke.width"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPolygonStrokeWidth",required:"",step:"1",min:"1",max:"20"},domProps:{value:t.styleEditorState.style.stroke.width},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.stroke,"width",e.target.value)}}})])]):t._e(),t.styleEditorState.style.fill?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPolygonFillOpacity"}},[t._v("Прозрачность заливки")]),a("div",{staticClass:"input-group"},[t._m(2),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.fill.opacity,expression:"styleEditorState.style.fill.opacity"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPolygonFillOpacity",required:"",step:"5",min:"0",max:"100"},domProps:{value:t.styleEditorState.style.fill.opacity},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.fill,"opacity",e.target.value)}}})])]):t._e()])},Yn=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("%")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("px")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("%")])])}],Zn=function(t){function e(){return Object(m["a"])(this,e),Object(g["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),Object(y["a"])(e,[{key:"onChangeStrokeColor",value:function(t){var e=this.styleEditorState.style;e.stroke.color=t,this.styleEditorState.style=Object.assign({},e)}},{key:"onChangeFillColor",value:function(t){var e=this.styleEditorState.style;e.fill.color=t,this.styleEditorState.style=Object.assign({},e)}}]),e}(b["e"]);h["a"]([Object(_["b"])("styleEditor")],Zn.prototype,"styleEditorState",void 0),h["a"]([_["a"]],Zn.prototype,"setMapStyles",void 0),h["a"]([_["a"]],Zn.prototype,"setMapElements",void 0),h["a"]([_["a"]],Zn.prototype,"setMapCenterDefault",void 0),Zn=h["a"]([Object(b["a"])({components:{ColorPicker:Gn}})],Zn);var Kn=Zn,Qn=Kn,Xn=Object(i["a"])(Qn,Wn,Yn,!1,null,null,null);Xn.options.__file="PolygonFields.vue";var tr=Xn.exports,er=function(t){function e(){return Object(m["a"])(this,e),Object(g["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),Object(y["a"])(e,[{key:"onChangeStyle",value:function(){this.jsonStyleUpdate(),this.setMapStyles({styles:[Object.assign({},{id:1},this.styleEditorState.style)]})}},{key:"onChangeGeometryType",value:function(t){this.removeFeatureFromMap({id:"style-editor"}),"point"===t?this.addFeatureToMap({id:"style-editor",layer_composition_id:1,geom:"POINT(48.0355525016785 46.3538888154049)",property:{title:"Точечный геоэлемент",layer_composition_id:1}}):"linestring"===t?this.addFeatureToMap({id:"style-editor",layer_composition_id:1,geom:"LINESTRING(48.0336213111877 46.3516524398736,\n                    48.0339002609253 46.3519338431522,\n                    48.0376124382019 46.3529113380201,\n                    48.0377840995789 46.3535778017697,\n                    48.0348873138428 46.3541109669178,\n                    48.0343723297119 46.3535926119829,\n                    48.0333423614502 46.3540665366874,\n                    48.0337715148926 46.3544960274008,\n                    48.0353379249573 46.3547033665372)",property:{title:"Линейный геоэлемент",layer_composition_id:1}}):this.addFeatureToMap({id:"style-editor",layer_composition_id:1,geom:"POLYGON((48.0351877212524 46.3537110935444,\n                    48.0341362953186 46.3548810851708,\n                    48.0366039276123 46.3545256473257,\n                    48.0377197265625 46.3535629915525,\n                    48.0375909805298 46.3528817172203,\n                    48.0363893508911 46.3531631141696,\n                    48.0342864990234 46.3515043323028,\n                    48.0351877212524 46.3537110935444))",property:{title:"Полигональный геоэлемент",layer_composition_id:1}}),this.setMapStyles({styles:[Object.assign({},{id:1},this.styleEditorState.style)]}),this.setMapCenterDefault()}}]),e}(b["e"]);h["a"]([Object(_["b"])("styleEditor")],er.prototype,"styleEditorState",void 0),h["a"]([_["a"]],er.prototype,"jsonStyleUpdate",void 0),h["a"]([_["a"]],er.prototype,"setMapStyles",void 0),h["a"]([_["a"]],er.prototype,"removeFeatureFromMap",void 0),h["a"]([_["a"]],er.prototype,"addFeatureToMap",void 0),h["a"]([_["a"]],er.prototype,"setMapCenterDefault",void 0),h["a"]([Object(b["f"])("styleEditorState.style",{deep:!0})],er.prototype,"onChangeStyle",null),h["a"]([Object(b["f"])("styleEditorState.geometryType")],er.prototype,"onChangeGeometryType",null),er=h["a"]([Object(b["a"])({components:{LinestringFields:Jn,PointFields:Bn,PolygonFields:tr,OlMap:Ne}})],er);var ar=er,nr=ar,rr=Object(i["a"])(nr,wn,On,!1,null,null,null);rr.options.__file="LayerStyleEditor.vue";var or=rr.exports,ir=function(t){function e(){var t;return Object(m["a"])(this,e),t=Object(g["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.toolbar=[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{align:[]}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["clean"]],t}return Object(v["a"])(e,t),Object(y["a"])(e,[{key:"onChangeJsonStyle",value:function(){this.layerCompositionState.composition.style=this.styleEditorState.jsonStyle}},{key:"geometryTypeChanged",value:function(){this.setGeometryTypeByStyleEditor({geometryType:this.layerCompositionState.composition.geometry_type}),this.setDefaultStyleByStyleEditor()}},{key:"resizeMap",value:function(){this.mapUpdateSize()}}]),e}(b["e"]);h["a"]([Object(b["d"])("any")],ir.prototype,"toolbar",void 0),h["a"]([_["a"]],ir.prototype,"updateLayerComposition",void 0),h["a"]([_["a"]],ir.prototype,"mapUpdateSize",void 0),h["a"]([_["a"]],ir.prototype,"setGeometryTypeByStyleEditor",void 0),h["a"]([_["a"]],ir.prototype,"setDefaultStyleByStyleEditor",void 0),h["a"]([Object(_["b"])("managerLayerComposition")],ir.prototype,"layerCompositionState",void 0),h["a"]([Object(_["b"])("styleEditor")],ir.prototype,"styleEditorState",void 0),h["a"]([Object(b["f"])("styleEditorState.jsonStyle")],ir.prototype,"onChangeJsonStyle",null),ir=h["a"]([Object(b["a"])({components:{LayerStyleEditor:or,VueEditor:mt["VueEditor"]}})],ir);var sr=ir,cr=sr,lr=Object(i["a"])(cr,Sn,kn,!1,null,null,null);lr.options.__file="SingleLayerComposition.vue";var ur=lr.exports,dr=function(t){function e(){return Object(m["a"])(this,e),Object(g["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),Object(y["a"])(e,[{key:"onLayerIdChange",value:function(){this.getLayerCompositions({layerId:this.$route.params.id})}},{key:"created",value:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getLayerById({id:this.$route.params.id});case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"setSureModalContent",value:function(t){var e=this;this.setSureModal({title:"Удалить компонент слоя?",text:'Вы уверены, что хотите удалить компонент слоя "'.concat(t.title,'" из системы?'),action:function(){var a=Object(ut["a"])(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return e.setSingleLayerComposition(t),a.next=3,e.deleteLayerComposition();case 3:e.unsetSingleLayerComposition({layerId:e.$route.params.id});case 4:case"end":return a.stop()}},a,this)}));function n(){return a.apply(this,arguments)}return n}()})}},{key:"createLayerComposition",value:function(){this.unsetSingleLayerComposition({layerId:this.$route.params.id}),this.setGeometryTypeByStyleEditor({geometryType:this.layerCompositionState.composition.geometry_type}),this.setDefaultStyleByStyleEditor(),this.setMapCenterDefault()}},{key:"editLayerComposition",value:function(t){this.setSingleLayerComposition(t),this.setGeometryTypeByStyleEditor({geometryType:this.layerCompositionState.composition.geometry_type}),this.setStyleByStyleEditor({style:this.layerCompositionState.composition.style}),this.setMapCenterDefault()}},{key:"getGeometryTypeTitle",value:function(t){switch(t){case"point":return"Точечный элемент";case"linestring":return"Линейный элемент";case"polygon":return"Полигональный элемент"}}}]),e}(b["e"]);h["a"]([_["a"]],dr.prototype,"getLayerCompositions",void 0),h["a"]([_["a"]],dr.prototype,"setSureModal",void 0),h["a"]([_["a"]],dr.prototype,"deleteLayerComposition",void 0),h["a"]([_["a"]],dr.prototype,"setSingleLayerComposition",void 0),h["a"]([_["a"]],dr.prototype,"unsetSingleLayerComposition",void 0),h["a"]([_["a"]],dr.prototype,"getLayerById",void 0),h["a"]([_["a"]],dr.prototype,"setGeometryTypeByStyleEditor",void 0),h["a"]([_["a"]],dr.prototype,"setStyleByStyleEditor",void 0),h["a"]([_["a"]],dr.prototype,"setMapCenterDefault",void 0),h["a"]([_["a"]],dr.prototype,"setDefaultStyleByStyleEditor",void 0),h["a"]([Object(_["b"])("managerLayer")],dr.prototype,"layerState",void 0),h["a"]([Object(_["b"])("managerLayerComposition")],dr.prototype,"layerCompositionState",void 0),h["a"]([Object(b["f"])("this.$route.params.id",{immediate:!0,deep:!0})],dr.prototype,"onLayerIdChange",null),dr=h["a"]([Object(b["a"])({components:{SingleLayerComposition:ur,SureModal:Ot}})],dr);var pr=dr,mr=pr,yr=Object(i["a"])(mr,_n,Cn,!1,null,null,null);yr.options.__file="LayerCompositions.vue";var gr=yr.exports;n["default"].use(u["a"]);var fr=new u["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:$},{path:"/login",name:"login",component:B},{path:"/manager",name:"manager",component:tt,children:[{path:"/manager/contractors/modules",name:"manager-contractors-modules",component:st},{path:"/manager/information/:id",name:"manager-data",component:Rt},{path:"/manager/element/:id",name:"manager-element",component:zt},{path:"/manager/contractors",name:"manager-contractors",component:Ra},{path:"/manager/contractors/users/:id",name:"manager-users",component:za},{path:"/manager/gis",name:"manager-gis",component:aa},{path:"/manager/modules",name:"manager-modules",component:rn},{path:"/manager/layers",name:"manager-layers",component:bn},{path:"/manager/layer/:id",name:"manager-layer-compositions",component:gr}]}]}),vr=a("2f62"),hr={infomodule:{id:0,title:"",description:"",layers:[]},infomodules:[],contractorModules:[]},br={getModules:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.get("".concat(k,"modules"));case 3:e=t.sent,hr.infomodules=e.data,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),E.notify();case 10:case"end":return t.stop()}},t,this,[[0,7]])}));function e(){return t.apply(this,arguments)}return e}(),getAllModules:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.get("".concat(k,"all_modules"));case 3:e=t.sent,hr.infomodules=e.data,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),E.notify();case 10:case"end":return t.stop()}},t,this,[[0,7]])}));function e(){return t.apply(this,arguments)}return e}()},_r={state:hr,actions:br},Cr=a("8468"),Sr={compositions:[]},kr={editElement:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return Object(Cr["a"])(e),n="".concat(k,"info/elements"),t.prev=2,t.next=5,S.a.put(n,a.element);case 5:t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](2),E.notify();case 11:case"end":return t.stop()}},t,this,[[2,8]])}));function e(e,a){return t.apply(this,arguments)}return e}(),saveElement:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return Object(Cr["a"])(e),n="".concat(k,"info/elements"),t.prev=2,t.next=5,S.a.post(n,a.element);case 5:return r=t.sent,t.abrupt("return",r.data);case 9:t.prev=9,t.t0=t["catch"](2),E.notify();case 12:case"end":return t.stop()}},t,this,[[2,9]])}));function e(e,a){return t.apply(this,arguments)}return e}(),deleteElementInfo:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return Object(Cr["a"])(e),n="".concat(k,"info/elements/").concat(a.id),t.prev=2,t.next=5,S.a.delete(n);case 5:t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](2),E.notify();case 11:case"end":return t.stop()}},t,this,[[2,8]])}));function e(e,a){return t.apply(this,arguments)}return e}(),getCompositions:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return Object(Cr["a"])(e),n="".concat(k,"info/composition/").concat(a.layer_id),t.prev=2,t.next=5,S.a.get(n);case 5:r=t.sent,Sr.compositions=r.data,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),E.notify();case 12:case"end":return t.stop()}},t,this,[[2,9]])}));function e(e,a){return t.apply(this,arguments)}return e}(),saveGeometryGeo:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return Object(Cr["a"])(e),n="".concat(k,"geo/geometry"),t.prev=2,t.next=5,S.a.post(n,a.geometry);case 5:return r=t.sent,t.abrupt("return",r.data);case 9:t.prev=9,t.t0=t["catch"](2),E.notify();case 12:case"end":return t.stop()}},t,this,[[2,9]])}));function e(e,a){return t.apply(this,arguments)}return e}(),editGeometryGeo:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return Object(Cr["a"])(e),n="".concat(k,"geo/geometry/").concat(a.geometry.id),t.prev=2,t.next=5,S.a.put(n,a.geometry);case 5:t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](2),E.notify();case 11:case"end":return t.stop()}},t,this,[[2,8]])}));function e(e,a){return t.apply(this,arguments)}return e}()},wr={state:Sr,actions:kr},Or={user:{id:0,email:"",password:""},users:[],token:"",role:""},jr={getUser:function(t,e){t.user=e,"superadmin"===t.role?fr.push({name:"manager-contractors"}):fr.push({name:"manager-contractors-modules"})}},xr={getUser:function(t){var e=t.commit;t.state,t.dispatch;S.a.get(k+"user").then(function(t){var a=t.data;e("getUser",a)},function(){E.notify()})},getNewToken:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return Object(Cr["a"])(e),t.prev=1,n="".concat(k,"refresh"),t.next=5,S.a.post(n,Or.user);case 5:r=t.sent,Or.token="Bearer "+r.data.token,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),E.notify();case 12:case"end":return t.stop()}},t,this,[[1,9]])}));function e(e,a){return t.apply(this,arguments)}return e}()},Er={state:Or,mutations:jr,actions:xr},Mr=a("0e44"),Rr=function(t,e){var a=!0,n=!1,r=void 0;try{for(var o,i=t[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var s=o.value;e.push({id:s.id,geotype:"point",title:s.title,description:s.description,address:s.address,edited:!1,add:!1,layer_composition_id:s.layer_composition_id})}}catch(c){n=!0,r=c}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}return e},Ir=function(t,e){var a=!0,n=!1,r=void 0;try{for(var o,i=t[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var s=o.value;e.push({id:s.id,geotype:"linestring",title:s.title,description:s.description,address:s.address,edited:!1,add:!1})}}catch(c){n=!0,r=c}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}return e},Lr=function(t,e){var a=!0,n=!1,r=void 0;try{for(var o,i=t[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var s=o.value;e.push({id:s.id,geotype:"polygon",title:s.title,description:s.description,address:s.address,edited:!1,add:!1})}}catch(c){n=!0,r=c}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}return e},$r=function(t){var e=[],a=!0,n=!1,r=void 0;try{for(var o,i=t[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var s=o.value;s.points&&(e=Rr(s.points,e)),s.linestrings&&(e=Ir(s.linestrings,e)),s.polygons&&(e=Lr(s.polygons,e))}}catch(c){n=!0,r=c}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}return e},Pr=(a("8615"),function(t){for(var e=[],a=Object.values(t),n=0;n<a.length;n++){var r=a[n];e.push({id:r.id,title:r.title,description:r.description,points:Gr(r.points),visiblePoints:!1,layer_id:r.layer_id,edited:!1})}return e}),Gr=function(t){var e=[],a=!0,n=!1,r=void 0;try{for(var o,i=t[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var s=o.value;e.push({id:s.id,geotype:"point",title:s.title,description:s.description,address:s.address,edited:!1,add:!1})}}catch(c){n=!0,r=c}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}return e},Tr=function(t){return{id:t.id,geotype:"point",title:t.title,description:t.description,address:t.address,edited:!1,add:!1}},Nr=function(t){for(var e=[],a=Object.values(t),n=0;n<a.length;n++){var r=a[n];e.push({id:r.id,title:r.title,description:r.description,geometries:Fr(r),visiblePoints:!1,layer_id:r.layer_id,edited:!1})}return e},Fr=function(t){for(var e=[],a=[{type:"point",name:"points"},{type:"linestring",name:"linestrings"},{type:"polygon",name:"polygons"}],n=0;n<a.length;n++){var r=a[n],o=!0,i=!1,s=void 0;try{for(var c,l=t[r.name][Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var u=c.value;e.push({id:u.id,geotype:r.type,title:u.title,description:u.description,address:u.address,edited:!1,add:!1})}}catch(d){i=!0,s=d}finally{try{o||null==l.return||l.return()}finally{if(i)throw s}}}return e},Ur={infoItems:[],infoItemsLists:[]},Br={getInfoElements:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return Object(Cr["a"])(e),t.prev=1,t.next=4,S.a.get("".concat(k,"info/elements/").concat(a.layer_id));case 4:n=t.sent,"infoLists"===a.type_layer?Ur.infoItemsLists=Pr(n.data):"territories"===a.type_layer?Ur.infoItemsLists=Nr(n.data):Ur.infoItems=$r(n.data),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),E.notify();case 11:case"end":return t.stop()}},t,this,[[1,8]])}));function e(e,a){return t.apply(this,arguments)}return e}(),editInfoElement:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return Object(Cr["a"])(e),n="".concat(k,"info/").concat(a.infoItem.geotype),t.prev=2,t.next=5,S.a.put(n,a.infoItem);case 5:t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](2),E.notify();case 11:case"end":return t.stop()}},t,this,[[2,8]])}));function e(e,a){return t.apply(this,arguments)}return e}(),createInfoElement:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return Object(Cr["a"])(e),n="".concat(k,"info/").concat(a.infoItem.geotype,"/").concat(a.layer_id),t.prev=2,t.next=5,S.a.post(n,a.infoItem);case 5:r=t.sent,Ur.infoItems.push(Tr(r.data)),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),E.notify();case 12:case"end":return t.stop()}},t,this,[[2,9]])}));function e(e,a){return t.apply(this,arguments)}return e}(),deleteInfoElement:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return Object(Cr["a"])(e),n="".concat(k,"info/").concat(a.infoItem.geotype,"/").concat(a.id),t.prev=2,t.next=5,S.a.delete(n);case 5:t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](2),E.notify();case 11:case"end":return t.stop()}},t,this,[[2,8]])}));function e(e,a){return t.apply(this,arguments)}return e}(),createInfoElementSingle:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return Object(Cr["a"])(e),n="".concat(k,"info/").concat(a.infoItem.geotype,"/create/singleCreate"),t.prev=2,t.next=5,S.a.post(n,a.infoItem);case 5:r=t.sent,Ur.infoItems.push(Tr(r.data)),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),E.notify();case 12:case"end":return t.stop()}},t,this,[[2,9]])}));function e(e,a){return t.apply(this,arguments)}return e}()},Ar={state:Ur,actions:Br},Dr=(a("456d"),{layer:{id:0,module_id:0,title:"",description:"",parent_id:0,elements:[],style:{}},layers:{},compositions:{}}),Hr={getLayers:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.get("".concat(k,"geo/layers"));case 3:e=t.sent,a=Object.assign({},e.data),Object.keys(a).forEach(function(t){a[t].checked=!1,Object.keys(a[t].elements).forEach(function(e){a[t].elements[e].checked=!1})}),Dr.layers=Object.assign({},a),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),E.notify();case 12:case"end":return t.stop()}},t,this,[[0,9]])}));function e(){return t.apply(this,arguments)}return e}(),getManagerLayers:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.get("".concat(k,"geo/layers/manager"));case 3:e=t.sent,a=Object.assign({},e.data),Object.keys(a).forEach(function(t){a[t].checked=!1,Object.keys(a[t].elements).forEach(function(e){a[t].elements[e].checked=!1})}),Dr.layers=Object.assign({},a),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),E.notify();case 12:case"end":return t.stop()}},t,this,[[0,9]])}));function e(){return t.apply(this,arguments)}return e}(),getLayersElement:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.rootState,e.dispatch,t.prev=1,t.next=4,S.a.get("".concat(k,"geo/element/").concat(a.elementId));case 4:n=t.sent,Dr.layers[n.data.layer_id].elements[n.data.id]=Object.assign({},n.data),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),E.notify();case 11:case"end":return t.stop()}},t,this,[[1,8]])}));function e(e,a){return t.apply(this,arguments)}return e}(),getGeometriesByLayer:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.rootState,e.dispatch,t.prev=1,t.next=4,S.a.get("".concat(k,"geo/elements/").concat(a.layerId));case 4:n=t.sent,Dr.layers[a.layerId].elements=Object.assign({},n.data),Dr.layers[a.layerId].checked=!0,Object.keys(Dr.layers[a.layerId].elements).forEach(function(t){Dr.layers[a.layerId].elements[t].checked=!0}),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),E.notify();case 13:case"end":return t.stop()}},t,this,[[1,10]])}));function e(e,a){return t.apply(this,arguments)}return e}(),getGeometriesByElement:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){var n,r,o,i,s,c,l;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.rootState,e.dispatch,t.prev=1,t.next=4,S.a.get("".concat(k,"geo/element/").concat(a.elementId));case 4:r=t.sent,o=Dr.layers[a.layerId],o.elements=Object.assign({},Dr.layers[a.layerId].elements),o.elements[a.elementId]=r.data,o.elements[a.elementId].checked=!0,o.checked=!0,t.t0=regeneratorRuntime.keys(o.elements);case 11:if((t.t1=t.t0()).done){t.next=18;break}if(i=t.t1.value,!1!==o.elements[i].checked){t.next=16;break}return o.checked=!1,t.abrupt("break",18);case 16:t.next=11;break;case 18:Dr.layers[a.layerId]=Object.assign({},o),n.geoElement.selectedElement=r.data,0!==r.data.points_count?(s=Object.keys(r.data.geometries.points)[0],n.geoGeometry.selectedGeometry=Object.assign({},r.data.geometries.points[s])):0!==r.data.linestrings_count?(c=Object.keys(r.data.geometries.linestrings)[0],n.geoGeometry.selectedGeometry=Object.assign({},r.data.geometries.linestrings[c])):0!==r.data.polygons_count&&(l=Object.keys(r.data.geometries.polygons)[0],n.geoGeometry.selectedGeometry=Object.assign({},r.data.geometries.polygons[l])),t.next=26;break;case 23:t.prev=23,t.t2=t["catch"](1),E.notify();case 26:case"end":return t.stop()}},t,this,[[1,23]])}));function e(e,a){return t.apply(this,arguments)}return e}(),uncheckedLayer:function(t,e){t.rootState,t.dispatch;var a=Dr.layers[e.layerId];a.checked=!1,Object.keys(a.elements).forEach(function(t){a.elements[t].checked=!1}),Dr.layers[e.layerId]=Object.assign({},a)},uncheckedElement:function(t,e){t.rootState,t.dispatch;var a=Dr.layers[e.layerId];a.checked=!1,a.elements[e.elementId].checked=!1,Dr.layers[e.layerId]=Object.assign({},a)},uncheckAllElements:function(){Object.keys(Dr.layers).forEach(function(t){var e=Dr.layers[t];e.checked=!1,Object.keys(e.elements).forEach(function(t){e.elements[t].checked=!1}),Dr.layers[t]=Object.assign({},e)})},getAllLayerComposition:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.get("".concat(k,"geo/composition"));case 3:e=t.sent,Dr.compositions=Object.assign({},e.data),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),E.notify();case 10:case"end":return t.stop()}},t,this,[[0,7]])}));function e(){return t.apply(this,arguments)}return e}()},zr={state:Dr,actions:Hr},qr=function(){function t(){Object(m["a"])(this,t)}return Object(y["a"])(t,null,[{key:"notify",value:function(t,e){n["default"].prototype.$notify({title:t,text:e})}}]),t}(),Vr=qr,Jr={element:{id:0,title:"",description:"",layer_id:0,geometries:{points:[],linestrings:[],polygons:[]},points_count:0,linestrings_count:0,polygons_count:0,geometries_count:0},elements:{},selectedElement:{id:0,title:"",description:"",layer_id:0,geometries:{points:[],linestrings:[],polygons:[]},points_count:0,linestrings_count:0,polygons_count:0,geometries_count:0}},Wr={getElementById:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.rootState,e.dispatch,t.prev=1,t.next=4,S.a.get("".concat(k,"geo/element/").concat(a.elementId));case 4:n=t.sent,Jr.element=n.data,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),E.notify();case 11:case"end":return t.stop()}},t,this,[[1,8]])}));function e(e,a){return t.apply(this,arguments)}return e}(),getElementByLayer:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.rootState,e.dispatch,t.prev=1,t.next=4,S.a.get("".concat(k,"geo/elements/").concat(a.layerId));case 4:n=t.sent,Jr.elements=Object.assign({},n.data),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),E.notify();case 11:case"end":return t.stop()}},t,this,[[1,8]])}));function e(e,a){return t.apply(this,arguments)}return e}(),setElementById:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.rootState,e.dispatch,t.prev=1,t.next=4,S.a.put("".concat(k,"geo/element/").concat(a.elementId),{title:Jr.element.title,description:Jr.element.description});case 4:t.sent,Jr.element={id:0,title:"",description:"",layer_id:0,geometries:{points:[],linestrings:[],polygons:[]},points_count:0,linestrings_count:0,polygons_count:0,geometries_count:0},Vr.notify("Географический редактор","Элемент сохранен"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),E.notify();case 12:case"end":return t.stop()}},t,this,[[1,9]])}));function e(e,a){return t.apply(this,arguments)}return e}(),cleanElement:function(){Jr.element={id:0,title:"",description:"",layer_id:0,geometries:{points:[],linestrings:[],polygons:[]},points_count:0,linestrings_count:0,polygons_count:0,geometries_count:0}},createElement:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.rootState,e.dispatch,t.prev=1,t.next=4,S.a.post("".concat(k,"geo/element"),{title:"Новый элемент",description:"",layer_id:a.layerId});case 4:n=t.sent,Jr.element={id:0,title:"",description:"",layer_id:0,geometries:{points:[],linestrings:[],polygons:[]},points_count:0,linestrings_count:0,polygons_count:0,geometries_count:0,checked:!0},Jr.element=Object.assign({},Jr.element,n.data),Vr.notify("Географический редактор","Новый элемент создан"),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),E.notify();case 13:case"end":return t.stop()}},t,this,[[1,10]])}));function e(e,a){return t.apply(this,arguments)}return e}(),searchElementsByTitle:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){var n,r,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.rootState,t.prev=1,t.next=4,S.a.post("".concat(k,"geo/elements/search_by_title"),{title:a.title});case 4:r=t.sent,o=r.data,Object.keys(o).forEach(function(t){var e=o[t],a=n.geoLayer.layers[e.layer_id];a.elements=Object.assign({},n.geoLayer.layers[e.layer_id].elements,r.data),a.elements[e.id].checked=!0,a.checked=!0,Object.keys(a.elements).forEach(function(t){!1===a.elements[t].checked&&(a.checked=!1)}),n.geoLayer.layers[e.layer_id]=Object.assign({},a)}),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),E.notify();case 12:case"end":return t.stop()}},t,this,[[1,9]])}));function e(e,a){return t.apply(this,arguments)}return e}(),searchElementsByAddress:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){var n,r,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.rootState,t.prev=1,t.next=4,S.a.post("".concat(k,"geo/elements/search_by_address"),{address:a.address});case 4:r=t.sent,o=r.data,Object.keys(o).forEach(function(t){var e=o[t],a=n.geoLayer.layers[e.layer_id];a.elements=Object.assign({},n.geoLayer.layers[e.layer_id].elements,r.data),a.elements[e.id].checked=!0,a.checked=!0,Object.keys(a.elements).forEach(function(t){!1===a.elements[t].checked&&(a.checked=!1)}),n.geoLayer.layers[e.layer_id]=Object.assign({},a)}),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),E.notify();case 12:case"end":return t.stop()}},t,this,[[1,9]])}));function e(e,a){return t.apply(this,arguments)}return e}(),deleteGeoElement:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.rootState,t.prev=1,t.next=4,S.a.delete("".concat(k,"geo/element/").concat(a.elementId));case 4:t.sent,Vr.notify("Географический редактор","Элемент удален"),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),E.notify();case 11:case"end":return t.stop()}},t,this,[[1,8]])}));function e(e,a){return t.apply(this,arguments)}return e}()},Yr={state:Jr,actions:Wr},Zr={geometry:{id:0,geom:"",title:"",description:"",element_id:0,layer_composition_id:0,data:{}},selectedGeometry:{id:0,geom:"",title:"",description:"",element_id:0,layer_composition_id:0,data:{}}},Kr={setGeometry:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.rootState,e.dispatch,t.prev=1,t.next=4,S.a.put("".concat(k,"geo/geometry/").concat(a.id),{geom:a.geom,type:a.type});case 4:t.sent,Vr.notify("Географический редактор","Геометрия обновлена"),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),E.notify();case 11:case"end":return t.stop()}},t,this,[[1,8]])}));function e(e,a){return t.apply(this,arguments)}return e}(),setGeometryProperties:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.rootState,e.dispatch,t.prev=1,t.next=4,S.a.put("".concat(k,"geo/geometry/").concat(a.id),{title:a.title,description:a.description,type:a.type});case 4:t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),E.notify();case 10:case"end":return t.stop()}},t,this,[[1,7]])}));function e(e,a){return t.apply(this,arguments)}return e}(),initGeometry:function(t,e){t.rootState,t.dispatch;Zr.geometry={id:0,geom:"",title:"point"===e.type?"Новая точка":"linestring"===e.type?"Новая линия":"Новый полигон",description:"",element_id:e.elementId,layer_composition_id:e.compositionId,type:e.type,data:{}}},createGeometry:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.rootState,e.dispatch,t.prev=1,t.next=4,S.a.post("".concat(k,"geo/geometry"),{title:Zr.geometry.title,description:Zr.geometry.description,geom:a.geom,element_id:Zr.geometry.element_id,layer_composition_id:Zr.geometry.layer_composition_id,type:Zr.geometry.type});case 4:n=t.sent,Zr.geometry.id=n.data.id,Vr.notify("Географический редактор","".concat(n.data.title," создана")),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),E.notify();case 12:case"end":return t.stop()}},t,this,[[1,9]])}));function e(e,a){return t.apply(this,arguments)}return e}()},Qr={state:Zr,actions:Kr},Xr={contractor:{id:0,name:"",full_name:"",inn:"",kpp:"",address:{id:0,build:"",city:"",region:"",street:""}},contractors:[]},to={getContractors:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.get("".concat(k,"manager/contractor"));case 3:e=t.sent,Xr.contractors=e.data,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),E.notify();case 10:case"end":return t.stop()}},t,this,[[0,7]])}));function e(){return t.apply(this,arguments)}return e}(),geContractorById:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return Object(Cr["a"])(e),t.prev=1,t.next=4,S.a.get("".concat(k,"manager/contractor/").concat(a.id));case 4:n=t.sent,Xr.contractor=Object.assign({},n.data),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),E.notify();case 11:case"end":return t.stop()}},t,this,[[1,8]])}));function e(e,a){return t.apply(this,arguments)}return e}(),updateContractor:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===Xr.contractor.id){t.next=9;break}return t.next=4,S.a.put("".concat(k,"manager/contractor/").concat(Xr.contractor.id),Xr.contractor);case 4:e=t.sent,Vr.notify("Данные сохранены",'Контрагент "'.concat(Xr.contractor.name,'" изменен')),Xr.contractors=qe(Xr.contractors,e.data),t.next=14;break;case 9:return t.next=11,S.a.post("".concat(k,"manager/contractor"),Xr.contractor);case 11:a=t.sent,Vr.notify("Данные сохранены",'Контрагент "'.concat(Xr.contractor.name,'" создан')),Xr.contractors.push(a.data);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),E.notify();case 19:case"end":return t.stop()}},t,this,[[0,16]])}));function e(){return t.apply(this,arguments)}return e}(),deleteContractor:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===Xr.contractor.id){t.next=7;break}return t.next=4,S.a.delete("".concat(k,"manager/contractor/").concat(Xr.contractor.id));case 4:t.sent,Vr.notify("Данные удалены",'Контрагент "'.concat(Xr.contractor.name,'" удален')),Xr.contractors=Ve(Xr.contractors,Xr.contractor);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),E.notify();case 12:case"end":return t.stop()}},t,this,[[0,9]])}));function e(){return t.apply(this,arguments)}return e}(),setSingleContractor:function(t,e){Object(Cr["a"])(t),Xr.contractor=Object.assign({},Xr.contractor,e)},unsetSingleContractor:function(){Xr.contractor={id:0,name:"",full_name:"",inn:"",kpp:"",address:{id:0,build:"",city:"",region:"",street:""}}},attachContractorToModule:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.get("".concat(k,"manager/contractor/").concat(a.parent,"/attach/module/").concat(a.item));case 3:t.sent,Vr.notify("","Модуль подключен к контрагенту"),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),E.notify();case 10:case"end":return t.stop()}},t,this,[[0,7]])}));function e(e,a){return t.apply(this,arguments)}return e}(),detachContractorToModule:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.get("".concat(k,"manager/contractor/").concat(a.parent,"/detach/module/").concat(a.item));case 3:t.sent,Vr.notify("","Модуль отключен от контрагента"),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),E.notify();case 10:case"end":return t.stop()}},t,this,[[0,7]])}));function e(e,a){return t.apply(this,arguments)}return e}()},eo={state:Xr,actions:to},ao={user:{id:0,email:"",password:""},users:[]},no={getUsersByContractor:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return Object(Cr["a"])(e),t.prev=1,t.next=4,S.a.get("".concat(k,"manager/user/").concat(a.contractorId));case 4:n=t.sent,ao.users=n.data,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),E.notify();case 11:case"end":return t.stop()}},t,this,[[1,8]])}));function e(e,a){return t.apply(this,arguments)}return e}(),updateUser:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===ao.user.id){t.next=9;break}return t.next=4,S.a.put("".concat(k,"manager/user"),ao.user);case 4:t.sent,Vr.notify("Данные сохранены",'Пользователь "'.concat(ao.user.email,'" изменен')),ao.users=qe(ao.users,ao.user),t.next=14;break;case 9:return t.next=11,S.a.post("".concat(k,"manager/user"),ao.user);case 11:t.sent,Vr.notify("Данные сохранены",'Пользователь "'.concat(ao.user.email,'" создан')),ao.users.push(ao.user);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),E.notify();case 19:case"end":return t.stop()}},t,this,[[0,16]])}));function e(){return t.apply(this,arguments)}return e}(),deleteUser:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===ao.user.id){t.next=7;break}return t.next=4,S.a.delete("".concat(k,"manager/user/").concat(ao.user.id));case 4:t.sent,Vr.notify("Данные удалены",'Пользователь "'.concat(ao.user.email,'" удален')),ao.users=Ve(ao.users,ao.user);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),E.notify();case 12:case"end":return t.stop()}},t,this,[[0,9]])}));function e(){return t.apply(this,arguments)}return e}(),setSingleUser:function(t,e){Object(Cr["a"])(t),ao.user=Object.assign({},ao.user,e)},unsetSingleUser:function(t,e){Object(Cr["a"])(t),ao.user={id:0,email:"",password:"",contractor_id:e.contractorId}}},ro={state:ao,actions:no},oo={module:{id:0,title:"",description:"",layers:[],contractors:[]},modules:[]},io={managerGetModules:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.get("".concat(k,"manager/module"));case 3:e=t.sent,oo.modules=e.data,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),E.notify();case 10:case"end":return t.stop()}},t,this,[[0,7]])}));function e(){return t.apply(this,arguments)}return e}(),updateModule:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===oo.module.id){t.next=9;break}return t.next=4,S.a.put("".concat(k,"manager/module/").concat(oo.module.id),oo.module);case 4:t.sent,Vr.notify("Данные сохранены",'Модуль "'.concat(oo.module.title,'" изменен')),oo.modules=qe(oo.modules,oo.module),t.next=14;break;case 9:return t.next=11,S.a.post("".concat(k,"manager/module"),oo.module);case 11:e=t.sent,Vr.notify("Данные сохранены",'Модуль "'.concat(oo.module.title,'" создан')),oo.modules.push(Object.assign({},oo.module,e.data));case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),E.notify();case 19:case"end":return t.stop()}},t,this,[[0,16]])}));function e(){return t.apply(this,arguments)}return e}(),deleteModule:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===oo.module.id){t.next=7;break}return t.next=4,S.a.delete("".concat(k,"manager/module/").concat(oo.module.id));case 4:t.sent,Vr.notify("Данные удалены",'Модуль "'.concat(oo.module.title,'" удален')),oo.modules=Ve(oo.modules,oo.module);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),E.notify();case 12:case"end":return t.stop()}},t,this,[[0,9]])}));function e(){return t.apply(this,arguments)}return e}(),setSingleModule:function(t,e){Object(Cr["a"])(t),oo.module=Object.assign({},oo.module,e)},unsetSingleModule:function(){oo.module={id:0,title:"",description:"",layers:[],contractors:[]}}},so={state:oo,actions:io},co={layer:{id:0,title:"",description:"",parent_id:0,module_id:0},layers:[]},lo={managerGetLayers:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.get("".concat(k,"manager/layer"));case 3:e=t.sent,co.layers=e.data,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),E.notify();case 10:case"end":return t.stop()}},t,this,[[0,7]])}));function e(){return t.apply(this,arguments)}return e}(),getLayerById:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return Object(Cr["a"])(e),t.prev=1,t.next=4,S.a.get("".concat(k,"manager/layer/").concat(a.id));case 4:n=t.sent,co.layer=Object.assign({},n.data),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),E.notify();case 11:case"end":return t.stop()}},t,this,[[1,8]])}));function e(e,a){return t.apply(this,arguments)}return e}(),updateLayer:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===co.layer.id){t.next=9;break}return t.next=4,S.a.put("".concat(k,"manager/layer/").concat(co.layer.id),co.layer);case 4:e=t.sent,Vr.notify("Данные сохранены",'Слой "'.concat(co.layer.title,'" изменен')),co.layers=qe(co.layers,e.data),t.next=14;break;case 9:return t.next=11,S.a.post("".concat(k,"manager/layer"),co.layer);case 11:a=t.sent,Vr.notify("Данные сохранены",'Слой "'.concat(co.layer.title,'" создан')),co.layers.push(a.data);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),E.notify();case 19:case"end":return t.stop()}},t,this,[[0,16]])}));function e(){return t.apply(this,arguments)}return e}(),deleteLayer:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===co.layer.id){t.next=7;break}return t.next=4,S.a.delete("".concat(k,"manager/layer/").concat(co.layer.id));case 4:t.sent,Vr.notify("Данные удалены",'Слой "'.concat(co.layer.title,'" удален')),co.layers=Ve(co.layers,co.layer);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),E.notify();case 12:case"end":return t.stop()}},t,this,[[0,9]])}));function e(){return t.apply(this,arguments)}return e}(),setSingleLayer:function(t,e){Object(Cr["a"])(t),co.layer=Object.assign({},co.layer,e)},unsetSingleLayer:function(){co.layer={id:0,title:"",description:"",parent_id:0,module_id:0}}},uo={state:co,actions:lo},po={composition:{id:0,title:"",description:"",geometry_type:"point",layer_id:0,style:""},compositions:[]},mo={getLayerCompositions:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return Object(Cr["a"])(e),t.prev=1,t.next=4,S.a.get("".concat(k,"manager/composition/").concat(a.layerId));case 4:n=t.sent,po.compositions=n.data,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),E.notify();case 11:case"end":return t.stop()}},t,this,[[1,8]])}));function e(e,a){return t.apply(this,arguments)}return e}(),updateLayerComposition:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===po.composition.id){t.next=9;break}return t.next=4,S.a.put("".concat(k,"manager/composition/").concat(po.composition.id),po.composition);case 4:e=t.sent,Vr.notify("Данные сохранены",'Компонент слоя "'.concat(po.composition.title,'" изменен')),po.compositions=qe(po.compositions,e.data),t.next=14;break;case 9:return t.next=11,S.a.post("".concat(k,"manager/composition"),po.composition);case 11:a=t.sent,Vr.notify("Данные сохранены",'Компонент слоя "'.concat(po.composition.title,'" создан')),po.compositions.push(a.data);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),E.notify();case 19:case"end":return t.stop()}},t,this,[[0,16]])}));function e(){return t.apply(this,arguments)}return e}(),deleteLayerComposition:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===po.composition.id){t.next=7;break}return t.next=4,S.a.delete("".concat(k,"manager/composition/").concat(po.composition.id));case 4:t.sent,Vr.notify("Данные удалены",'Компонент слоя "'.concat(po.composition.title,'" удален')),po.compositions=Ve(po.compositions,po.composition);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),E.notify();case 12:case"end":return t.stop()}},t,this,[[0,9]])}));function e(){return t.apply(this,arguments)}return e}(),setSingleLayerComposition:function(t,e){Object(Cr["a"])(t),po.composition=Object.assign({},po.composition,e)},unsetSingleLayerComposition:function(t,e){Object(Cr["a"])(t),po.composition={id:0,title:"",description:"",geometry_type:"point",layer_id:e.layerId,style:""}}},yo={state:po,actions:mo},go={element:{id:0,title:"",description:"",layer_id:0,geometries:[],geometries_count:0},elements:[]},fo={managerGetElements:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return Object(Cr["a"])(e),t.prev=1,t.next=4,S.a.get("".concat(k,"manager/element/layer/").concat(a.layerId));case 4:n=t.sent,go.elements=n.data,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),E.notify();case 11:case"end":return t.stop()}},t,this,[[1,8]])}));function e(e,a){return t.apply(this,arguments)}return e}(),managerGetElementById:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return Object(Cr["a"])(e),t.prev=1,t.next=4,S.a.get("".concat(k,"manager/element/").concat(a.id));case 4:n=t.sent,go.element=Object.assign({},n.data),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),E.notify();case 11:case"end":return t.stop()}},t,this,[[1,8]])}));function e(e,a){return t.apply(this,arguments)}return e}(),managerUpdateElement:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===go.element.id){t.next=9;break}return t.next=4,S.a.put("".concat(k,"manager/element/").concat(go.element.id),go.element);case 4:e=t.sent,Vr.notify("Данные сохранены",'Элемент "'.concat(go.element.title,'" изменен')),go.elements=qe(go.elements,e.data),t.next=14;break;case 9:return t.next=11,S.a.post("".concat(k,"manager/element"),go.element);case 11:a=t.sent,Vr.notify("Данные сохранены",'Элемент "'.concat(go.element.title,'" создан')),go.elements.push(a.data);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),E.notify();case 19:case"end":return t.stop()}},t,this,[[0,16]])}));function e(){return t.apply(this,arguments)}return e}(),managerDeleteElement:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===go.element.id){t.next=7;break}return t.next=4,S.a.delete("".concat(k,"manager/element/").concat(go.element.id));case 4:t.sent,Vr.notify("Данные удалены",'Элемент "'.concat(go.element.title,'" удален')),go.elements=Ve(go.elements,go.element);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),E.notify();case 12:case"end":return t.stop()}},t,this,[[0,9]])}));function e(){return t.apply(this,arguments)}return e}(),managerSetSingleElement:function(t,e){Object(Cr["a"])(t),go.element=Object.assign({},go.element,e)},managerUnsetSingleElement:function(t,e){Object(Cr["a"])(t),go.element={id:0,title:"",description:"",layer_id:e.layerId,geometries:[],geometries_count:0}}},vo={state:go,actions:fo},ho={geometry:{id:0,title:"",description:"",layer_composition_id:0,type:"point",element_id:0},geometries:[]},bo={managerGetGeometries:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return Object(Cr["a"])(e),t.prev=1,t.next=4,S.a.get("".concat(k,"manager/geometry/").concat(a.elementId));case 4:n=t.sent,ho.geometries=n.data,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),E.notify();case 11:case"end":return t.stop()}},t,this,[[1,8]])}));function e(e,a){return t.apply(this,arguments)}return e}(),managerUpdateGeometry:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===ho.geometry.id){t.next=9;break}return t.next=4,S.a.put("".concat(k,"manager/geometry/").concat(ho.geometry.type,"/").concat(ho.geometry.id),ho.geometry);case 4:e=t.sent,Vr.notify("Данные сохранены",'Геоэлемент "'.concat(ho.geometry.title,'" изменен')),ho.geometries=qe(ho.geometries,e.data),t.next=14;break;case 9:return t.next=11,S.a.post("".concat(k,"manager/geometry/").concat(ho.geometry.type),ho.geometry);case 11:a=t.sent,Vr.notify("Данные сохранены",'Геоэлемент "'.concat(ho.geometry.title,'" создан')),ho.geometries.push(a.data);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),E.notify();case 19:case"end":return t.stop()}},t,this,[[0,16]])}));function e(){return t.apply(this,arguments)}return e}(),managerDeleteGeometry:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===ho.geometry.id){t.next=7;break}return t.next=4,S.a.delete("".concat(k,"manager/geometry/").concat(ho.geometry.type,"/").concat(ho.geometry.id));case 4:t.sent,Vr.notify("Данные удалены",'Геоэлемент "'.concat(ho.geometry.title,'" удален')),ho.geometries=Ve(ho.geometries,ho.geometry);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),E.notify();case 12:case"end":return t.stop()}},t,this,[[0,9]])}));function e(){return t.apply(this,arguments)}return e}(),managerSetSingleGeometry:function(t,e){Object(Cr["a"])(t),ho.geometry=Object.assign({},ho.geometry,e)},managerUnsetSingleGeometry:function(t,e){Object(Cr["a"])(t),ho.geometry={id:0,title:"",description:"",layer_composition_id:0,type:"point",element_id:e.elementId}}},_o={state:ho,actions:bo},Co={layers:[]},So={gisGetLayers:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.get("".concat(k,"gis/layer"));case 3:e=t.sent,Co.layers=e.data,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),E.notify();case 10:case"end":return t.stop()}},t,this,[[0,7]])}));function e(){return t.apply(this,arguments)}return e}(),gisGetLayersToContractor:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.get("".concat(k,"gis/layer/contractor"));case 3:e=t.sent,Co.layers=e.data,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),E.notify();case 10:case"end":return t.stop()}},t,this,[[0,7]])}));function e(){return t.apply(this,arguments)}return e}(),selectedElement:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){var n,r,o,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(Object(Cr["a"])(e),n=a.i,r=a.j,t.prev=3,o=Co.layers[n].elements[r],o.geometries){t.next=11;break}return t.next=8,S.a.get("".concat(k,"gis/element/geometries/").concat(o.id));case 8:i=t.sent,o.geometries=i.data,Co.layers[n].elements[r]=Object.assign({},o);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](3),E.notify();case 16:case"end":return t.stop()}},t,this,[[3,13]])}));function e(e,a){return t.apply(this,arguments)}return e}(),selectedLayer:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return Object(Cr["a"])(e),a.i,t.prev=2,n=Co.layers[a.i],t.next=6,S.a.get("".concat(k,"gis/layer/geometries/").concat(n.id));case 6:r=t.sent,r.data.forEach(function(t){var e=re(n.elements,t.element_id);n.elements[e].geometries.push(t)}),Co.layers[a.i]=Object.assign({},n),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),E.notify();case 14:case"end":return t.stop()}},t,this,[[2,11]])}));function e(e,a){return t.apply(this,arguments)}return e}(),setCurrentIndex:function(t,e){Object(Cr["a"])(t),Co.currentLayerIndex=e.layerIndex,Co.currentElementIndex=e.elementIndex},unsetCurrentIndex:function(){delete Co.currentLayerIndex,delete Co.currentElementIndex}},ko={state:Co,actions:So},wo={compositions:[],styles:[]},Oo={gisGetLayerCompositions:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.get("".concat(k,"gis/compositions"));case 3:e=t.sent,wo.compositions=e.data,a=[],wo.compositions.forEach(function(t){a.push(Object.assign({},{id:t.id},JSON.parse(t.style)))}),wo.styles=a,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),E.notify();case 13:case"end":return t.stop()}},t,this,[[0,10]])}));function e(){return t.apply(this,arguments)}return e}(),gisGetLayerCompositionsToContractor:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.get("".concat(k,"gis/compositions/contractor"));case 3:e=t.sent,wo.compositions=e.data,a=[],wo.compositions.forEach(function(t){a.push(Object.assign({},{id:t.id},JSON.parse(t.style)))}),wo.styles=a,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),E.notify();case 13:case"end":return t.stop()}},t,this,[[0,10]])}));function e(){return t.apply(this,arguments)}return e}()},jo={state:wo,actions:Oo},xo={element:{id:0,title:"Новый элемент",description:"",layer_id:0,geometries:[],geometries_count:0}},Eo={updateElement:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e.rootState,t.prev=1,0===xo.element.id){t.next=9;break}return t.next=5,S.a.put("".concat(k,"gis/element/").concat(xo.element.id),{title:xo.element.title,description:xo.element.description});case 5:t.sent,Vr.notify("Данные сохранены",'Элемент "'.concat(xo.element.title,'" изменен')),t.next=14;break;case 9:return t.next=11,S.a.post("".concat(k,"gis/element"),{title:xo.element.title,description:xo.element.description,layer_id:xo.element.layer_id});case 11:a=t.sent,xo.element=Object.assign({},xo.element,a.data),Vr.notify("Данные сохранены",'Элемент "'.concat(xo.element.title,'" создан'));case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](1),E.notify();case 19:case"end":return t.stop()}},t,this,[[1,16]])}));function e(e){return t.apply(this,arguments)}return e}(),setSingleElement:function(t,e){Object(Cr["a"])(t),xo.element=Object.assign({},xo.element,e.element)},unsetSingleElement:function(t,e){Object(Cr["a"])(t),xo.element={id:0,title:"Новый элемент",description:"",layer_id:e.layerId,geometries:[],geometries_count:0}},deleteElement:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return Object(Cr["a"])(e),t.prev=1,t.next=4,S.a.delete("".concat(k,"gis/element/").concat(a.elementId));case 4:t.sent,Vr.notify("Данные удалены",'Элемент "'.concat(a.elementTitle,'" удален')),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),E.notify();case 11:case"end":return t.stop()}},t,this,[[1,8]])}));function e(e,a){return t.apply(this,arguments)}return e}()},Mo={state:xo,actions:Eo},Ro={geometry:{id:0,title:"Новый геообъект",description:"",layer_composition_id:0,geom:"",type:"point"}},Io={updateGeometry:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(Object(Cr["a"])(e),t.prev=1,0===Ro.geometry.id){t.next=10;break}return t.next=5,S.a.put("".concat(k,"gis/geometry/").concat(a.type,"/").concat(Ro.geometry.id),{title:Ro.geometry.title,description:Ro.geometry.description,geom:Ro.geometry.geom});case 5:n=t.sent,Ro.geometry=Object.assign({},Ro.geometry,n.data),Vr.notify("Данные сохранены",'Геообъект "'.concat(Ro.geometry.title,'" изменен')),t.next=15;break;case 10:return t.next=12,S.a.post("".concat(k,"gis/geometry/").concat(a.type),{title:Ro.geometry.title,description:Ro.geometry.description,element_id:a.elementId,layer_composition_id:Ro.geometry.layer_composition_id,geom:Ro.geometry.geom});case 12:r=t.sent,Ro.geometry=Object.assign({},Ro.geometry,r.data),Vr.notify("Данные сохранены",'Новый геообъект "'.concat(Ro.geometry.title,'" создан'));case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](1),E.notify();case 20:case"end":return t.stop()}},t,this,[[1,17]])}));function e(e,a){return t.apply(this,arguments)}return e}(),deleteGeometry:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return Object(Cr["a"])(e),t.prev=1,t.next=4,S.a.delete("".concat(k,"gis/geometry/").concat(a.type,"/").concat(Ro.geometry.id));case 4:Vr.notify("Данные удалены",'Геообъект "'.concat(Ro.geometry.title,'" удален')),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),E.notify();case 10:case"end":return t.stop()}},t,this,[[1,7]])}));function e(e,a){return t.apply(this,arguments)}return e}(),setSingleGeometry:function(t,e){Object(Cr["a"])(t),Ro.geometry=Object.assign({},Ro.geometry,e)},unsetSingleGeometry:function(t,e){Object(Cr["a"])(t),Ro.geometry={id:0,title:"Новый геообъект",description:"",layer_composition_id:e.layer_composition_id,geom:"",type:e.type}}},Lo={state:Ro,actions:Io},$o={modal:{title:"Вы уверены?",text:"Вы уверены, что хотите удалить этот элемент?",buttonOk:"Да, удалить",buttonCansel:"Отменить",action:{}}},Po={setSureModal:function(t,e){Object(Cr["a"])(t),$o.modal=Object.assign({},$o.modal,e)}},Go={state:$o,actions:Po},To={parent:0,list:[],actions:{}},No={setIncludeList:function(t,e){Object(Cr["a"])(t),To.list=[],e.list.forEach(function(t){var a=ne(t[e.key],e.parent);To.list.push({id:t.id,title:t.title,checked:!1!==a})}),To.parent=e.parent},setIncludeListActions:function(t,e){Object(Cr["a"])(t),e.attach&&(To.actions.attach=e.attach),e.detach&&(To.actions.detach=e.detach)},toggleIncludeItem:function(t,e){Object(Cr["a"])(t),e.item.checked&&To.actions.attach?To.actions.attach&&To.actions.attach({parent:To.parent,item:e.item.id}):To.actions.detach&&To.actions.detach({parent:To.parent,item:e.item.id})}},Fo={state:To,actions:No},Uo={point:{id:1,shape:{points:11,fill:{color:"#009fe3",opacity:0},stroke:{color:"#164194",width:1,opacity:0},radius:5,rotation:0},icon:{src:"".concat(w,"storage/images/compositions/default.png"),anchor:[24,24],opacity:0,scale:1,rotation:0},pointType:"shape",font:{font:"16px Calibri, sans-serif",textBaseline:"bottom",offsetY:-6,fill:{color:"#000000"},stroke:{color:"#ffffff",width:3}}},linestring:{id:1,stroke:{color:"#164194",opacity:20,width:10},font:{font:"16px Calibri, sans-serif",textBaseline:"bottom",placement:"line",fill:{color:"#000000"},stroke:{color:"#ffffff",width:3}}},polygon:{id:1,fill:{color:"#009fe3",opacity:20},stroke:{color:"#164194",width:1,opacity:0},font:{font:"16px Calibri, sans-serif",textBaseline:"bottom",offsetY:-6,fill:{color:"#000000"},stroke:{color:"#ffffff",width:3}}}},Bo={geometryType:"",style:Uo.point,jsonStyle:JSON.stringify(Uo.point)},Ao={setGeometryTypeByStyleEditor:function(t,e){Object(Cr["a"])(t),Bo.geometryType=e.geometryType},setStyleByStyleEditor:function(t,e){if(Object(Cr["a"])(t),""!==e.style){var a="point"===Bo.geometryType?Uo.point:"linestring"===Bo.geometryType?Uo.linestring:Uo.polygon;Bo.style=Object.assign({},a,JSON.parse(e.style)),Bo.jsonStyle=e.style}},setDefaultStyleByStyleEditor:function(){var t="point"===Bo.geometryType?Uo.point:"linestring"===Bo.geometryType?Uo.linestring:Uo.polygon;Bo.style=Object.assign({},t),Bo.jsonStyle=JSON.stringify(Bo.style)},jsonStyleUpdate:function(){Bo.jsonStyle=JSON.stringify(Bo.style)},uploadIconByStyleEditor:function(){var t=Object(ut["a"])(regeneratorRuntime.mark(function t(e,a){var n,r,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return Object(Cr["a"])(e),n=new FormData,n.append("file",a.file),t.prev=3,t.next=6,S.a.post("".concat(k,"manager/composition/upload"),n,{headers:{"Content-Type":"multipart/form-data"}});case 6:r=t.sent,o=Bo.style,o.icon.src="".concat(w).concat(r.data.filename),o.icon.anchor=[r.data.width/2,r.data.height/2],Bo.style=Object.assign({},o),Vr.notify("Загрузка завершена",'Изображение "'.concat(a.file.name,'" загружено на сервер')),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](3),E.notify();case 17:case"end":return t.stop()}},t,this,[[3,14]])}));function e(e,a){return t.apply(this,arguments)}return e}()},Do={state:Bo,actions:Ao},Ho={map:!1,properties:{longitude:48.036,latitude:46.3538,zoom:17,selectorMapContainer:"map"},layer:!1,styles:[],interaction:{draw:{layer:!1,mode:"",draw:!1}}},zo={setMapCenter:function(t,e){Object(Cr["a"])(t),Ho.properties.longitude=e.longitude?e.longitude:Ho.properties.longitude,Ho.properties.latitude=e.latitude?e.latitude:Ho.properties.latitude,Ho.properties.zoom=e.zoom?e.zoom:Ho.properties.zoom,!1!==Ho.map&&(Ho.map.getView().setCenter(Object(Oe["h"])([Ho.properties.longitude,Ho.properties.latitude],"EPSG:4326","EPSG:3857")),Ho.map.getView().setZoom(Ho.properties.zoom))},setMapCenterDefault:function(){Ho.properties.longitude=48.036,Ho.properties.latitude=46.3538,Ho.properties.zoom=17,!1!==Ho.map&&(Ho.map.getView().setCenter(Object(Oe["h"])([Ho.properties.longitude,Ho.properties.latitude],"EPSG:4326","EPSG:3857")),Ho.map.getView().setZoom(Ho.properties.zoom))},getMapCenter:function(t,e){if(Object(Cr["a"])(t),!1!==Ho.map){var a=Object(Oe["h"])(Ho.map.getView().getCenter(),"EPSG:3857","EPSG:4326");Ho.properties.longitude=a[0],Ho.properties.latitude=a[1],Ho.properties.zoom=Ho.map.getView().getZoom()}},createMap:function(t,e){Object(Cr["a"])(t),Ho.map=e.map,Ho.layer=e.layer},mapUpdateSize:function(){n["default"].nextTick(function(){!1!==Ho.map&&Ho.map.updateSize()})},setMapStyles:function(t,e){Object(Cr["a"])(t),Ho.styles=e.styles,Me(Ho.layer,Ho.styles)},setMapInteraction:function(t,e){Object(Cr["a"])(t),Ho.interaction.draw=Object.assign({},Ho.interaction.draw,{mode:"point"===e.mode?"Point":"linestring"===e.mode?"LineString":"polygon"===e.mode?"Polygon":""})},addFeatureToMap:function(t,e){Object(Cr["a"])(t);var a=re(Ho.styles,e.layer_composition_id);if(-1!==a&&e.geom){var n=ye(e.id,e.geom,e.property,Ho.styles[a]);Ho.layer.getSource().addFeature(n)}},removeFeatureFromMap:function(t,e){Object(Cr["a"])(t);var a=Ho.layer.getSource().getFeatureById(e.id);a&&Ho.layer.getSource().removeFeature(a)},focusOfFeature:function(t,e){Object(Cr["a"])(t);var a=Ho.layer.getSource().getFeatureById(e.id);a&&Ie(Ho.map,a)},focusOfFeatures:function(t,e){Object(Cr["a"])(t);var a=[];e.ids.forEach(function(t){var e=Ho.layer.getSource().getFeatureById(t);e&&a.push(e)}),Le(Ho.map,a)}},qo={state:Ho,actions:zo};n["default"].use(vr["a"]);var Vo=new vr["a"].Store({state:{},mutations:{},actions:{},modules:{infomodule:_r,infoelement:wr,infoitem:Ar,user:Er,geoLayer:zr,geoElement:Yr,geoGeometry:Qr,managerContractor:eo,managerUser:ro,managerModule:so,managerLayer:uo,managerLayerComposition:yo,managerElement:vo,managerGeometry:_o,gisLayer:ko,gisLayerComposition:jo,gisElement:Mo,gisGeometry:Lo,includeList:Fo,sureModal:Go,styleEditor:Do,map:qo},plugins:[Object(Mr["a"])({paths:["user.token"]})]}),Jo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{style:{"text-align":t.column.align}},[t.column.component?a(t.column.component,{tag:"component",attrs:{row:t.row,column:t.column}}):t.column.interpolate?a("span",{domProps:{innerHTML:t._s(t.content)}}):a("span",[t._v(t._s(t.content))])],1)},Wo=[],Yo={props:{column:[Object,Array],row:[Object,Array]},computed:{content:function(){return this.column.getRepresentation(this.row)}}},Zo=Yo,Ko=(a("3564"),Object(i["a"])(Zo,Jo,Wo,!1,null,null,null));Ko.options.__file="vue-datatable-cell.vue";var Qo=Ko.exports,Xo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{style:{"text-align":t.column.align}},[t.column.headerComponent?a(t.column.headerComponent,{tag:"component",attrs:{column:t.column}}):a("span",[t._v(t._s(t.column.label))]),t.column.sortable?a("span",{class:t.classes,on:{click:t.toggleSort}}):t._e()],1)},ti=[],ei={props:{model:{prop:"direction",event:"change"},column:[Object,Array],settings:Object,direction:{type:String,default:null}},computed:{canSort:function(){return this.column.sortable},is_sorted_ascending:function(){return"asc"===this.direction},is_sorted_descending:function(){return"desc"===this.direction},is_sorted:function(){return this.is_sorted_descending||this.is_sorted_ascending},classes:function(){var t=this.settings.get("table.sorting.classes"),e=t.canSort;return this.canSort?this.is_sorted?(this.is_sorted_ascending&&(e=e.concat(t.sortAsc)),this.is_sorted_descending&&(e=e.concat(t.sortDesc)),this.joinClasses(e)):(e=e.concat(t.sortNone),this.joinClasses(e)):""}},methods:{joinClasses:function(t){return this.unique(t).join(" ")},toggleSort:function(){this.direction&&null!==this.direction?"asc"===this.direction?this.$emit("change","desc",this.column):this.$emit("change",null,this.column):this.$emit("change","asc",this.column)},unique:function(t){var e={};return t.filter(function(t){return!e.hasOwnProperty(t)&&(e[t]=!0)})}}},ai=ei,ni=(a("d024"),Object(i["a"])(ai,Xo,ti,!1,null,null,null));ni.options.__file="vue-datatable-header.vue";var ri=ni.exports,oi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{class:t.li_classes},[a("a",{class:t.a_classes,attrs:{href:"javascript: void(0);"},on:{click:t.sendClick}},[t._t("default",[t._v(t._s(t.value))])],2)])},ii=[],si=(a("c5f6"),a("53ca")),ci=a("6e87"),li=a.n(ci),ui=function(){function t(){Object(m["a"])(this,t),this.properties={table:{class:"table table-hover table-striped",row:{classes:[""]},sorting:{classes:{canSort:["sort"],sortNone:["glyphicon","glyphicon-sort"],sortAsc:["glyphicon","glyphicon-sort-by-alphabet"],sortDesc:["glyphicon","glyphicon-sort-by-alphabet-alt"]}}},pager:{classes:{pager:"pagination",li:"",a:"",selected:"active",disabled:"disabled"},icons:{previous:"&lt;",next:"&gt;"}}}}return Object(y["a"])(t,[{key:"get",value:function(t){return li.a.get(this.properties,t)}},{key:"set",value:function(t,e){return li.a.set(this.properties,t,e),this}},{key:"merge",value:function(t){return this.properties=this._mergeObjects(this.properties,t),this}},{key:"_mergeObjects",value:function(t,e){for(var a in e)null!==e[a]?"object"!==Object(si["a"])(e[a])?t[a]=e[a]:t[a]=this._mergeObjects(t[a],e[a]):t[a]=e[a];return t}}]),t}(),di=ui,pi={props:{disabled:{type:Boolean,default:!1},selected:{type:Boolean,default:!1},value:{type:Number,default:null}},computed:{li_classes:function(){var t=[];return this.settings.get("pager.classes.li")&&t.push(this.settings.get("pager.classes.li")),this.disabled&&t.push(this.settings.get("pager.classes.disabled")),this.selected&&t.push(this.settings.get("pager.classes.selected")),t.join(" ")},a_classes:function(){var t=[];return this.settings.get("pager.classes.a")&&t.push(this.settings.get("pager.classes.a")),t.join(" ")},settings:function(){return this.$parent.settings}},methods:{sendClick:function(){this.disabled||this.$emit("click",this.value)}}},mi=pi,yi=(a("16b7"),Object(i["a"])(mi,oi,ii,!1,null,null,null));yi.options.__file="vue-datatable-pager-button.vue";var gi=yi.exports,fi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{class:t.table_class},[a("thead",[a("tr",t._l(t.normalized_columns,function(e,n){return a("datatable-header",{key:n,attrs:{column:e,settings:t.settings,direction:t.getSortDirectionForColumn(e)},on:{change:t.setSortDirectionForColumn}})}),1)]),a("tbody",[t._l(t.processed_rows,function(e){return t._t("default",[a("tr",{class:t.getRowClasses(e)},t._l(t.normalized_columns,function(t,n){return a("datatable-cell",{key:n,attrs:{column:t,row:e}})}),1)],{row:e,columns:t.normalized_columns})}),0==t.processed_rows.length?a("tr",[a("td",{attrs:{colspan:t.normalized_columns.length}},[t._t("no-results")],2)]):t._e()],2),t.$slots.footer||t.$scopedSlots.footer?a("tfoot",[t._t("footer",null,{rows:t.processed_rows})],2):t._e()])},vi=[],hi=function(){function t(e){Object(m["a"])(this,t),this.setAlignment(e.align),this.label=e.label||"",this.field=e.field||null,this.representedAs=e.representedAs||null,this.component=e.component||null,this.interpolate=e.interpolate||!1,this.headerComponent=e.headerComponent||null,this.sortable=this.isSortable(e),this.filterable=this.isFilterable(e)}return Object(y["a"])(t,[{key:"setAlignment",value:function(t){return t&&"string"===typeof t?"center"===t.toLowerCase()?(this.align="center",this):"right"===t.toLowerCase()?(this.align="right",this):(this.align="left",this):(this.align="left",this)}},{key:"isFilterable",value:function(t){return!1!==t.filterable&&(!(!t.field&&!t.representedAs)&&!(this.component&&!this.representedAs&&!this.field))}},{key:"isSortable",value:function(t){return!1!==t.sortable&&(!(!t.field&&!t.representedAs)&&!(this.component&&!this.representedAs&&!this.field))}},{key:"getRepresentation",value:function(t){return this.representedAs&&"function"===typeof this.representedAs?this.representedAs(t):this.component&&this.filterable?this.plain_text_function(t,this):li.a.get(t,this.field)}},{key:"getValue",value:function(t){return this.getRepresentation(t)}},{key:"matches",value:function(t,e){var a=(""+this.getRepresentation(t)).toLowerCase();return-1!==a.indexOf(e.toLowerCase())}}]),t}(),bi=hi,_i={props:{name:{type:String,default:"default"},columns:[Object,Array],data:[Object,Array,String,Function],filterBy:{type:String,default:null},rowClasses:{type:[String,Array,Object,Function],default:null}},data:function(){return{sort_by:null,sort_dir:null,total_rows:0,page:1,per_page:null,processed_rows:[]}},computed:{rows:function(){return this.data.slice(0)},settings:function(){return this.$options.settings},handler:function(){return this.$options.handler},normalized_columns:function(){return this.columns.map(function(t){return new bi(t)})},table_class:function(){return this.settings.get("table.class")}},methods:{getSortDirectionForColumn:function(t){return this.sort_by!==t?null:this.sort_dir},setSortDirectionForColumn:function(t,e){this.sort_by=e,this.sort_dir=t},processRows:function(){if("function"!==typeof this.data){var t=this.handler.filterHandler(this.rows,this.filterBy,this.normalized_columns),e=this.handler.sortHandler(t,this.sort_by,this.sort_dir),a=this.handler.paginateHandler(e,this.per_page,this.page);this.handler.displayHandler(a,{filtered_data:t,sorted_data:e,paged_data:a},this.setRows,this.setTotalRowCount)}else{var n={filter:this.filterBy,sort_by:this.sort_by?this.sort_by.field:null,sort_dir:this.sort_dir,page_length:this.per_page,page_number:this.page};this.data(n,function(t,e){this.setRows(t),this.setTotalRowCount(e)}.bind(this))}},setRows:function(t){this.processed_rows=t},setTotalRowCount:function(t){this.total_rows=t},getRowClasses:function(t){var e=this.rowClasses;return null===e&&(e=this.settings.get("table.row.classes")),"function"===typeof e?e(t):e}},created:function(){n["default"].$datatables[this.name]=this,this.$root.$emit("table.ready",this.name),this.$watch(function(){return this.data}.bind(this),this.processRows,{deep:!0}),this.$watch("columns",this.processRows),this.$watch(function(){return this.filterBy+this.per_page+this.page+this.sort_by+this.sort_dir}.bind(this),this.processRows),this.processRows()},handler:null,settings:null},Ci=_i,Si=(a("e698"),Object(i["a"])(Ci,fi,vi,!1,null,null,null));Si.options.__file="vue-datatable.vue";var ki=Si.exports,wi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.show?a("nav",["abbreviated"===t.type?a("ul",{class:t.pagination_class},[t.page-3>=1?a("datatable-button",{attrs:{value:1},on:{click:t.setPageNum}}):t._e(),t.page-4>=1?a("datatable-button",{attrs:{disabled:""}},[t._v("...")]):t._e(),t.page-2>=1?a("datatable-button",{attrs:{value:t.page-2},on:{click:t.setPageNum}}):t._e(),t.page-1>=1?a("datatable-button",{attrs:{value:t.page-1},on:{click:t.setPageNum}}):t._e(),a("datatable-button",{attrs:{value:t.page,selected:""}}),t.page+1<=t.total_pages?a("datatable-button",{attrs:{value:t.page+1},on:{click:t.setPageNum}}):t._e(),t.page+2<=t.total_pages?a("datatable-button",{attrs:{value:t.page+2},on:{click:t.setPageNum}}):t._e(),t.page+4<=t.total_pages?a("datatable-button",{attrs:{disabled:""}},[t._v("...")]):t._e(),t.page+3<=t.total_pages?a("datatable-button",{attrs:{value:t.total_pages},on:{click:t.setPageNum}}):t._e()],1):"long"===t.type?a("ul",{class:t.pagination_class},t._l(t.total_pages,function(e){return a("datatable-button",{key:e,attrs:{value:e,selected:e===t.page},on:{click:t.setPageNum}})}),1):"short"===t.type?a("ul",{class:t.pagination_class},[a("datatable-button",{attrs:{disabled:t.page-1<1,value:t.page-1},on:{click:t.setPageNum}},[a("span",{domProps:{innerHTML:t._s(t.previous_icon)}})]),a("datatable-button",{attrs:{value:t.page,selected:""}}),a("datatable-button",{attrs:{disabled:t.page+1>t.total_pages,value:t.page+1},on:{click:t.setPageNum}},[a("span",{domProps:{innerHTML:t._s(t.next_icon)}})])],1):t._e()]):t._e()},Oi=[],ji={model:{prop:"page",event:"change"},props:{table:{type:String,default:"default"},type:{type:String,default:"long"},perPage:{type:Number,default:10},page:{type:Number,default:1}},data:function(){return{table_instance:null}},computed:{show:function(){return this.table_instance&&this.total_rows>0},total_rows:function(){return this.table_instance?this.table_instance.total_rows:0},pagination_class:function(){return this.settings.get("pager.classes.pager")},disabled_class:function(){return this.settings.get("pager.classes.disabled")},previous_link_classes:function(){return this.page-1<1?this.settings.get("pager.classes.disabled"):""},next_link_classes:function(){return this.page+1>this.total_pages?this.settings.get("pager.classes.disabled"):""},total_pages:function(){return this.total_rows>0?Math.ceil(this.total_rows/this.perPage):0},previous_icon:function(){return this.settings.get("pager.icons.previous")},next_icon:function(){return this.settings.get("pager.icons.next")},settings:function(){return this.$options.settings}},methods:{setPageNum:function(t){this.table_instance.page=t,this.table_instance.per_page=this.perPage,this.$emit("change",t)},getClassForPage:function(t){return this.page==t?this.settings.get("pager.classes.selected"):""}},watch:{total_rows:function(){this.page>this.total_pages&&this.setPageNum(this.total_pages)},perPage:function(){var t=this.page;t>this.total_pages&&(t=this.total_pages),this.setPageNum(t)}},created:function(){if(n["default"].$datatables[this.table])return this.table_instance=n["default"].$datatables[this.table],void(this.table_instance.per_page=this.perPage);this.$root.$on("table.ready",function(t){t===this.table&&(this.table_instance=n["default"].$datatables[this.table],this.table_instance.per_page=this.perPage)}.bind(this))},settings:null},xi=ji,Ei=(a("2c98"),Object(i["a"])(xi,wi,Oi,!1,null,null,null));Ei.options.__file="vue-datatable-pager.vue";var Mi=Ei.exports,Ri=(a("55dd"),a("28a5"),function(){function t(){Object(m["a"])(this,t),this.filterHandler=this.handleFilter,this.sortHandler=this.handleSort,this.paginateHandler=this.handlePaginate,this.displayHandler=this.handleDisplay}return Object(y["a"])(t,[{key:"handleFilter",value:function(t,e,a){if(!e)return t;var n=e.split(/\s/);return t.filter(function(t){for(var e in n)if(!this.rowMatches(t,n[e],a))return!1;return!0}.bind(this))}},{key:"rowMatches",value:function(t,e,a){for(var n in a)if(a[n].matches(t,e))return!0;return!1}},{key:"handleSort",value:function(t,e,a){return e&&null!==a?t.sort(function(t,n){var r=e.getRepresentation(t),o=e.getRepresentation(n);if(r==o)return 0;var i=r>o?1:-1;return"desc"===a&&(i*=-1),i}):t}},{key:"handlePaginate",value:function(t,e,a){if(!e)return t;a<1&&(a=1);var n=(a-1)*e,r=a*e;return t.slice(n,r)}},{key:"handleDisplay",value:function(t,e,a,n){a(t),n(e.filtered_data.length)}}]),t}()),Ii=Ri,Li=function(){function t(e){Object(m["a"])(this,t),this.id=e,this.handler=new Ii,this.settings=new di}return Object(y["a"])(t,[{key:"getId",value:function(){return this.id}},{key:"setFilterHandler",value:function(t){return this.handler.filterHandler=t,this}},{key:"setSortHandler",value:function(t){return this.handler.sortHandler=t,this}},{key:"setPaginateHandler",value:function(t){return this.handler.paginateHandler=t,this}},{key:"setDisplayHandler",value:function(t){return this.handler.displayHandler=t,this}},{key:"setting",value:function(t,e){return void 0===e?this.settings.get(t):(this.settings.set(t,e),this)}},{key:"mergeSettings",value:function(t){return this.settings.merge(t),this}},{key:"getTableDefinition",value:function(){var t=this.clone(ki);return t.handler=this.handler,t.settings=this.settings,t.name=this.id,t}},{key:"getPagerDefinition",value:function(){var t=this.clone(Mi);return t.settings=this.settings,t.name=this.id,t}},{key:"clone",value:function(t){var e;if(null===t||"object"!==Object(si["a"])(t))return t;if(t instanceof Array){e=[];for(var a=0;a<t.length;a++)e[a]=this.clone(t[a]);return e}if(t instanceof Object){for(var n in e={},t)t.hasOwnProperty(n)&&(e[n]=this.clone(t[n]));return e}throw new Error("Unable to copy obj! Its type isn't supported.")}}]),t}(),$i=Li,Pi=function(){function t(){Object(m["a"])(this,t),this.table_types=[],this.use_default_type=!0,this.default_table_settings=new di}return Object(y["a"])(t,[{key:"useDefaultType",value:function(t){return this.use_default_type=!!t,this}},{key:"registerTableType",value:function(t,e){var a=new $i(t);return this.table_types.push(a),e&&"function"===typeof e&&e(a),this}},{key:"install",value:function(t){for(var e in t.$datatables={},t.component("datatable-cell",Qo),t.component("datatable-header",ri),t.component("datatable-button",gi),this.use_default_type&&this.registerTableType("datatable",function(t){t.mergeSettings(this.default_table_settings.properties)}.bind(this)),this.table_types)this.installTableType(this.table_types[e].getId(),this.table_types[e],t)}},{key:"installTableType",value:function(t,e,a){a.component(t,e.getTableDefinition()),a.component(t+"-pager",e.getPagerDefinition())}}]),t}(),Gi=Pi,Ti=new Gi,Ni=a("7bb1"),Fi=a("b451"),Ui=a.n(Fi),Bi=a("9f7b"),Ai=(a("f9e3"),a("2dd8"),a("011e")),Di=a.n(Ai),Hi=(a("c41f"),a("ee98")),zi=a.n(Hi);n["default"].use(Ti),Ni["a"].localize("ru",Ui.a),n["default"].use(Ni["b"],{fieldsBagName:"formFields"}),n["default"].use(Bi["a"]),n["default"].component("vue-scrollbar",Di.a);try{window.$=window.jQuery=a("1157"),a("4989")}catch(Vi){}n["default"].use(zi.a);var qi=a("9483");Object(qi["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}}),n["default"].config.productionTip=!1,new n["default"]({router:fr,store:Vo,render:function(t){return t(l)},created:function(){localStorage.getItem("vuex")&&j(localStorage.getItem("vuex"))}}).$mount("#app")},d024:function(t,e,a){"use strict";var n=a("570f"),r=a.n(n);r.a},d033:function(t,e,a){},e698:function(t,e,a){"use strict";var n=a("9683"),r=a.n(n);r.a},e94c:function(t,e,a){}});
//# sourceMappingURL=app.e045fd2f.js.map