(function(t){function e(e){for(var r,o,s=e[0],l=e[1],c=e[2],d=0,p=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],r=!0,s=1;s<a.length;s++){var l=a[s];0!==n[l]&&(r=!1)}r&&(i.splice(e--,1),t=o(o.s=a[0]))}return t}var r={},n={app:0},i=[];function o(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=r,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(a,r,function(e){return t[e]}.bind(null,r));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},"19a7":function(t,e,a){},"5c0b":function(t,e,a){"use strict";var r=a("e332"),n=a.n(r);n.a},a3fd:function(t,e,a){"use strict";var r=a("19a7"),n=a.n(r);n.a},cd49:function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var r=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},i=[],o=a("d225"),s=a("b0b4"),l=a("308d"),c=a("6bb5"),u=a("4e2b"),d=a("9ab4"),p=a("60a3"),m=a("4bb5"),v=a("8c4f"),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"home"},[a("notifications"),a("div",{staticClass:"main"},[a("a",{staticClass:"logo",attrs:{href:"/",title:"Панорама"}}),a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Email"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Пароль"},domProps:{value:t.user.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login(e)},input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),a("button",{staticClass:"btn btn-lg btn-primary btn-block",on:{click:t.login}},[t._v("\n                    Войти "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.isLoad,expression:"isLoad"}],staticClass:"fas fa-circle-notch fa-spin"})])])])],1),a("footer",[a("div",{staticClass:"copyright"},[a("p",[t._v("Все права защищены © "),a("span",{domProps:{innerHTML:t._s(t.date.getFullYear())}})]),t._m(0),a("p",{staticClass:"pink"},[t._v("Интеграционная платформа муниципалитетов")])])])])},y=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("a",{attrs:{href:"https://cityskills.ru/",title:"Центр Муниципальных Компетенций"}},[t._v("Центр Муниципальных\n                Компетенций")])])}],h=a("bc3a"),g=a.n(h),b="http://panorama.back/api/",_="http://panorama.back/",O=function(t){g.a.defaults.headers.common["Authorization"]=t.token},j=function(t){var e=JSON.parse(t).user.token;e&&(g.a.defaults.headers.common["Authorization"]=e)},C=function(){function t(){Object(o["a"])(this,t)}return Object(s["a"])(t,null,[{key:"notify",value:function(){r["default"].prototype.$notify({classes:"vue-notification-error",title:"Ошибка",text:"При выполнении запроса произошла ошибка"})}},{key:"notifyWithCustomMessage",value:function(t){r["default"].prototype.$notify({classes:"vue-notification-error",title:"Ошибка",text:t})}}]),t}(),S=C,w=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.date=new Date,t.user={email:"",password:""},t.isLoad=!1,t}return Object(u["a"])(e,t),Object(s["a"])(e,[{key:"login",value:function(){var t=this;this.isLoad=!0,g.a.post("".concat(b,"login"),this.user).then((function(e){t.userState.token="Bearer "+e.data.access_token,t.userState.role=e.data.role,O(t.userState),t.getUser(),t.isLoad=!1})).catch((function(e){e.response&&401===e.response.status?S.notifyWithCustomMessage("Аутентификация не удалась: неверное имя пользователя или пароль"):e.response&&e.response.data.msg?S.notifyWithCustomMessage(e.response.data.msg):e.message?S.notifyWithCustomMessage(e.message):S.notifyWithCustomMessage("Аутентификация не удалась: неизвестная ошибка"),t.user.password="",t.isLoad=!1}))}}]),e}(p["f"]);Object(d["a"])([Object(p["e"])()],w.prototype,"date",void 0),Object(d["a"])([Object(p["e"])()],w.prototype,"user",void 0),Object(d["a"])([Object(p["e"])()],w.prototype,"isLoad",void 0),Object(d["a"])([Object(m["c"])("user")],w.prototype,"userState",void 0),Object(d["a"])([m["a"]],w.prototype,"getUser",void 0),w=Object(d["a"])([Object(p["a"])({})],w);var k=w,x=k,E=a("2877"),M=Object(E["a"])(x,f,y,!1,null,null,null),P=M.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-desktop manager"},[a("notifications"),a("header-component"),a("div",{staticClass:"container"},[a("router-view")],1)],1)},R=[],I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"manager"},[a("nav",{staticClass:"navbar navbar-expand-md navbar-dark fixed-top bg-dark nav-backround"},[t._m(0),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarCollapse"}},[a("ul",{staticClass:"navbar-nav mr-auto"},[a("li",{staticClass:"nav-item active"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/",tag:"a"}},[t._v("На главную "),a("span",{staticClass:"sr-only"})])],1),a("li",{staticClass:"nav-item dropdown"},[a("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",id:"navbarDropdownMenuManagerLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("\n                        Управление\n                    ")]),"superadmin"===t.userState.role?a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"navbarDropdownMenuManagerLink"}},[a("router-link",{staticClass:"nav-link dropdown-item",attrs:{to:"/manager/contractors",tag:"a"}},[t._v("Контрагенты\n                        ")]),a("router-link",{staticClass:"nav-link dropdown-item",attrs:{to:"/manager/modules",tag:"a"}},[t._v("Модули\n                        ")]),a("router-link",{staticClass:"nav-link dropdown-item",attrs:{to:"/manager/layers",tag:"a"}},[t._v("Слои")]),a("router-link",{staticClass:"nav-link dropdown-item",attrs:{to:"/manager/gis",tag:"a"}},[t._v("Картография\n                        ")])],1):a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"navbarDropdownMenuManagerLink"}},[a("router-link",{staticClass:"nav-link dropdown-item",attrs:{to:"/manager/contractors/modules",tag:"a"}},[t._v("Модули\n                        ")]),a("router-link",{staticClass:"nav-link dropdown-item",attrs:{to:"/manager/gis",tag:"a"}},[t._v("Картография\n                        ")])],1)]),a("li",{staticClass:"nav-item"},[a("button",{staticClass:"btn btn-link nav-link router-link-active",attrs:{title:"Выйти из Системы"},on:{click:t.logout}},[t._v("Выйти")])])])])])])},F=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarCollapse","aria-controls":"navbarCollapse","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("span",{staticClass:"navbar-toggler-icon"})])}],T=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),e}(p["f"]);Object(d["a"])([Object(m["c"])("user")],T.prototype,"userState",void 0),Object(d["a"])([m["a"]],T.prototype,"logout",void 0),T=Object(d["a"])([Object(p["a"])({})],T);var N=T,A=N,G=Object(E["a"])(A,I,F,!1,null,null,null),B=G.exports,D=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),e}(p["f"]);D=Object(d["a"])([Object(p["a"])({components:{HeaderComponent:B}})],D);var U=D,q=U,V=Object(E["a"])(q,L,R,!1,null,null,null),z=V.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"geom-data-container"},[a("gis-data")],1)},J=[],W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"geom-data manager"},[a("ol-map",{attrs:{editor:!1}}),a("a",{staticClass:"btn-come-back",on:{click:function(e){return t.$router.go(-1)}}},[a("i",{staticClass:"fas fa-arrow-left"}),a("label",[t._v("назад")])]),a("div",{staticClass:"geom-data-list"},[a("ul",{staticClass:"layers-list"},t._l(this.layerState.layers,(function(e,r){return a("li",{key:e.id,staticClass:"layer-item",class:{empty:0===e.elements.length}},[a("span",{staticClass:"layer-item-content"},[a("div",{staticClass:"btn-checked layer-item-select",class:{checked:e.checked},attrs:{disabled:0===e.elements.length},on:{click:function(e){return t.selectLayer(r)}}}),a("label",[t._v(t._s(e.title))]),0!==e.elements.length?a("div",{staticClass:"btn layer-item-hidden",on:{click:function(e){return t.hiddenLayer(r)}}},[e.hidden?a("i",{staticClass:"fas fa-angle-up"}):a("i",{staticClass:"fas fa-angle-down"})]):t._e()]),a("ul",{directives:[{name:"show",rawName:"v-show",value:!e.hidden,expression:"!layer.hidden"}],staticClass:"elements-list"},t._l(e.elements,(function(e,n){return e.geometry?a("li",{key:e.id,staticClass:"element-item"},[a("span",[a("div",{staticClass:"btn-checked element-item-select",class:{checked:e.checked},on:{click:function(e){return t.selectElement(r,n)}}}),a("label",[t._v(t._s(e.title))])])]):t._e()})),0)])})),0)])],1)},Y=[],Z=(a("ac6a"),a("96cf"),a("3b8d")),K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{attrs:{id:"map"}}),a("div",{attrs:{id:"mouse-position"}}),a("div",{attrs:{id:"current-zoom"}},[t._v(t._s(t.mapState.properties.zoom))])])},Q=[],X=(a("ac4d"),a("8a81"),a("64d9")),tt=a("5831"),et=a("3e6b"),at=a("c807"),rt=function(){var t=new tt["a"]({});return new et["a"]({source:t})},nt=function(t,e){var a=new at["a"]({source:t});return a.on("modifyend",e),a},it=function(t,e,a){a=a||"id";var r=t.filter((function(t){return t[a]===e}));return 0!==r.length&&r[0]},ot=function(t,e,a){a=a||"id";for(var r=0;r<t.length;r++)if(t[r][a]===e)return r;return-1},st=(a("8449"),a("6c7b"),a("6b54"),a("8682")),lt=a("83a6"),ct=a("6cbf"),ut=a("ce2c"),dt=a("35d8"),pt=a("8295"),mt=a("6c77"),vt=function(t,e){if(!e)return t;var a=Math.floor(255*e/100).toString(16);return t+(a.length%2?"0"+a:a)},ft=function(t,e){var a={};if(t.stroke&&(a=Object.assign({},{stroke:new st["a"]({color:vt(t.stroke.color,100-t.stroke.opacity),width:t.stroke.width})})),t.fill&&(a=Object.assign({},a,{fill:new lt["a"]({color:vt(t.fill.color,100-t.fill.opacity)})})),"icon"===t.pointType&&t.icon)a=Object.assign({},a,{image:new ct["a"]({src:t.icon.src,anchor:t.icon.anchor,anchorXUnits:"pixels",anchorYUnits:"pixels",opacity:(100-t.icon.opacity)/100,scale:t.icon.scale,rotation:t.icon.rotation*Math.PI/180})});else if(t.shape){var r={fill:new lt["a"]({color:vt(t.shape.fill.color,100-t.shape.fill.opacity)}),stroke:new st["a"]({color:vt(t.shape.stroke.color,100-t.shape.stroke.opacity),width:t.shape.stroke.width}),radius:t.shape.radius};void 0!==t.shape.points&&t.shape.points>10?a=Object.assign({},a,{image:new ut["a"](r)}):void 0!==t.shape.points&&(r=Object.assign({},r,{points:t.shape.points,rotation:t.shape.rotation}),a=Object.assign({},a,{image:new dt["a"](r)}))}if(e){var n={text:e,font:t.font.font,textBaseline:t.font.textBaseline,fill:new lt["a"](t.font.fill)};t.font.stroke&&(n=Object.assign({},n,{stroke:new st["a"](t.font.stroke)})),t.font.offsetY&&(n=Object.assign({},n,{offsetY:t.font.offsetY})),t.font.placement&&(n=Object.assign({},n,{placement:t.font.placement})),a=Object.assign({},a,{text:new pt["a"](n)})}return new mt["c"](a)},yt=function(t,e,a,r){var n=new X["a"],i=n.readFeature(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});if(r){var o=ft(r,a.title);i.setStyle(o)}return i.setProperties(a),i.setId(t),i},ht=function(t,e){var a=ft(e,t.get("title"));t.setStyle(a)},gt=a("5eee"),bt=a("a2c7"),_t=a("480c"),Ot=a("d0e9"),jt=a("2ce2"),Ct=a("ac29"),St=a("020f"),wt=a("a568"),kt=a("256f"),xt=a("8f3a"),Et=function(t,e,a,r){var n=new St["a"]({coordinateFormat:Object(wt["c"])(4),projection:"EPSG:4326",className:"map-mouse-position",target:document.getElementById("mouse-position"),undefinedHTML:"&nbsp;"});return new gt["a"]({layers:[new _t["a"]({source:new Ot["a"]})],target:r||"map",controls:Object(xt["a"])().extend([n]),view:new bt["a"]({center:Object(kt["i"])([t,e],"EPSG:4326","EPSG:3857"),zoom:a})})},Mt=function(t){var e=new jt["a"];return e.on("select",t),e},$t=function(t,e){t.getSource().forEachFeature((function(t){var a=ot(e,t.get("layer_id"));-1!==a&&ht(t,e[a])}))},Pt=function(t,e,a){if(""!==t){var r=new Ct["a"]({source:e.getSource(),type:t});return r.on("drawend",a),r}},Lt=function(t,e){var a=e.getGeometry().getExtent();a[0]===a[2]&&a[1]===a[3]?t.getView().animate({center:[(a[0]+a[2])/2,(a[1]+a[3])/2],duration:300}):t.getView().fit(a,{padding:[0,180,0,0],minResolution:5,duration:300})},Rt=function(t,e){if(0!==e.length){var a=e[0].getGeometry().getExtent();e.forEach((function(t){var e=t.getGeometry().getExtent();a[0]>e[0]&&(a[0]=e[0]),a[1]>e[1]&&(a[1]=e[1]),a[2]<e[2]&&(a[2]=e[2]),a[3]<e[3]&&(a[3]=e[3])})),a[0]===a[2]&&a[1]===a[3]?t.getView().animate({center:[(a[0]+a[2])/2,(a[1]+a[3])/2],duration:300}):t.getView().fit(a,{padding:[0,180,0,0],minResolution:5,duration:300})}},It=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(s["a"])(e,[{key:"selected",value:function(t){if(0!==t.selected.length)return t.selected[0].getProperties()}},{key:"modifyend",value:function(t){var e=t.features.getArray(),a=!0,r=!1,n=void 0;try{for(var i,o=e[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value,l=s.getRevision();if(l>3)return{properties:s.getProperties(),geom:(new X["a"]).writeFeature(s,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"})}}}catch(c){r=!0,n=c}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}}},{key:"drawend",value:function(t){return{properties:t.feature.getProperties(),geom:(new X["a"]).writeFeature(t.feature,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"})}}},{key:"onChangeInteractionDrawMode",value:function(){this.editor&&(this.createInteractions(),this.mapState.map.render())}},{key:"mounted",value:function(){this.init()}},{key:"init",value:function(){var t=this,e=Et(this.mapState.properties.longitude,this.mapState.properties.latitude,this.mapState.properties.zoom,this.mapState.properties.selectorMapContainer);e.addInteraction(Mt(this.selected)),e.on("moveend",(function(){t.getMapCenter()}));var a=rt();if(e.addLayer(a),this.editor){var r=nt(a.getSource(),this.modifyend);e.addInteraction(r)}this.createMap({map:e,layer:a})}},{key:"createInteractions",value:function(){this.removeInteractions(),""!==this.mapState.interaction.draw.mode&&(this.mapState.interaction.draw.layer||(this.mapState.interaction.draw.layer=rt(),this.mapState.map.addLayer(this.mapState.interaction.draw.layer)),this.mapState.interaction.draw.draw=Pt(this.mapState.interaction.draw.mode,this.mapState.interaction.draw.layer,this.drawend),this.mapState.map.addInteraction(this.mapState.interaction.draw.draw))}},{key:"removeInteractions",value:function(){!1!==this.mapState.interaction.draw.draw&&(this.mapState.map.removeInteraction(this.mapState.interaction.draw.draw),this.mapState.interaction.draw.draw=!1)}}]),e}(p["f"]);Object(d["a"])([Object(m["c"])("map")],It.prototype,"mapState",void 0),Object(d["a"])([Object(p["d"])(Boolean)],It.prototype,"editor",void 0),Object(d["a"])([m["a"]],It.prototype,"createMap",void 0),Object(d["a"])([m["a"]],It.prototype,"getMapCenter",void 0),Object(d["a"])([Object(p["b"])()],It.prototype,"selected",null),Object(d["a"])([Object(p["b"])()],It.prototype,"modifyend",null),Object(d["a"])([Object(p["b"])()],It.prototype,"drawend",null),Object(d["a"])([Object(p["g"])("mapState.interaction.draw.mode")],It.prototype,"onChangeInteractionDrawMode",null),It=Object(d["a"])([Object(p["a"])({components:{}})],It);var Ft=It,Tt=Ft,Nt=Object(E["a"])(Tt,K,Q,!1,null,null,null),At=Nt.exports,Gt=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(s["a"])(e,[{key:"created",value:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.gisGetLayers();case 2:this.setMapStyles({styles:this.layerState.styles});case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"selectElement",value:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=this.layerState.layers[e].elements,r[a].checked=!r[a].checked,this.layerState.layers[e].elements=r.slice(0),r[a].checked?(this.addFeatureToMap({id:r[a].id,layer_id:this.layerState.layers[e].id,geom:r[a].geometry,property:this.getPropertiesElement(r[a])}),this.focusOfFeature({id:r[a].id})):this.removeFeatureFromMap({id:r[a].id});case 4:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"selectLayer",value:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e){var a,r,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=this.layerState.layers,a[e].checked=!a[e].checked,a[e].checked?(a[e].elements.forEach((function(t){t.checked=a[e].checked})),r=[],this.layerState.layers[e].elements.forEach((function(t){n.addFeatureToMap({id:t.id,layer_id:n.layerState.layers[e].id,geom:t.geometry,property:n.getPropertiesElement(t)}),r.push(t.id)})),this.focusOfFeatures({ids:r})):(this.layerState.layers[e].elements.forEach((function(t){n.removeFeatureFromMap({id:t.id})})),a[e].elements.forEach((function(t){t.checked=a[e].checked}))),this.layerState.layers=a.slice(0);case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"hiddenLayer",value:function(t){var e=this.layerState.layers;e[t].hidden=!e[t].hidden,this.layerState.layers=e.slice(0)}},{key:"getPropertiesElement",value:function(t){return{id:t.id,title:t.title,description:t.description,lenght:t.lenght,area:t.area,perimeter:t.perimeter}}}]),e}(p["f"]);Object(d["a"])([Object(m["c"])("gisLayer")],Gt.prototype,"layerState",void 0),Object(d["a"])([Object(m["c"])("gisElement")],Gt.prototype,"elementState",void 0),Object(d["a"])([m["a"]],Gt.prototype,"gisGetLayers",void 0),Object(d["a"])([m["a"]],Gt.prototype,"selectedLayer",void 0),Object(d["a"])([m["a"]],Gt.prototype,"unselectedLayer",void 0),Object(d["a"])([m["a"]],Gt.prototype,"setCurrentIndex",void 0),Object(d["a"])([m["a"]],Gt.prototype,"unsetCurrentIndex",void 0),Object(d["a"])([m["a"]],Gt.prototype,"setSingleElement",void 0),Object(d["a"])([m["a"]],Gt.prototype,"unsetSingleElement",void 0),Object(d["a"])([m["a"]],Gt.prototype,"selectedElement",void 0),Object(d["a"])([m["a"]],Gt.prototype,"setMapStyles",void 0),Object(d["a"])([m["a"]],Gt.prototype,"addFeatureToMap",void 0),Object(d["a"])([m["a"]],Gt.prototype,"removeFeatureFromMap",void 0),Object(d["a"])([m["a"]],Gt.prototype,"focusOfFeature",void 0),Object(d["a"])([m["a"]],Gt.prototype,"focusOfFeatures",void 0),Gt=Object(d["a"])([Object(p["a"])({components:{OlMap:At}})],Gt);var Bt=Gt,Dt=Bt,Ut=Object(E["a"])(Dt,W,Y,!1,null,null,null),qt=Ut.exports,Vt=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),e}(p["f"]);Vt=Object(d["a"])([Object(p["a"])({components:{GisData:qt}})],Vt);var zt=Vt,Ht=zt,Jt=Object(E["a"])(Ht,H,J,!1,null,null,null),Wt=Jt.exports,Yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-modules-container content"},[a("h1",[t._v("Панель редактирования данных")]),a("div",{staticClass:"grid-data"},[t._m(0),t._l(t.moduleState.infomodules,(function(e){return a("div",t._l(e.layers,(function(r){return a("div",{staticClass:"row row-body"},[a("div",{staticClass:"col-7"},[a("label",{staticClass:"title"},[t._v(t._s(r.title))]),a("label",{staticClass:"description",domProps:{innerHTML:t._s(r.description)}}),a("div",{staticClass:"actions"},[a("button",{staticClass:"btn-info",on:{click:function(e){return t.showLayer(r)}}},[t._v("Редактор данных")]),a("button",{staticClass:"btn-info",on:{click:function(e){return t.showMap(r)}}},[t._v("Картографический редактор")])])]),a("div",{staticClass:"col-5"},[a("label",{staticClass:"title"},[t._v(t._s(e.title))]),a("label",{staticClass:"description",domProps:{innerHTML:t._s(e.description)}})])])})),0)})),t._m(1)],2)])},Zt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-header"},[a("div",{staticClass:"col-7"},[t._v("Доступные данные")]),a("div",{staticClass:"col-5"},[t._v("Наименование модуля")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-footer"},[a("div",{staticClass:"col-7"},[t._v("Доступные данные")]),a("div",{staticClass:"col-5"},[t._v("Наименование модуля")])])}],Kt=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(s["a"])(e,[{key:"created",value:function(){this.getModules()}},{key:"showLayer",value:function(t){this.$router.push("/manager/information/".concat(t.id))}},{key:"showMap",value:function(t){this.$router.push("/manager/gis")}}]),e}(p["f"]);Object(d["a"])([Object(m["a"])("getModules")],Kt.prototype,"getModules",void 0),Object(d["a"])([Object(m["c"])("infomodule")],Kt.prototype,"moduleState",void 0),Kt=Object(d["a"])([p["a"]],Kt);var Qt=Kt,Xt=Qt,te=Object(E["a"])(Xt,Yt,Zt,!1,null,null,null),ee=te.exports,ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-modules-container content"},[a("h1",[t._v('Редактор открытых данных слоя "'+t._s(t.layerState.layer.title)+'"')]),a("button",{staticClass:"btn btn-info",attrs:{"data-toggle":"modal","data-target":"#singleInformationModal"},on:{click:t.createElement}},[a("i",{staticClass:"fas fa-plus-circle"}),t._v("\n        Создать новый элемент\n    ")]),a("button",{staticClass:"btn btn-info btn-right",on:{click:function(e){return t.$router.go(-1)}}},[a("i",{staticClass:"fas fa-arrow-circle-left"}),t._v("\n        Назад\n    ")]),a("div",{staticClass:"grid-data"},[t._m(0),t._l(t.elementState.elements,(function(e){return a("div",{staticClass:"row row-body"},[a("div",{staticClass:"col-6"},[a("label",{staticClass:"title"},[t._v(t._s(e.title))]),a("label",{staticClass:"description"}),a("div",{staticClass:"actions"},[a("button",{staticClass:"btn-info",attrs:{"data-toggle":"modal","data-target":"#singleInformationModal"},on:{click:function(a){return t.showElementInfo(e)}}},[t._v("Изменить")]),a("button",{staticClass:"btn-danger",attrs:{"data-toggle":"modal","data-target":"#sureModal"},on:{click:function(a){return t.setSureModalContent(e)}}},[t._v("Удалить")])])]),a("div",{staticClass:"col-6"},[a("label",{domProps:{innerHTML:t._s(e.description)}})])])})),t._m(1)],2),a("single-information"),a("sure-modal")],1)},re=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-header"},[a("div",{staticClass:"col-6"},[t._v("Наименование")]),a("div",{staticClass:"col-6"},[t._v("Описание")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-footer"},[a("div",{staticClass:"col-6"},[t._v("Наименование")]),a("div",{staticClass:"col-6"},[t._v("Описание")])])}],ne=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"singleInformationModal",tabindex:"-1",role:"dialog","aria-labelledby":"singleInformationModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"singleInformationModalLabel"}},[0===t.elementState.element.id?a("span",[t._v("Создание нового элемента")]):a("span",[t._v('Изменение элемента "'+t._s(t.elementState.element.title)+'"')])]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("additional-group-tabs"),a("additional-information")],1),a("div",{staticClass:"modal-footer"},[t.fieldsNonCompleteness?a("span",{staticClass:"validation-error",staticStyle:{color:"#ff0000","font-size":"10pt"}},[t._v("Проверьте заполненность полей во всех вкладках")]):t._e(),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.validateAndUpdateElement}},[t._v("\n                    Сохранить\n                ")]),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Закрыть")])])])])])},ie=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],oe=a("5873"),se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab-content",attrs:{id:"mainContent"}},[a("div",{staticClass:"tab-pane fade show active",attrs:{id:"main",role:"tabpanel","aria-labelledby":"main-tab"}},[a("form",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleInformationTitle"}},[t._v("Наименование *")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.elementState.element.title,expression:"elementState.element.title"}],staticClass:"form-control",attrs:{type:"text",id:"singleInformationTitle",required:"",placeholder:"Наименование элемента"},domProps:{value:t.elementState.element.title},on:{input:function(e){e.target.composing||t.$set(t.elementState.element,"title",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleInformationDescription"}},[t._v("Описание")]),a("vue-editor",{ref:"wysiwygContents",attrs:{id:"singleInformationDescription",editorToolbar:t.toolbar},model:{value:t.elementState.element.description,callback:function(e){t.$set(t.elementState.element,"description",e)},expression:"elementState.element.description"}})],1),t.style.list&&t.style.list.hasList?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"nextElementId"}},[t._v("Следующий элемент")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.elementState.element.element_next_id,expression:"elementState.element.element_next_id"}],staticClass:"form-control",attrs:{id:"nextElementId"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.elementState.element,"element_next_id",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("-")]),t._l(t.elementState.elements,(function(e){return t.elementState.element.id!==e.id?a("option",{attrs:{title:e.description},domProps:{value:e.id}},[t._v("\n                        "+t._s(e.title)+"\n                    ")]):t._e()}))],2)]):t._e(),t.style.list&&t.style.list.hasList&&t.getPrevElement()?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"prevElementId"}},[t._v("Предыдущий элемент")]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"prevElementId",readonly:""},domProps:{value:t.getPrevElement().title}})]):t._e()])]),t._l(t.constructorState.tableFields,(function(e){return t.constructorState.isTableExists?a("div",{staticClass:"tab-pane addition-information-tab fade",attrs:{role:"tabpanel","aria-labelledby":e.group+"-tab",id:e.group}},t._l(e.columns,(function(e){return a("div",{staticClass:"form-group"},[a("label",{attrs:{for:e.tech_title}},[t._v(t._s(e.title)+"\n                "),e.required?a("span",[t._v("*")]):t._e(),a("span")]),a("resolved-field",{attrs:{field:e}})],1)})),0):t._e()}))],2)},le=[],ce=(a("7514"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("text-field",{attrs:{field:t.field}}),a("number-field",{attrs:{field:t.field}}),a("long-text-field",{attrs:{field:t.field}}),a("date-field",{attrs:{field:t.field}}),a("one-from-many-field",{attrs:{field:t.field}}),a("many-from-many-field",{attrs:{field:t.field}}),a("doc-field",{attrs:{field:t.field}})],1)}),ue=[],de=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",["text_field"===t.field.type&&!1===t.field.required?a("input",{directives:[{name:"model",rawName:"v-model",value:t.field.value,expression:"field.value"}],staticClass:"form-control",attrs:{type:"text",id:t.field.tech_title,placeholder:t.field.title},domProps:{value:t.field.value},on:{input:function(e){e.target.composing||t.$set(t.field,"value",e.target.value)}}}):t._e(),"text_field"===t.field.type&&t.field.required?a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.field.value,expression:"field.value"}],staticClass:"form-control",attrs:{type:"text",id:t.field.tech_title,"data-vv-validate-on":"change|blur",name:t.field.title,placeholder:t.field.title},domProps:{value:t.field.value},on:{input:function(e){e.target.composing||t.$set(t.field,"value",e.target.value)}}}):t._e(),a("span",{staticClass:"validation-error"},[t._v(t._s(t.errors.first(t.field.title)))])])},pe=[],me=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),e}(p["f"]);Object(d["a"])([Object(p["d"])()],me.prototype,"field",void 0),Object(d["a"])([Object(p["c"])("validator")],me.prototype,"$validator",void 0),me=Object(d["a"])([p["a"]],me);var ve=me,fe=ve,ye=Object(E["a"])(fe,de,pe,!1,null,null,null),he=ye.exports,ge=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",["long_text_field"===t.field.type&&!1===t.field.required?a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.field.value,expression:"field.value"}],staticClass:"form-control",attrs:{id:t.field.tech_title,rows:"3",name:t.field.title+" "},domProps:{value:t.field.value},on:{input:function(e){e.target.composing||t.$set(t.field,"value",e.target.value)}}}):t._e(),"long_text_field"===t.field.type&&t.field.required?a("textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.field.value,expression:"field.value"}],staticClass:"form-control",attrs:{id:t.field.tech_title,"data-vv-validate-on":"change|blur",rows:"3",name:t.field.title+" "},domProps:{value:t.field.value},on:{input:function(e){e.target.composing||t.$set(t.field,"value",e.target.value)}}}):t._e(),a("span",{staticClass:"validation-error"},[t._v(t._s(t.errors.first(t.field.title+" ")))])])},be=[],_e=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),e}(p["f"]);Object(d["a"])([Object(p["d"])()],_e.prototype,"field",void 0),_e=Object(d["a"])([p["a"]],_e);var Oe=_e,je=Oe,Ce=Object(E["a"])(je,ge,be,!1,null,null,null),Se=Ce.exports,we=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",["number_field"===t.field.type&&!1===t.field.required?a("input",{directives:[{name:"model",rawName:"v-model",value:t.field.value,expression:"field.value"}],staticClass:"form-control",attrs:{type:"number",id:t.field.tech_title,placeholder:t.field.title,name:"числовое  "+t.field.title},domProps:{value:t.field.value},on:{input:function(e){e.target.composing||t.$set(t.field,"value",e.target.value)}}}):t._e(),"number_field"===t.field.type&&t.field.required?a("input",{directives:[{name:"model",rawName:"v-model",value:t.field.value,expression:"field.value"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"number",id:t.field.tech_title,"data-vv-validate-on":"change|blur",placeholder:t.field.title,name:"числовое  "+t.field.title},domProps:{value:t.field.value},on:{input:function(e){e.target.composing||t.$set(t.field,"value",e.target.value)}}}):t._e(),a("span",{staticClass:"validation-error"},[t._v(t._s(t.errors.first("числовое  "+t.field.title)))])])},ke=[],xe=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),e}(p["f"]);Object(d["a"])([Object(p["d"])()],xe.prototype,"field",void 0),xe=Object(d["a"])([p["a"]],xe);var Ee=xe,Me=Ee,$e=Object(E["a"])(Me,we,ke,!1,null,null,null),Pe=$e.exports,Le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",["date_field"===t.field.type?a("datepicker",{attrs:{placeholder:"Выбрать дату",language:t.ru,"input-class":"form-control"},model:{value:t.resolvedDate,callback:function(e){t.resolvedDate=e},expression:"resolvedDate"}}):t._e()],1)},Re=[],Ie=a("fa33"),Fe=a("2430"),Te=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.ru=Fe["ru"],t}return Object(u["a"])(e,t),Object(s["a"])(e,[{key:"resolvedDate",get:function(){return this.field.value?this.field.value:(this.field.value=new Date,new Date)},set:function(t){this.field.value=t}}]),e}(p["f"]);Object(d["a"])([Object(p["d"])()],Te.prototype,"field",void 0),Object(d["a"])([Object(p["e"])()],Te.prototype,"ru",void 0),Te=Object(d["a"])([Object(p["a"])({components:{Datepicker:Ie["a"]}})],Te);var Ne=Te,Ae=Ne,Ge=Object(E["a"])(Ae,Le,Re,!1,null,null,null),Be=Ge.exports,De=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._l(t.field.enums,(function(e){return"one_from_many_field"===t.field.type?a("div",{staticClass:"one-from-many-div"},[a("label",{attrs:{for:e}},[t._v(t._s(e))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.resolvedValue,expression:"resolvedValue"}],staticClass:"form-control",attrs:{type:"radio",id:e},domProps:{value:e,checked:t._q(t.resolvedValue,e)},on:{change:function(a){t.resolvedValue=e}}})]):t._e()})),0)},Ue=[],qe=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(s["a"])(e,[{key:"resolvedValue",get:function(){return this.field.value?this.field.value:(this.field.value=this.field.enums[0],this.field.enums[0])},set:function(t){this.field.value=t}}]),e}(p["f"]);Object(d["a"])([Object(p["d"])()],qe.prototype,"field",void 0),qe=Object(d["a"])([p["a"]],qe);var Ve=qe,ze=Ve,He=Object(E["a"])(ze,De,Ue,!1,null,null,null),Je=He.exports,We=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._l(t.field.enums,(function(e){return"many_from_many_field"===t.field.type?a("div",{staticClass:"many-from-many-div"},[a("label",{attrs:{for:e}},[t._v(t._s(e))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.resolvedValue,expression:"resolvedValue"}],staticClass:"form-control",attrs:{type:"checkbox",id:e},domProps:{value:e,checked:Array.isArray(t.resolvedValue)?t._i(t.resolvedValue,e)>-1:t.resolvedValue},on:{change:function(a){var r=t.resolvedValue,n=a.target,i=!!n.checked;if(Array.isArray(r)){var o=e,s=t._i(r,o);n.checked?s<0&&(t.resolvedValue=r.concat([o])):s>-1&&(t.resolvedValue=r.slice(0,s).concat(r.slice(s+1)))}else t.resolvedValue=i}}})]):t._e()})),0)},Ye=[],Ze=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(s["a"])(e,[{key:"resolvedValue",get:function(){return this.field.value&&null!==this.field.value?this.field.value:(this.field.value=[],[])},set:function(t){this.field.value=t}}]),e}(p["f"]);Object(d["a"])([Object(p["d"])()],Ze.prototype,"field",void 0),Ze=Object(d["a"])([p["a"]],Ze);var Ke=Ze,Qe=Ke,Xe=Object(E["a"])(Qe,We,Ye,!1,null,null,null),ta=Xe.exports,ea=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("input",{ref:"file",attrs:{id:"file",type:"file"},on:{change:function(e){return t.processFile()}}}),a("span",{on:{click:t.attachFile}},[t._v(t._s(t.fileName))])])},aa=[],ra=(a("7f7f"),function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(s["a"])(e,[{key:"processFile",value:function(t){this.file=this.$refs.file.files[0],this.fileName=t.target.files[0].name}},{key:"attachFile",value:function(){document.getElementById("file").click()}}]),e}(p["f"]));Object(d["a"])([Object(p["d"])()],ra.prototype,"field",void 0),Object(d["a"])([Object(p["e"])()],ra.prototype,"file",void 0),Object(d["a"])([Object(p["e"])()],ra.prototype,"fileName",void 0),ra=Object(d["a"])([p["a"]],ra);var na=ra,ia=na,oa=Object(E["a"])(ia,ea,aa,!1,null,null,null),sa=oa.exports,la=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),e}(p["f"]);Object(d["a"])([Object(p["d"])()],la.prototype,"field",void 0),la=Object(d["a"])([Object(p["a"])({components:{ManyFromManyField:ta,OneFromManyField:Je,TextField:he,LongTextField:Se,NumberField:Pe,DateField:Be,DocField:sa}})],la);var ca=la,ua=ca,da=Object(E["a"])(ua,ce,ue,!1,null,null,null),pa=da.exports,ma=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.style={},t.toolbar=[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{align:[]}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["clean"]],t}return Object(u["a"])(e,t),Object(s["a"])(e,[{key:"created",value:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getLayerById({id:this.$route.params.id});case 2:this.style=Object.assign({},this.layerState.layer.style);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getPrevElement",value:function(){var t=this;return this.elementState.elements.find((function(e){return e.element_next_id===t.elementState.element.id}))}}]),e}(p["f"]);Object(d["a"])([m["a"]],ma.prototype,"getLayerById",void 0),Object(d["a"])([Object(m["c"])("constructor")],ma.prototype,"constructorState",void 0),Object(d["a"])([Object(m["c"])("managerLayer")],ma.prototype,"layerState",void 0),Object(d["a"])([Object(m["c"])("managerElement")],ma.prototype,"elementState",void 0),Object(d["a"])([Object(p["e"])("style")],ma.prototype,"style",void 0),Object(d["a"])([Object(p["e"])()],ma.prototype,"toolbar",void 0),ma=Object(d["a"])([Object(p["a"])({components:{ResolvedField:pa,VueEditor:oe["a"]}})],ma);var va=ma,fa=va,ya=Object(E["a"])(fa,se,le,!1,null,null,null),ha=ya.exports,ga=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"nav nav-tabs",attrs:{id:"tabs",role:"tablist"}},[t._m(0),t._l(t.constructorState.tableFields,(function(e){return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{id:e.group+"-tab","data-toggle":"tab",href:"#"+e.group,role:"tab","aria-controls":e.group,"aria-selected":"false"}},[t._v(t._s(e.group))])])}))],2)},ba=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link active",attrs:{id:"main-tab","data-toggle":"tab",href:"#main",role:"tab","aria-controls":"main","aria-selected":"true"}},[t._v("Главная")])])}],_a=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),e}(p["f"]);Object(d["a"])([Object(m["c"])("constructor")],_a.prototype,"constructorState",void 0),_a=Object(d["a"])([p["a"]],_a);var Oa=_a,ja=Oa,Ca=Object(E["a"])(ja,ga,ba,!1,null,null,null),Sa=Ca.exports,wa=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.$validator=t.$validator,t.fieldsNonCompleteness=!1,t}return Object(u["a"])(e,t),Object(s["a"])(e,[{key:"validateAndUpdateElement",value:function(){var t=this;this.$validator.validateAll().then((function(e){e?(t.fieldsNonCompleteness=!1,t.managerUpdateElement(),$("#singleInformationModal").modal("hide")):t.fieldsNonCompleteness=!0}))}}]),e}(p["f"]);Object(d["a"])([Object(p["e"])("validator")],wa.prototype,"$validator",void 0),Object(d["a"])([m["a"]],wa.prototype,"managerUpdateElement",void 0),Object(d["a"])([Object(m["c"])("managerElement")],wa.prototype,"elementState",void 0),Object(d["a"])([Object(p["e"])()],wa.prototype,"fieldsNonCompleteness",void 0),wa=Object(d["a"])([Object(p["a"])({components:{AdditionalInformation:ha,AdditionalGroupTabs:Sa,VueEditor:oe["a"]}})],wa);var ka=wa,xa=ka,Ea=Object(E["a"])(xa,ne,ie,!1,null,null,null),Ma=Ea.exports,$a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"sureModal",tabindex:"-1",role:"dialog","aria-labelledby":"sureModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"sureModalLabel"}},[t._v(t._s(t.sureModalState.modal.title))]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("p",[t._v(t._s(t.sureModalState.modal.text))])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.sureModalState.modal.action}},[t._v(t._s(t.sureModalState.modal.buttonOk))]),a("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"}},[t._v(t._s(t.sureModalState.modal.buttonCansel))])])])])])},Pa=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],La=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),e}(p["f"]);Object(d["a"])([Object(m["c"])("sureModal")],La.prototype,"sureModalState",void 0),La=Object(d["a"])([Object(p["a"])({})],La);var Ra=La,Ia=Ra,Fa=Object(E["a"])(Ia,$a,Pa,!1,null,null,null),Ta=Fa.exports,Na=function(t){return t>=1e3?(t/=1e3,"".concat(t.toFixed(2)," км")):"".concat(t.toFixed(2)," м")},Aa=function(t){return t},Ga=function(t){if(t>=1e6){var e=(t/1e6).toFixed(2),a=(t/1e3).toFixed(2);return"".concat(e," км<sup>2</sup> (").concat(a," Га)")}var r=(t/1).toFixed(2),n=(t/1e3).toFixed(2);return"".concat(r," м<sup>2</sup> (").concat(n," Га)")},Ba=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(s["a"])(e,[{key:"created",value:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getLayerById({id:this.$route.params.id});case 2:return this.managerGetElements({layerId:this.$route.params.id}),t.next=5,this.getConstructorByLayer({layerId:this.$route.params.id});case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"setSureModalContent",value:function(t){var e=this;this.setSureModal({title:"Удалить элемент?",text:'Вы уверены, что хотите удалить элемент "'.concat(t.title,'" из системы?'),action:function(){var a=Object(Z["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.managerSetSingleElement(t),a.next=3,e.managerDeleteElement();case 3:e.managerUnsetSingleElement({layerId:e.$route.params.id});case 4:case"end":return a.stop()}}),a)})));function r(){return a.apply(this,arguments)}return r}()})}},{key:"createElement",value:function(){this.managerUnsetSingleElement({layerId:this.$route.params.id}),this.unsetAdditionalInfoValues(),this.getAdditionalData({layerId:this.$route.params.id})}},{key:"showElementInfo",value:function(t){this.constructorState.element=t,this.getAdditionalData({layerId:this.layerState.layer.id}),this.managerSetSingleElement(t)}},{key:"setLength",value:function(t){return Na(t)}},{key:"setPerimeter",value:function(t){return Aa(t)}},{key:"setArea",value:function(t){return Ga(t)}}]),e}(p["f"]);Object(d["a"])([m["a"]],Ba.prototype,"setSureModal",void 0),Object(d["a"])([m["a"]],Ba.prototype,"getLayerById",void 0),Object(d["a"])([m["a"]],Ba.prototype,"managerGetElements",void 0),Object(d["a"])([m["a"]],Ba.prototype,"managerSetSingleElement",void 0),Object(d["a"])([m["a"]],Ba.prototype,"getConstructorByLayer",void 0),Object(d["a"])([m["a"]],Ba.prototype,"getAdditionalData",void 0),Object(d["a"])([m["a"]],Ba.prototype,"managerUnsetSingleElement",void 0),Object(d["a"])([m["a"]],Ba.prototype,"managerDeleteElement",void 0),Object(d["a"])([m["b"]],Ba.prototype,"unsetAdditionalInfoValues",void 0),Object(d["a"])([Object(m["c"])("managerLayer")],Ba.prototype,"layerState",void 0),Object(d["a"])([Object(m["c"])("managerElement")],Ba.prototype,"elementState",void 0),Object(d["a"])([Object(m["c"])("constructor")],Ba.prototype,"constructorState",void 0),Ba=Object(d["a"])([Object(p["a"])({components:{SingleInformation:Ma,SureModal:Ta}})],Ba);var Da=Ba,Ua=Da,qa=Object(E["a"])(Ua,ae,re,!1,null,null,null),Va=qa.exports,za=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-modules-container content"},[a("h1",[t._v("Справочник модулей")]),a("button",{staticClass:"btn btn-info",attrs:{"data-toggle":"modal","data-target":"#singleModuleModal"},on:{click:t.unsetSingleModule}},[a("i",{staticClass:"fas fa-plus-circle"}),t._v("\n        Создать новый\n    ")]),a("div",{staticClass:"grid-data"},[t._m(0),t._l(t.moduleState.modules,(function(e){return a("div",{staticClass:"row row-body"},[a("div",{staticClass:"col-6"},[a("label",{staticClass:"title"},[t._v(t._s(e.title))]),a("label",{staticClass:"description",domProps:{innerHTML:t._s(e.description)}}),a("div",{staticClass:"actions"},[a("button",{staticClass:"btn-info",attrs:{"data-toggle":"modal","data-target":"#singleModuleModal"},on:{click:function(a){return t.setSingleModule(e)}}},[t._v("Изменить")]),a("button",{staticClass:"btn-danger",attrs:{"data-toggle":"modal","data-target":"#sureModal"},on:{click:function(a){return t.setSureModalContent(e)}}},[t._v("Удалить")])])]),a("div",{staticClass:"col-6"},[t._l(e.layers,(function(e,r){return r<=2?a("label",[t._v(t._s(e.title))]):t._e()})),e.layers.length>3?a("label",[t._v("... (всего "+t._s(e.layers.length)+")")]):t._e()],2)])})),t._m(1)],2),a("single-module"),a("sure-modal")],1)},Ha=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-header"},[a("div",{staticClass:"col-6"},[t._v("Наименование")]),a("div",{staticClass:"col-6"},[t._v("Слои")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-footer"},[a("div",{staticClass:"col-6"},[t._v("Наименование")]),a("div",{staticClass:"col-6"},[t._v("Слои")])])}],Ja=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"singleModuleModal",tabindex:"-1",role:"dialog","aria-labelledby":"singleModuleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"singleModuleModalLabel"}},[0===t.moduleState.module.id?a("span",[t._v("Создание нового модуля")]):a("span",[t._v('Изменение модуля "'+t._s(t.moduleState.module.title)+'"')])]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleModuleTitle"}},[t._v("Наименование *")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.moduleState.module.title,expression:"moduleState.module.title"}],staticClass:"form-control",attrs:{type:"text",id:"singleModuleTitle",required:"",placeholder:"Наименование модуля"},domProps:{value:t.moduleState.module.title},on:{input:function(e){e.target.composing||t.$set(t.moduleState.module,"title",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleModuleDescription"}},[t._v("Описание")]),a("vue-editor",{ref:"wysiwygContents",attrs:{id:"singleModuleDescription",editorToolbar:t.toolbar},model:{value:t.moduleState.module.description,callback:function(e){t.$set(t.moduleState.module,"description",e)},expression:"moduleState.module.description"}})],1)])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.updateModule}},[t._v("Сохранить")]),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Закрыть")])])])])])},Wa=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],Ya=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.toolbar=[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{align:[]}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["clean"]],t}return Object(u["a"])(e,t),e}(p["f"]);Object(d["a"])([m["a"]],Ya.prototype,"updateModule",void 0),Object(d["a"])([Object(m["c"])("managerModule")],Ya.prototype,"moduleState",void 0),Object(d["a"])([Object(p["e"])()],Ya.prototype,"toolbar",void 0),Ya=Object(d["a"])([Object(p["a"])({components:{VueEditor:oe["a"]}})],Ya);var Za=Ya,Ka=Za,Qa=Object(E["a"])(Ka,Ja,Wa,!1,null,null,null),Xa=Qa.exports,tr=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(s["a"])(e,[{key:"created",value:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.managerGetModules();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"setSureModalContent",value:function(t){var e=this;this.setSureModal({title:"Удалить модуль?",text:'Вы уверены, что хотите удалить модуль "'.concat(t.title,'" из системы?'),action:function(){var a=Object(Z["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.setSingleModule(t),a.next=3,e.deleteModule();case 3:e.unsetSingleModule();case 4:case"end":return a.stop()}}),a)})));function r(){return a.apply(this,arguments)}return r}()})}}]),e}(p["f"]);Object(d["a"])([m["a"]],tr.prototype,"managerGetModules",void 0),Object(d["a"])([m["a"]],tr.prototype,"setSureModal",void 0),Object(d["a"])([m["a"]],tr.prototype,"deleteModule",void 0),Object(d["a"])([m["a"]],tr.prototype,"setSingleModule",void 0),Object(d["a"])([m["a"]],tr.prototype,"unsetSingleModule",void 0),Object(d["a"])([Object(m["c"])("managerModule")],tr.prototype,"moduleState",void 0),tr=Object(d["a"])([Object(p["a"])({components:{SingleModule:Xa,SureModal:Ta}})],tr);var er=tr,ar=er,rr=Object(E["a"])(ar,za,Ha,!1,null,null,null),nr=rr.exports,ir=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-geom-data-container"},[a("gis-data-editor")],1)},or=[],sr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"geom-data manager"},[a("ol-map",{attrs:{editor:!0},on:{modifyend:t.onModifyend,drawend:t.onDrawend}}),a("a",{staticClass:"btn-come-back",on:{click:function(e){return t.$router.go(-1)}}},[a("i",{staticClass:"fas fa-arrow-left"}),a("label",[t._v("назад")])]),a("div",{staticClass:"geom-data-list"},[a("h2",[t._v("Картографические слои")]),a("ul",{staticClass:"layers-list"},t._l(this.layerState.layers,(function(e,r){return a("li",{key:e.id,staticClass:"layer-item",class:{empty:0===e.elements.length}},[a("span",{staticClass:"layer-item-content"},[a("div",{staticClass:"btn-checked layer-item-select",class:{checked:e.checked},attrs:{disabled:0===e.elements.length},on:{click:function(e){return t.selectLayer(r)}}}),a("label",[t._v(t._s(e.title))]),0!==e.elements.length?a("div",{staticClass:"btn layer-item-hidden",on:{click:function(e){return t.hiddenLayer(r)}}},[e.hidden?a("i",{staticClass:"fas fa-angle-up"}):a("i",{staticClass:"fas fa-angle-down"})]):t._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.hidden,expression:"!layer.hidden"}],staticClass:"btn btn-action btn-add-element",class:{empty:0===e.elements.length},attrs:{title:"Создать элемент"},on:{click:function(e){return t.createElement(r)}}},[a("i",{staticClass:"fas fa-plus-circle"})])]),a("ul",{directives:[{name:"show",rawName:"v-show",value:!e.hidden,expression:"!layer.hidden"}],staticClass:"elements-list"},t._l(e.elements,(function(e,n){return a("li",{key:e.id,staticClass:"element-item"},[a("span",{class:{editor:t.elementState.element.id===e.id}},[e.geometry?a("div",{staticClass:"btn-checked element-item-select",class:{checked:e.checked},on:{click:function(e){return t.selectElement(r,n)}}}):a("i",{staticClass:"fas fa-exclamation-triangle",attrs:{title:"Геометрия элемента не задана"}}),t.elementState.element.id===e.id?a("single-element"):a("label",{class:{warning:!e.geometry}},[t._v("\n                                "+t._s(e.title)+"\n                                "),a("button",{staticClass:"btn-action btn-edit",attrs:{title:"Редактировать элемент"},on:{click:function(e){return t.changeElement(r,n)}}},[a("i",{staticClass:"fa fa-pen"})]),a("button",{staticClass:"btn-action btn-delete",attrs:{title:"Удалить элемент","data-toggle":"modal","data-target":"#sureModal"},on:{click:function(e){return t.setSureModalContent(r,n)}}},[a("i",{staticClass:"fas fa-trash"})])])],1)])})),0)])})),0)]),a("sure-modal")],1)},lr=[],cr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"single-element"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.elementState.element.title,expression:"elementState.element.title"}],staticClass:"element-title-field",attrs:{type:"text",placeholder:"Наименование элемента"},domProps:{value:t.elementState.element.title},on:{blur:function(e){return t.updateSingleElement()},input:function(e){e.target.composing||t.$set(t.elementState.element,"title",e.target.value)}}}),a("div",{staticClass:"actions"},[a("button",{staticClass:"btn-edit-save btn-danger",attrs:{title:"Свернуть редактор"},on:{click:t.closeSingleElement}},[a("label",[t._v("Закрыть")])])])])},ur=[],dr=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(s["a"])(e,[{key:"updateSingleElement",value:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.updateElement(),e=this.layerState.currentLayerIndex,a=this.layerState.currentElementIndex,this.layerState.layers[e].elements[a]=Object.assign({},this.layerState.layers[e].elements[a],this.elementState.element);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"closeSingleElement",value:function(){this.unsetSingleElement({layerId:0}),this.unsetCurrentIndex()}}]),e}(p["f"]);Object(d["a"])([Object(m["c"])("gisLayer")],dr.prototype,"layerState",void 0),Object(d["a"])([Object(m["c"])("gisElement")],dr.prototype,"elementState",void 0),Object(d["a"])([m["a"]],dr.prototype,"updateElement",void 0),Object(d["a"])([m["a"]],dr.prototype,"unsetSingleElement",void 0),Object(d["a"])([m["a"]],dr.prototype,"setMapElements",void 0),Object(d["a"])([m["a"]],dr.prototype,"unsetCurrentIndex",void 0),Object(d["a"])([m["a"]],dr.prototype,"removeFeatureFromMap",void 0),Object(d["a"])([m["a"]],dr.prototype,"addFeatureToMap",void 0),Object(d["a"])([m["a"]],dr.prototype,"focusOfFeature",void 0),Object(d["a"])([Object(p["e"])("ILayer[]")],dr.prototype,"layers",void 0),Object(d["a"])([Object(p["e"])("ILayer")],dr.prototype,"layer",void 0),dr=Object(d["a"])([Object(p["a"])({})],dr);var pr=dr,mr=pr,vr=Object(E["a"])(mr,cr,ur,!1,null,null,null),fr=vr.exports,yr=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.pointList=[],t}return Object(u["a"])(e,t),Object(s["a"])(e,[{key:"created",value:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.gisGetLayersToContractor();case 2:this.setMapStyles({styles:this.layerState.styles});case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"selectElement",value:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=this.layerState.layers[e].elements,r[a].checked=!r[a].checked,this.layerState.layers[e].elements=r.slice(0),r[a].checked?(this.addFeatureToMap({id:r[a].id,layer_id:this.layerState.layers[e].id,geom:r[a].geometry,property:this.getPropertiesElement(r[a])}),this.focusOfFeature({id:r[a].id})):this.removeFeatureFromMap({id:r[a].id}),this.drawElementsList();case 5:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"selectLayer",value:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e){var a,r,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=this.layerState.layers,a[e].checked=!a[e].checked,a[e].checked?(a[e].elements.forEach((function(t){t.checked=a[e].checked})),r=[],this.layerState.layers[e].elements.forEach((function(t){n.addFeatureToMap({id:t.id,layer_id:n.layerState.layers[e].id,geom:t.geometry,property:n.getPropertiesElement(t)}),r.push(t.id)})),this.focusOfFeatures({ids:r})):(this.layerState.layers[e].elements.forEach((function(t){n.removeFeatureFromMap({id:t.id})})),a[e].elements.forEach((function(t){t.checked=a[e].checked}))),this.layerState.layers=a.slice(0),this.drawElementsList();case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"hiddenLayer",value:function(t){var e=this.layerState.layers;e[t].hidden=!e[t].hidden,this.layerState.layers=e.slice(0)}},{key:"drawElementsList",value:function(){var t=this;this.pointList.forEach((function(e){t.removeFeatureFromMap({id:e})})),this.pointList=[];var e=this.layerState.layers.filter((function(t){return"point"===t.geometry_type&&t.style.list&&t.style.list.visibility}));e.forEach((function(e){e.elements.filter((function(t){return t.checked&&t.element_next_id})).forEach((function(a){var r=e.elements.find((function(t){return t.id===a.element_next_id&&t.checked}));if(r){var n="",i="",o=/^POINT\((.+)\)$/.exec(a.geometry);2===o.length&&(n=o[1]),o=/^POINT\((.+)\)$/.exec(r.geometry),2===o.length&&(i=o[1]),""!==n&&""!==i&&(t.addFeatureToMap({id:"".concat(a.id,":").concat(r.id),geom:"LINESTRING(".concat(n,", ").concat(i,")"),property:{id:a.id,element_next_id:r.id},style:{id:e.id,font:Object.assign({},e.style.font),stroke:{color:e.style.list.color,opacity:e.style.list.opacity,width:1}}}),t.pointList.push("".concat(a.id,":").concat(r.id)))}}))}))}},{key:"createElement",value:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.unsetSingleElement({layerId:this.layerState.layers[e].id}),t.next=3,this.updateElement();case 3:this.layerState.layers[e].elements.push(this.elementState.element),this.setCurrentIndex({layerIndex:e,elementIndex:this.layerState.layers[e].elements.length-1}),this.setMapInteraction({mode:this.layerState.layers[e].geometry_type});case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"changeElement",value:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.layerState.layers[e].elements[a].checked){t.next=3;break}return t.next=3,this.selectElement(e,a);case 3:this.setSingleElement({element:this.layerState.layers[e].elements[a]}),this.setCurrentIndex({layerIndex:e,elementIndex:a}),this.layerState.layers[e].elements[a].geometry||this.setMapInteraction({mode:this.layerState.layers[e].geometry_type});case 6:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"setSureModalContent",value:function(t,e){var a=this,r=Object.assign({},this.layerState.layers[t].elements[e]);this.setSureModal({title:"Удалить элемент?",text:"Вы уверены, что хотите удалить элемент '".concat(r.title,"' из системы?"),action:function(){var n=Object(Z["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a.deleteElement({elementId:r.id,elementTitle:r.title});case 2:a.layerState.layers[t].elements[e].geometry&&a.removeFeatureFromMap({id:a.layerState.layers[t].elements[e].id}),a.layerState.layers[t].elements.splice(e,1),a.unsetCurrentIndex();case 5:case"end":return n.stop()}}),n)})));function i(){return n.apply(this,arguments)}return i}()})}},{key:"onModifyend",value:function(t){this.updateGeometry({id:t.properties.id,geometry:t.geom})}},{key:"onDrawend",value:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.elementState.element.geometry=e.geom,this.updateGeometry({id:this.elementState.element.id,geometry:e.geom}),this.setMapInteraction({mode:""}),this.addFeatureToMap({id:this.elementState.element.id,layer_id:this.elementState.element.layer_id,geom:this.elementState.element.geometry,property:this.getPropertiesElement(this.elementState.element)});case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getPropertiesElement",value:function(t){return{id:t.id,title:t.title,description:t.description,lenght:t.lenght,area:t.area,perimeter:t.perimeter}}}]),e}(p["f"]);Object(d["a"])([Object(m["c"])("gisLayer")],yr.prototype,"layerState",void 0),Object(d["a"])([Object(m["c"])("gisElement")],yr.prototype,"elementState",void 0),Object(d["a"])([m["a"]],yr.prototype,"gisGetLayersToContractor",void 0),Object(d["a"])([m["a"]],yr.prototype,"selectedLayer",void 0),Object(d["a"])([m["a"]],yr.prototype,"unselectedLayer",void 0),Object(d["a"])([m["a"]],yr.prototype,"setCurrentIndex",void 0),Object(d["a"])([m["a"]],yr.prototype,"unsetCurrentIndex",void 0),Object(d["a"])([m["a"]],yr.prototype,"updateElement",void 0),Object(d["a"])([m["a"]],yr.prototype,"updateGeometry",void 0),Object(d["a"])([m["a"]],yr.prototype,"deleteElement",void 0),Object(d["a"])([m["a"]],yr.prototype,"setSingleElement",void 0),Object(d["a"])([m["a"]],yr.prototype,"unsetSingleElement",void 0),Object(d["a"])([m["a"]],yr.prototype,"selectedElement",void 0),Object(d["a"])([m["a"]],yr.prototype,"setSureModal",void 0),Object(d["a"])([m["a"]],yr.prototype,"setMapStyles",void 0),Object(d["a"])([m["a"]],yr.prototype,"addFeatureToMap",void 0),Object(d["a"])([m["a"]],yr.prototype,"removeFeatureFromMap",void 0),Object(d["a"])([m["a"]],yr.prototype,"setMapInteraction",void 0),Object(d["a"])([m["a"]],yr.prototype,"focusOfFeature",void 0),Object(d["a"])([m["a"]],yr.prototype,"focusOfFeatures",void 0),Object(d["a"])([Object(p["e"])("pointList")],yr.prototype,"pointList",void 0),yr=Object(d["a"])([Object(p["a"])({components:{OlMap:At,SingleElement:fr,SureModal:Ta}})],yr);var hr=yr,gr=hr,br=Object(E["a"])(gr,sr,lr,!1,null,null,null),_r=br.exports,Or=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),e}(p["f"]);Or=Object(d["a"])([Object(p["a"])({components:{GisDataEditor:_r}})],Or);var jr=Or,Cr=jr,Sr=Object(E["a"])(Cr,ir,or,!1,null,null,null),wr=Sr.exports,kr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-modules-container content"},[a("h1",[t._v("Справочник контрагентов")]),a("button",{staticClass:"btn btn-info",attrs:{"data-toggle":"modal","data-target":"#singleContractorModal"},on:{click:t.unsetSingleContractor}},[a("i",{staticClass:"fas fa-plus-circle"}),t._v("\n        Создать нового\n    ")]),a("div",{staticClass:"grid-data"},[t._m(0),t._l(t.contractorState.contractors,(function(e){return a("div",{staticClass:"row row-body"},[a("div",{staticClass:"col-5"},[a("label",{staticClass:"title"},[t._v(t._s(e.name))]),a("label",{staticClass:"description"},[t._v(t._s(e.full_name))]),a("div",{staticClass:"actions"},[a("button",{staticClass:"btn-info",attrs:{"data-toggle":"modal","data-target":"#singleContractorModal"},on:{click:function(a){return t.setSingleContractor(e)}}},[t._v("Изменить")]),a("button",{staticClass:"btn-info",attrs:{"data-toggle":"modal","data-target":"#contractorModules"},on:{click:function(a){return t.setSingleContractor(e)}}},[t._v("Доступные модули")]),a("button",{staticClass:"btn-info",on:{click:function(a){return t.getContractorUsers(e)}}},[t._v("Пользователи")]),a("button",{staticClass:"btn-danger",attrs:{"data-toggle":"modal","data-target":"#sureModal"},on:{click:function(a){return t.setSureModalContent(e)}}},[t._v("Удалить")])])]),a("div",{staticClass:"col-2"},[a("label",{staticClass:"title"},[t._v(t._s(e.inn))])]),a("div",{staticClass:"col-2"},[a("label",{staticClass:"title"},[t._v(t._s(e.kpp))])]),a("div",{staticClass:"col-3"},[a("label",{staticClass:"title"},[e.address?a("span",[a("span",[t._v(t._s(e.address.city))]),e.address.city&&e.address.street?a("span",[t._v(", ")]):t._e(),a("span",[t._v(t._s(e.address.street))]),(e.address.city||e.address.street)&&e.address.build?a("span",[t._v(", ")]):t._e(),a("span",[t._v(t._s(e.address.build))])]):t._e()])])])})),t._m(1)],2),a("single-contractor"),a("contractor-module"),a("sure-modal")],1)},xr=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-header"},[a("div",{staticClass:"col-5"},[t._v("Наименование")]),a("div",{staticClass:"col-2"},[t._v("ИНН")]),a("div",{staticClass:"col-2"},[t._v("КПП")]),a("div",{staticClass:"col-3"},[t._v("Адрес")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-footer"},[a("div",{staticClass:"col-5"},[t._v("Наименование")]),a("div",{staticClass:"col-2"},[t._v("ИНН")]),a("div",{staticClass:"col-2"},[t._v("КПП")]),a("div",{staticClass:"col-3"},[t._v("Адрес")])])}],Er=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"singleContractorModal",tabindex:"-1",role:"dialog","aria-labelledby":"singleContractorModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"singleContractorModalLabel"}},[0===t.contractorState.contractor.id?a("span",[t._v("Создание нового контрагента")]):a("span",[t._v('Изменение контрагента "'+t._s(t.contractorState.contractor.name)+'"')])]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleContractorName"}},[t._v("Наименование *")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.contractorState.contractor.name,expression:"contractorState.contractor.name"}],staticClass:"form-control",attrs:{type:"text",id:"singleContractorName",required:"",placeholder:"Наименование контрагента"},domProps:{value:t.contractorState.contractor.name},on:{input:function(e){e.target.composing||t.$set(t.contractorState.contractor,"name",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleContractorFullName"}},[t._v("Полное наименование *")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.contractorState.contractor.full_name,expression:"contractorState.contractor.full_name"}],staticClass:"form-control",attrs:{type:"text",id:"singleContractorFullName",required:"",placeholder:"Полное наименование контрагента"},domProps:{value:t.contractorState.contractor.full_name},on:{input:function(e){e.target.composing||t.$set(t.contractorState.contractor,"full_name",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleContractorINN"}},[t._v("ИНН *")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.contractorState.contractor.inn,expression:"contractorState.contractor.inn"}],staticClass:"form-control",attrs:{type:"number",id:"singleContractorINN",required:"",placeholder:"ИНН"},domProps:{value:t.contractorState.contractor.inn},on:{input:function(e){e.target.composing||t.$set(t.contractorState.contractor,"inn",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleContractorKPP"}},[t._v("КПП")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.contractorState.contractor.kpp,expression:"contractorState.contractor.kpp"}],staticClass:"form-control",attrs:{type:"number",id:"singleContractorKPP",placeholder:"КПП"},domProps:{value:t.contractorState.contractor.kpp},on:{input:function(e){e.target.composing||t.$set(t.contractorState.contractor,"kpp",e.target.value)}}})]),t.contractorState.contractor.address?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleContractorAddressCity"}},[t._v("Город контрагента")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.contractorState.contractor.address.city,expression:"contractorState.contractor.address.city"}],staticClass:"form-control",attrs:{type:"text",id:"singleContractorAddressCity",placeholder:"г. Астрахань"},domProps:{value:t.contractorState.contractor.address.city},on:{input:function(e){e.target.composing||t.$set(t.contractorState.contractor.address,"city",e.target.value)}}})]):t._e(),t.contractorState.contractor.address?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleContractorAddressStreet"}},[t._v("Улица")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.contractorState.contractor.address.street,expression:"contractorState.contractor.address.street"}],staticClass:"form-control",attrs:{type:"text",id:"singleContractorAddressStreet",placeholder:"ул. Кр.Набережная"},domProps:{value:t.contractorState.contractor.address.street},on:{input:function(e){e.target.composing||t.$set(t.contractorState.contractor.address,"street",e.target.value)}}})]):t._e(),t.contractorState.contractor.address?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleContractorAddressBuild"}},[t._v("Дом, строение")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.contractorState.contractor.address.build,expression:"contractorState.contractor.address.build"}],staticClass:"form-control",attrs:{type:"text",id:"singleContractorAddressBuild"},domProps:{value:t.contractorState.contractor.address.build},on:{input:function(e){e.target.composing||t.$set(t.contractorState.contractor.address,"build",e.target.value)}}})]):t._e()])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.updateContractor}},[t._v("\n                    Сохранить\n                ")]),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Закрыть")])])])])])},Mr=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],$r=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),e}(p["f"]);Object(d["a"])([m["a"]],$r.prototype,"updateContractor",void 0),Object(d["a"])([Object(m["c"])("managerContractor")],$r.prototype,"contractorState",void 0),$r=Object(d["a"])([Object(p["a"])({})],$r);var Pr=$r,Lr=Pr,Rr=Object(E["a"])(Lr,Er,Mr,!1,null,null,null),Ir=Rr.exports,Fr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"contractorModules",tabindex:"-1",role:"dialog","aria-labelledby":"contractorModulesLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"contractorModulesLabel"}},[a("span",[t._v('Модули контрагента "'+t._s(t.contractorState.contractor.name)+'"')])]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("form",[a("include-list")],1)])])])])},Tr=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],Nr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"include-list"},t._l(t.includeListState.list,(function(e){return a("div",{class:{checkbox:!0,checked:e.checked},on:{click:function(a){return t.toggle(e)}}},[a("div",{staticClass:"checkbox-awesome"}),a("label",[t._v(t._s(e.title))])])})),0)},Ar=[],Gr=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(s["a"])(e,[{key:"toggle",value:function(t){t.checked=!t.checked,this.toggleIncludeItem({item:t})}}]),e}(p["f"]);Object(d["a"])([Object(m["c"])("includeList")],Gr.prototype,"includeListState",void 0),Object(d["a"])([m["a"]],Gr.prototype,"toggleIncludeItem",void 0),Gr=Object(d["a"])([Object(p["a"])({})],Gr);var Br=Gr,Dr=Br,Ur=Object(E["a"])(Dr,Nr,Ar,!1,null,null,null),qr=Ur.exports,Vr=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(s["a"])(e,[{key:"onChangeContractor",value:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.managerGetModules();case 2:this.setIncludeList({list:this.moduleState.modules,key:"contractors",parent:this.contractorState.contractor.id}),this.setIncludeListActions({attach:this.attachContractorToModule,detach:this.detachContractorToModule});case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),e}(p["f"]);Object(d["a"])([m["a"]],Vr.prototype,"managerGetModules",void 0),Object(d["a"])([m["a"]],Vr.prototype,"setIncludeList",void 0),Object(d["a"])([m["a"]],Vr.prototype,"setIncludeListActions",void 0),Object(d["a"])([m["a"]],Vr.prototype,"attachContractorToModule",void 0),Object(d["a"])([m["a"]],Vr.prototype,"detachContractorToModule",void 0),Object(d["a"])([Object(m["c"])("managerContractor")],Vr.prototype,"contractorState",void 0),Object(d["a"])([Object(m["c"])("managerModule")],Vr.prototype,"moduleState",void 0),Object(d["a"])([Object(p["g"])("contractorState.contractor.id")],Vr.prototype,"onChangeContractor",null),Vr=Object(d["a"])([Object(p["a"])({components:{IncludeList:qr}})],Vr);var zr=Vr,Hr=zr,Jr=Object(E["a"])(Hr,Fr,Tr,!1,null,null,null),Wr=Jr.exports,Yr=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(s["a"])(e,[{key:"created",value:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getContractors();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"setSureModalContent",value:function(t){var e=this;this.setSureModal({title:"Удалить контрагента?",text:'Вы уверены, что хотите удалить контрагента "'.concat(t.name,'" из системы?'),action:function(){var a=Object(Z["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.setSingleContractor(t),a.next=3,e.deleteContractor();case 3:e.unsetSingleContractor();case 4:case"end":return a.stop()}}),a)})));function r(){return a.apply(this,arguments)}return r}()})}},{key:"getContractorUsers",value:function(t){this.setSingleContractor(t),this.$router.push("/manager/contractors/users/".concat(t.id))}}]),e}(p["f"]);Object(d["a"])([m["a"]],Yr.prototype,"getContractors",void 0),Object(d["a"])([m["a"]],Yr.prototype,"setSureModal",void 0),Object(d["a"])([m["a"]],Yr.prototype,"deleteContractor",void 0),Object(d["a"])([m["a"]],Yr.prototype,"setSingleContractor",void 0),Object(d["a"])([m["a"]],Yr.prototype,"unsetSingleContractor",void 0),Object(d["a"])([Object(m["c"])("managerContractor")],Yr.prototype,"contractorState",void 0),Yr=Object(d["a"])([Object(p["a"])({components:{SingleContractor:Ir,ContractorModule:Wr,SureModal:Ta}})],Yr);var Zr=Yr,Kr=Zr,Qr=Object(E["a"])(Kr,kr,xr,!1,null,null,null),Xr=Qr.exports,tn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-modules-container content"},[a("h1",[t._v('Пользователи контрагента "'+t._s(t.contractorState.contractor.name)+'"')]),a("button",{staticClass:"btn btn-info",attrs:{"data-toggle":"modal","data-target":"#singleUserModal"},on:{click:function(e){return t.createUser()}}},[a("i",{staticClass:"fas fa-plus-circle"}),t._v("\n        Создать нового\n    ")]),a("button",{staticClass:"btn btn-info btn-right",on:{click:function(e){return t.$router.go(-1)}}},[a("i",{staticClass:"fas fa-arrow-circle-left"}),t._v("\n        Назад\n    ")]),a("div",{staticClass:"grid-data"},[t._m(0),t._l(t.userState.users,(function(e){return a("div",{staticClass:"row row-body"},[a("div",{staticClass:"col-12"},[a("label",{staticClass:"title"},[t._v(t._s(e.email))]),a("div",{staticClass:"actions"},[a("button",{staticClass:"btn-info",attrs:{"data-toggle":"modal","data-target":"#singleUserModal"},on:{click:function(a){return t.setSingleUser(e)}}},[t._v("Изменить")]),a("button",{staticClass:"btn-danger",attrs:{"data-toggle":"modal","data-target":"#sureModal"},on:{click:function(a){return t.setSureModalContent(e)}}},[t._v("Удалить")])])])])})),t._m(1)],2),a("single-user"),a("sure-modal")],1)},en=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-header"},[a("div",{staticClass:"col-12"},[t._v("Адрес электронной почты (логин)")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-footer"},[a("div",{staticClass:"col-12"},[t._v("Адрес электронной почты (логин)")])])}],an=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"singleUserModal",tabindex:"-1",role:"dialog","aria-labelledby":"singleUserModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"singleUserModalLabel"}},[0===t.userState.user.id?a("span",[t._v("Регистрация пользователя")]):a("span",[t._v('Изменение пользователя "'+t._s(t.userState.user.email)+'"')])]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleUserEmail"}},[t._v("Адрес электронной почты *")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.userState.user.email,expression:"userState.user.email"}],staticClass:"form-control",attrs:{type:"text",id:"singleUserEmail",required:"",placeholder:"user@mail.ru"},domProps:{value:t.userState.user.email},on:{input:function(e){e.target.composing||t.$set(t.userState.user,"email",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleUserPassword"}},[t._v("Пароль *")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.userState.user.password,expression:"userState.user.password"}],staticClass:"form-control",attrs:{type:"password",id:"singleUserPassword",required:""},domProps:{value:t.userState.user.password},on:{input:function(e){e.target.composing||t.$set(t.userState.user,"password",e.target.value)}}})])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.updateUser}},[t._v("\n                    Сохранить\n                ")]),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Закрыть")])])])])])},rn=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],nn=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),e}(p["f"]);Object(d["a"])([m["a"]],nn.prototype,"updateUser",void 0),Object(d["a"])([Object(m["c"])("managerUser")],nn.prototype,"userState",void 0),nn=Object(d["a"])([Object(p["a"])({})],nn);var on=nn,sn=on,ln=Object(E["a"])(sn,an,rn,!1,null,null,null),cn=ln.exports,un=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(s["a"])(e,[{key:"onContractorIdChange",value:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getUsersByContractor({contractorId:this.$route.params.id});case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"created",value:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.geContractorById({id:this.$route.params.id});case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"createUser",value:function(){this.unsetSingleUser({contractorId:this.$route.params.id})}},{key:"setSureModalContent",value:function(t){var e=this;this.setSureModal({title:"Удалить пользователя?",text:'Вы уверены, что хотите удалить пользователя "'.concat(t.email,'" из системы?'),action:function(){var a=Object(Z["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.setSingleUser(t),a.next=3,e.deleteUser();case 3:e.unsetSingleUser({contractorId:0});case 4:case"end":return a.stop()}}),a)})));function r(){return a.apply(this,arguments)}return r}()})}}]),e}(p["f"]);Object(d["a"])([m["a"]],un.prototype,"getUsersByContractor",void 0),Object(d["a"])([m["a"]],un.prototype,"setSureModal",void 0),Object(d["a"])([m["a"]],un.prototype,"deleteUser",void 0),Object(d["a"])([m["a"]],un.prototype,"setSingleUser",void 0),Object(d["a"])([m["a"]],un.prototype,"unsetSingleUser",void 0),Object(d["a"])([m["a"]],un.prototype,"geContractorById",void 0),Object(d["a"])([Object(m["c"])("managerContractor")],un.prototype,"contractorState",void 0),Object(d["a"])([Object(m["c"])("managerUser")],un.prototype,"userState",void 0),Object(d["a"])([Object(p["g"])("this.$route.params.id",{immediate:!0,deep:!0})],un.prototype,"onContractorIdChange",null),un=Object(d["a"])([Object(p["a"])({components:{SingleUser:cn,SureModal:Ta}})],un);var dn=un,pn=dn,mn=Object(E["a"])(pn,tn,en,!1,null,null,null),vn=mn.exports,fn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-modules-container content"},[a("h1",[t._v("Справочник картографических слоёв")]),a("button",{staticClass:"btn btn-info",attrs:{"data-toggle":"modal","data-target":"#singleLayerModal"},on:{click:t.createLayer}},[a("i",{staticClass:"fas fa-plus-circle"}),t._v("\n        Создать новый\n    ")]),a("div",{staticClass:"grid-data"},[t._m(0),t._l(t.layerState.layers,(function(e){return a("div",{staticClass:"row row-body"},[a("div",{staticClass:"col-4"},[a("label",{staticClass:"title"},[t._v(t._s(e.title))]),a("label",{staticClass:"description",domProps:{innerHTML:t._s(e.description)}}),a("div",{staticClass:"actions"},[a("button",{staticClass:"btn-info",attrs:{"data-toggle":"modal","data-target":"#singleLayerModal"},on:{click:function(a){return t.editLayer(e)}}},[t._v("Изменить")]),a("button",{staticClass:"btn-danger",attrs:{"data-toggle":"modal","data-target":"#sureModal"},on:{click:function(a){return t.setSureModalContent(e)}}},[t._v("Удалить")])])]),a("div",{staticClass:"col-2"},[a("label",{staticClass:"title"},[t._v(t._s(t.getGeometryTypeTitle(e.geometry_type)))])]),a("div",{staticClass:"col-3"},[e.parent?a("label",{staticClass:"title"},[t._v(t._s(e.parent.title))]):a("label",{staticClass:"title"},[t._v("-")])]),a("div",{staticClass:"col-3"},[a("label",{staticClass:"title"},[t._v(t._s(e.module.title))])])])})),t._m(1)],2),a("single-layer"),a("sure-modal")],1)},yn=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-header"},[a("div",{staticClass:"col-4"},[t._v("Наименование")]),a("div",{staticClass:"col-2"},[t._v("Геотип")]),a("div",{staticClass:"col-3"},[t._v("Родительский слой")]),a("div",{staticClass:"col-3"},[t._v("Включен в модуль")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-footer"},[a("div",{staticClass:"col-6"},[t._v("Наименование")]),a("div",{staticClass:"col-3"},[t._v("Родительский слой")]),a("div",{staticClass:"col-3"},[t._v("Включен в модуль")])])}],hn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"singleLayerModal",tabindex:"-1",role:"dialog","aria-labelledby":"singleLayerModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"singleLayerModalLabel"}},[0===t.layerState.layer.id?a("span",[t._v("Создание нового слоя")]):a("span",[t._v('Изменение слоя "'+t._s(t.layerState.layer.title)+'"')])]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("b-tabs",[a("b-tab",{attrs:{title:"Свойства",active:""}},[a("form",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleLayerAlias"}},[t._v("Алиас *")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.layerState.layer.alias,expression:"layerState.layer.alias"}],staticClass:"form-control",attrs:{type:"text",id:"singleLayerAlias",required:"",placeholder:"Алиас слоя"},domProps:{value:t.layerState.layer.alias},on:{input:function(e){e.target.composing||t.$set(t.layerState.layer,"alias",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleLayerTitle"}},[t._v("Наименование *")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.layerState.layer.title,expression:"layerState.layer.title"}],staticClass:"form-control",attrs:{type:"text",id:"singleLayerTitle",required:"",placeholder:"Наименование слоя"},domProps:{value:t.layerState.layer.title},on:{input:function(e){e.target.composing||t.$set(t.layerState.layer,"title",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleLayerDescription"}},[t._v("Описание")]),a("vue-editor",{ref:"wysiwygContents",attrs:{id:"singleLayerDescription",editorToolbar:t.toolbar},model:{value:t.layerState.layer.description,callback:function(e){t.$set(t.layerState.layer,"description",e)},expression:"layerState.layer.description"}})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleLayerParentId"}},[t._v("Родительский слой")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.layerState.layer.parent_id,expression:"layerState.layer.parent_id"}],staticClass:"form-control",attrs:{id:"singleLayerParentId",disabled:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.layerState.layer,"parent_id",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"0"}}),t._l(t.layerState.layers,(function(e){return t.layerState.layer.id!==e.id?a("option",{attrs:{title:e.description},domProps:{value:e.id}},[t._v("\n                                        "+t._s(e.title)+"\n                                    ")]):t._e()}))],2)]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleLayerModuleId"}},[t._v("Включить в модуль *")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.layerState.layer.module_id,expression:"layerState.layer.module_id"}],staticClass:"form-control",attrs:{id:"singleLayerModuleId",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.layerState.layer,"module_id",e.target.multiple?a:a[0])}}},t._l(t.moduleState.modules,(function(e){return a("option",{attrs:{title:e.description},domProps:{value:e.id}},[t._v("\n                                        "+t._s(e.title)+"\n                                    ")])})),0)]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleLayerVisibility"}},[t._v("Видимость слоя *")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.layerState.layer.visibility,expression:"layerState.layer.visibility"}],staticClass:"form-control",attrs:{id:"singleLayerVisibility",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.layerState.layer,"visibility",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"false",title:"Скрытый слой"}},[t._v("Скрытый слой")]),a("option",{attrs:{value:"true",title:"Отображаемый слой"}},[t._v("Отображаемый слой")])])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleLayerGeometryType"}},[t._v("Тип геометрии *")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.layerState.layer.geometry_type,expression:"layerState.layer.geometry_type"}],staticClass:"form-control",attrs:{id:"singleLayerGeometryType",required:"",disabled:0!==t.layerState.layer.id},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.layerState.layer,"geometry_type",e.target.multiple?a:a[0])},t.geometryTypeChanged]}},[a("option",{attrs:{value:"point"}},[t._v("Точечный элемент")]),a("option",{attrs:{value:"linestring"}},[t._v("Линейный элемент")]),a("option",{attrs:{value:"polygon"}},[t._v("Полигональный элемент")])])])])]),a("b-tab",{ref:"style-tab",attrs:{title:"Стиль"},on:{click:t.resizeMap}},[a("layer-style-editor",{attrs:{geometryType:t.layerState.layer.geometry_type}})],1),a("b-tab",{ref:"style-tab",attrs:{title:"Форма"}},[a("table-constructor")],1)],1)],1),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.updateSingleLayer}},[t._v("\n                    Сохранить\n                ")]),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Закрыть")])])])])])},gn=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],bn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"style-editor"},[""!==t.styleEditorState.geometryType?a("div",{staticClass:"style-editor-fields"},[a("vue-scrollbar",{ref:"scrollbar",staticClass:"scrollbar scrollbar-min"},["point"===t.styleEditorState.geometryType?a("point-fields"):t._e(),"linestring"===t.styleEditorState.geometryType?a("linestring-fields"):t._e(),"polygon"===t.styleEditorState.geometryType?a("polygon-fields"):t._e()],1)],1):t._e(),a("div",{staticClass:"style-editor-map clearfix"},[a("ol-map")],1)])},_n=[],On=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",[t.styleEditorState.style.pointType?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointType"}},[t._v("Фигура или иконка")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.pointType,expression:"styleEditorState.style.pointType"}],staticClass:"form-control",attrs:{id:"styleEditorPointType"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.styleEditorState.style,"pointType",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"shape"}},[t._v("Фигура")]),a("option",{attrs:{value:"icon"}},[t._v("Иконка")])])]):t._e(),"shape"===t.styleEditorState.style.pointType?a("div",[t.styleEditorState.style.shape?a("div",{staticClass:"form-group"},[a("label",[t._v("Цвет обводки")]),a("color-picker",{on:{change:t.onChangeStrokeColor},model:{value:t.styleEditorState.style.shape.stroke.color,callback:function(e){t.$set(t.styleEditorState.style.shape.stroke,"color",e)},expression:"styleEditorState.style.shape.stroke.color"}})],1):t._e(),t.styleEditorState.style.shape?a("div",{staticClass:"form-group"},[a("label",[t._v("Цвет заливки")]),a("color-picker",{on:{change:t.onChangeFillColor},model:{value:t.styleEditorState.style.shape.fill.color,callback:function(e){t.$set(t.styleEditorState.style.shape.fill,"color",e)},expression:"styleEditorState.style.shape.fill.color"}})],1):t._e(),t.styleEditorState.style.shape?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointStrokeRadius"}},[t._v("Радиус фигуры")]),a("div",{staticClass:"input-group"},[t._m(0),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.shape.radius,expression:"styleEditorState.style.shape.radius"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPointStrokeRadius",step:"1",min:"3",max:"20"},domProps:{value:t.styleEditorState.style.shape.radius},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.shape,"radius",e.target.value)}}})])]):t._e(),t.styleEditorState.style.shape?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointStrokePoints"}},[t._v("Количество вершин фигуры")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.shape.points,expression:"styleEditorState.style.shape.points"}],staticClass:"form-control",attrs:{id:"styleEditorPointStrokePoints"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.styleEditorState.style.shape,"points",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"11"}},[t._v("Окружность")]),a("option",{attrs:{value:"3"}},[t._v("Треугольник")]),a("option",{attrs:{value:"4"}},[t._v("Квадрат")]),a("option",{attrs:{value:"5"}},[t._v("Пятиугольник (пентагон)")]),a("option",{attrs:{value:"6"}},[t._v("Шестиугольник (гексагон)")]),a("option",{attrs:{value:"7"}},[t._v("Семиугольник (гептагон)")]),a("option",{attrs:{value:"8"}},[t._v("Восьмиугольник (октагон)")]),a("option",{attrs:{value:"9"}},[t._v("Девятиугольник (нонагон)")]),a("option",{attrs:{value:"10"}},[t._v("Десятиугольник (декагон)")])])]):t._e(),t.styleEditorState.style.shape?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointStrokeRotation"}},[t._v("Поворот")]),a("div",{staticClass:"input-group"},[t._m(1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.shape.rotation,expression:"styleEditorState.style.shape.rotation"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPointStrokeRotation",step:"5",min:"-180",max:"180"},domProps:{value:t.styleEditorState.style.shape.rotation},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.shape,"rotation",e.target.value)}}})])]):t._e(),t.styleEditorState.style.shape?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointStrokeOpacity"}},[t._v("Прозрачность обводки")]),a("div",{staticClass:"input-group"},[t._m(2),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.shape.stroke.opacity,expression:"styleEditorState.style.shape.stroke.opacity"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPointStrokeOpacity",step:"5",min:"0",max:"100"},domProps:{value:t.styleEditorState.style.shape.stroke.opacity},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.shape.stroke,"opacity",e.target.value)}}})])]):t._e(),t.styleEditorState.style.shape?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointStrokeWidth"}},[t._v("Толщина обводки")]),a("div",{staticClass:"input-group"},[t._m(3),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.shape.stroke.width,expression:"styleEditorState.style.shape.stroke.width"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPointStrokeWidth",step:"1",min:"0",max:"20"},domProps:{value:t.styleEditorState.style.shape.stroke.width},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.shape.stroke,"width",e.target.value)}}})])]):t._e(),t.styleEditorState.style.shape?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointFillOpacity"}},[t._v("Прозрачность заливки")]),a("div",{staticClass:"input-group"},[t._m(4),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.shape.fill.opacity,expression:"styleEditorState.style.shape.fill.opacity"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPointFillOpacity",step:"5",min:"0",max:"100"},domProps:{value:t.styleEditorState.style.shape.fill.opacity},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.shape.fill,"opacity",e.target.value)}}})])]):t._e()]):t._e(),"icon"===t.styleEditorState.style.pointType?a("div",[a("div",{staticClass:"form-group file-upload"},[a("label",{attrs:{for:"styleEditorPointIconSrc"}},[t._v("Изображение")]),a("div",{staticClass:"input-group"},[a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[a("img",{staticClass:"icon",attrs:{src:t.styleEditorState.style.icon.src}})])]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"styleEditorPointIconSrc",readonly:"",value:"Выбрать иконку"},on:{click:function(e){return t.$refs.icon.click()}}})]),a("input",{ref:"icon",staticClass:"form-control-file",attrs:{type:"file",accept:"image/jpeg,image/png,image/gif"},on:{change:t.uploadIcon}})]),t.styleEditorState.style.icon?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointIconAnchor0"}},[t._v("Смещение по горизонтали влево")]),a("div",{staticClass:"input-group"},[t._m(5),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.icon.anchor[0],expression:"styleEditorState.style.icon.anchor[0]"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPointIconAnchor0",step:"1",min:"-256",max:"256"},domProps:{value:t.styleEditorState.style.icon.anchor[0]},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.icon.anchor,0,e.target.value)}}})])]):t._e(),t.styleEditorState.style.icon?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointIconAnchor1"}},[t._v("Смещение по вертикали вверх")]),a("div",{staticClass:"input-group"},[t._m(6),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.icon.anchor[1],expression:"styleEditorState.style.icon.anchor[1]"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPointIconAnchor1",step:"1",min:"-256",max:"256"},domProps:{value:t.styleEditorState.style.icon.anchor[1]},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.icon.anchor,1,e.target.value)}}})])]):t._e(),t.styleEditorState.style.icon?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointIconOpacity"}},[t._v("Прозрачность")]),a("div",{staticClass:"input-group"},[t._m(7),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.icon.opacity,expression:"styleEditorState.style.icon.opacity"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPointIconOpacity",step:"5",min:"0",max:"100"},domProps:{value:t.styleEditorState.style.icon.opacity},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.icon,"opacity",e.target.value)}}})])]):t._e(),t.styleEditorState.style.icon?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointIconScale"}},[t._v("Масштаб")]),a("div",{staticClass:"input-group"},[t._m(8),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.icon.scale,expression:"styleEditorState.style.icon.scale"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPointIconScale",step:"0.05",min:"0",max:"5"},domProps:{value:t.styleEditorState.style.icon.scale},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.icon,"scale",e.target.value)}}})])]):t._e(),t.styleEditorState.style.icon?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointIconRotation"}},[t._v("Поворот")]),a("div",{staticClass:"input-group"},[t._m(9),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.icon.rotation,expression:"styleEditorState.style.icon.rotation"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPointIconRotation",step:"5",min:"-180",max:"180"},domProps:{value:t.styleEditorState.style.icon.rotation},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.icon,"rotation",e.target.value)}}})])]):t._e()]):t._e(),a("div",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointList"}},[t._v("Связывать элементы в список")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.list.hasList,expression:"styleEditorState.style.list.hasList"}],staticClass:"form-control",attrs:{id:"styleEditorPointList"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.styleEditorState.style.list,"hasList",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"true"}},[t._v("Да")]),a("option",{attrs:{value:"false"}},[t._v("Нет")])])]),t.styleEditorState.style.list.hasList?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointListVisibility"}},[t._v("Отображать связь на карте")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.list.visibility,expression:"styleEditorState.style.list.visibility"}],staticClass:"form-control",attrs:{id:"styleEditorPointListVisibility"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.styleEditorState.style.list,"visibility",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"true"}},[t._v("Отображать")]),a("option",{attrs:{value:"false"}},[t._v("Скрывать")])])]):t._e(),t.styleEditorState.style.list.visibility?a("div",{staticClass:"form-group"},[a("label",[t._v("Цвет линии связи")]),a("color-picker",{on:{change:t.onChangeListColor},model:{value:t.styleEditorState.style.list.color,callback:function(e){t.$set(t.styleEditorState.style.list,"color",e)},expression:"styleEditorState.style.list.color"}})],1):t._e(),t.styleEditorState.style.list.visibility?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointListOpacity"}},[t._v("Прозрачность линии связи")]),a("div",{staticClass:"input-group"},[t._m(10),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.list.opacity,expression:"styleEditorState.style.list.opacity"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPointListOpacity",step:"5",min:"0",max:"100"},domProps:{value:t.styleEditorState.style.list.opacity},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.list,"opacity",e.target.value)}}})])]):t._e()])])},jn=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("px")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("°")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("%")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("px")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("%")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("px")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("px")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("%")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("х")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("°")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("%")])])}],Cn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.value?a("div",{staticClass:"color-picker"},[a("div",{staticClass:"input-group",on:{click:function(e){t.isShowModal=!t.isShowModal}}},[a("div",{staticClass:"input-group-prepend color-picker-input"},[a("div",{staticClass:"input-group-text",style:"background-color:"+t.color.hex+";"},[a("i",{staticClass:"fas fa-palette"})])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.color.hex,expression:"color.hex"}],staticClass:"form-control color-picker-input",style:"background-color:"+t.color.hex+"30;",attrs:{type:"text",readonly:""},domProps:{value:t.color.hex},on:{input:function(e){e.target.composing||t.$set(t.color,"hex",e.target.value)}}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowModal,expression:"isShowModal"}],staticClass:"color-picker-modal"},[a("div",{staticClass:"color-picker-modal-wrapper",on:{click:function(e){t.isShowModal=!1}}}),a("sketch-picker",{staticClass:"color-picker-sketch-picker",on:{input:t.Change},model:{value:t.color,callback:function(e){t.color=e},expression:"color"}})],1)]):t._e()},Sn=[],wn=a("c345"),kn=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.isShowModal=!1,t.color={hex:t.value},t}return Object(u["a"])(e,t),Object(s["a"])(e,[{key:"onChangeValue",value:function(){this.color={hex:this.value}}},{key:"Change",value:function(t){return t.hex}}]),e}(p["f"]);Object(d["a"])([Object(p["d"])()],kn.prototype,"value",void 0),Object(d["a"])([Object(p["e"])("Boolean")],kn.prototype,"isShowModal",void 0),Object(d["a"])([Object(p["e"])()],kn.prototype,"color",void 0),Object(d["a"])([Object(p["g"])("value",{deep:!0})],kn.prototype,"onChangeValue",null),Object(d["a"])([Object(p["b"])()],kn.prototype,"Change",null),kn=Object(d["a"])([Object(p["a"])({components:{"sketch-picker":wn["Sketch"]}})],kn);var xn=kn,En=xn,Mn=(a("a3fd"),Object(E["a"])(En,Cn,Sn,!1,null,null,null)),$n=Mn.exports,Pn=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(s["a"])(e,[{key:"onChangeStrokeColor",value:function(t){var e=this.styleEditorState.style;e.shape.stroke.color=t,this.styleEditorState.style=Object.assign({},e)}},{key:"onChangeFillColor",value:function(t){var e=this.styleEditorState.style;e.shape.fill.color=t,this.styleEditorState.style=Object.assign({},e)}},{key:"onChangeListColor",value:function(t){var e=this.styleEditorState.style;e.list.color=t,this.styleEditorState.style=Object.assign({},e)}},{key:"uploadIcon",value:function(){var t=this.$refs.icon;if(t&&t.files&&0!==t.files.length){var e=t.files[0];this.uploadIconByStyleEditor({file:e})}}}]),e}(p["f"]);Object(d["a"])([Object(m["c"])("styleEditor")],Pn.prototype,"styleEditorState",void 0),Object(d["a"])([m["a"]],Pn.prototype,"setMapStyles",void 0),Object(d["a"])([m["a"]],Pn.prototype,"setMapElements",void 0),Object(d["a"])([m["a"]],Pn.prototype,"setMapCenterDefault",void 0),Object(d["a"])([m["a"]],Pn.prototype,"uploadIconByStyleEditor",void 0),Pn=Object(d["a"])([Object(p["a"])({components:{ColorPicker:$n}})],Pn);var Ln=Pn,Rn=Ln,In=Object(E["a"])(Rn,On,jn,!1,null,null,null),Fn=In.exports,Tn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",[t.styleEditorState.style.stroke?a("div",{staticClass:"form-group"},[a("label",[t._v("Цвет линии")]),a("color-picker",{on:{change:t.onChangeStrokeColor},model:{value:t.styleEditorState.style.stroke.color,callback:function(e){t.$set(t.styleEditorState.style.stroke,"color",e)},expression:"styleEditorState.style.stroke.color"}})],1):t._e(),t.styleEditorState.style.stroke?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorLinestringStrokeOpacity"}},[t._v("Прозрачность линии")]),a("div",{staticClass:"input-group"},[t._m(0),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.stroke.opacity,expression:"styleEditorState.style.stroke.opacity"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorLinestringStrokeOpacity",required:"",step:"5",min:"0",max:"100"},domProps:{value:t.styleEditorState.style.stroke.opacity},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.stroke,"opacity",e.target.value)}}})])]):t._e(),t.styleEditorState.style.stroke?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorLinestringStrokeWidth"}},[t._v("Толщина линии")]),a("div",{staticClass:"input-group"},[t._m(1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.stroke.width,expression:"styleEditorState.style.stroke.width"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorLinestringStrokeWidth",required:"",step:"1",min:"1",max:"20"},domProps:{value:t.styleEditorState.style.stroke.width},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.stroke,"width",e.target.value)}}})])]):t._e()])},Nn=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("%")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("px")])])}],An=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(s["a"])(e,[{key:"onChangeStrokeColor",value:function(t){var e=this.styleEditorState.style;e.stroke.color=t,this.styleEditorState.style=Object.assign({},e)}}]),e}(p["f"]);Object(d["a"])([Object(m["c"])("styleEditor")],An.prototype,"styleEditorState",void 0),Object(d["a"])([m["a"]],An.prototype,"setMapStyles",void 0),Object(d["a"])([m["a"]],An.prototype,"setMapElements",void 0),Object(d["a"])([m["a"]],An.prototype,"setMapCenterDefault",void 0),An=Object(d["a"])([Object(p["a"])({components:{ColorPicker:$n}})],An);var Gn=An,Bn=Gn,Dn=Object(E["a"])(Bn,Tn,Nn,!1,null,null,null),Un=Dn.exports,qn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",[t.styleEditorState.style.stroke?a("div",{staticClass:"form-group"},[a("label",[t._v("Цвет обводки")]),a("color-picker",{on:{change:t.onChangeStrokeColor},model:{value:t.styleEditorState.style.stroke.color,callback:function(e){t.$set(t.styleEditorState.style.stroke,"color",e)},expression:"styleEditorState.style.stroke.color"}})],1):t._e(),t.styleEditorState.style.fill?a("div",{staticClass:"form-group"},[a("label",[t._v("Цвет заливки")]),a("color-picker",{on:{change:t.onChangeFillColor},model:{value:t.styleEditorState.style.fill.color,callback:function(e){t.$set(t.styleEditorState.style.fill,"color",e)},expression:"styleEditorState.style.fill.color"}})],1):t._e(),t.styleEditorState.style.stroke?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPolygonStrokeOpacity"}},[t._v("Прозрачность обводки")]),a("div",{staticClass:"input-group"},[t._m(0),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.stroke.opacity,expression:"styleEditorState.style.stroke.opacity"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPolygonStrokeOpacity",required:"",step:"5",min:"0",max:"100"},domProps:{value:t.styleEditorState.style.stroke.opacity},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.stroke,"opacity",e.target.value)}}})])]):t._e(),t.styleEditorState.style.stroke?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPolygonStrokeWidth"}},[t._v("Толщина обводки")]),a("div",{staticClass:"input-group"},[t._m(1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.stroke.width,expression:"styleEditorState.style.stroke.width"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPolygonStrokeWidth",required:"",step:"1",min:"1",max:"20"},domProps:{value:t.styleEditorState.style.stroke.width},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.stroke,"width",e.target.value)}}})])]):t._e(),t.styleEditorState.style.fill?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPolygonFillOpacity"}},[t._v("Прозрачность заливки")]),a("div",{staticClass:"input-group"},[t._m(2),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.fill.opacity,expression:"styleEditorState.style.fill.opacity"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPolygonFillOpacity",required:"",step:"5",min:"0",max:"100"},domProps:{value:t.styleEditorState.style.fill.opacity},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.fill,"opacity",e.target.value)}}})])]):t._e()])},Vn=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("%")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("px")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("%")])])}],zn=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(s["a"])(e,[{key:"onChangeStrokeColor",value:function(t){var e=this.styleEditorState.style;e.stroke.color=t,this.styleEditorState.style=Object.assign({},e)}},{key:"onChangeFillColor",value:function(t){var e=this.styleEditorState.style;e.fill.color=t,this.styleEditorState.style=Object.assign({},e)}}]),e}(p["f"]);Object(d["a"])([Object(m["c"])("styleEditor")],zn.prototype,"styleEditorState",void 0),Object(d["a"])([m["a"]],zn.prototype,"setMapStyles",void 0),Object(d["a"])([m["a"]],zn.prototype,"setMapElements",void 0),Object(d["a"])([m["a"]],zn.prototype,"setMapCenterDefault",void 0),zn=Object(d["a"])([Object(p["a"])({components:{ColorPicker:$n}})],zn);var Hn=zn,Jn=Hn,Wn=Object(E["a"])(Jn,qn,Vn,!1,null,null,null),Yn=Wn.exports,Zn=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(s["a"])(e,[{key:"onChangeStyle",value:function(){this.setMapStyles({styles:[Object.assign({},{id:1},this.styleEditorState.style)]})}},{key:"onChangeGeometryType",value:function(t){this.removeFeatureFromMap({id:"style-editor"}),"point"===t?this.addFeatureToMap({id:"style-editor",layer_id:1,geom:"POINT(48.0355525016785 46.3538888154049)",property:{title:"Точечный геоэлемент",layer_id:1}}):"linestring"===t?this.addFeatureToMap({id:"style-editor",layer_id:1,geom:"LINESTRING(48.0336213111877 46.3516524398736,\n                    48.0339002609253 46.3519338431522,\n                    48.0376124382019 46.3529113380201,\n                    48.0377840995789 46.3535778017697,\n                    48.0348873138428 46.3541109669178,\n                    48.0343723297119 46.3535926119829,\n                    48.0333423614502 46.3540665366874,\n                    48.0337715148926 46.3544960274008,\n                    48.0353379249573 46.3547033665372)",property:{title:"Линейный геоэлемент",layer_id:1}}):this.addFeatureToMap({id:"style-editor",layer_id:1,geom:"POLYGON((48.0351877212524 46.3537110935444,\n                    48.0341362953186 46.3548810851708,\n                    48.0366039276123 46.3545256473257,\n                    48.0377197265625 46.3535629915525,\n                    48.0375909805298 46.3528817172203,\n                    48.0363893508911 46.3531631141696,\n                    48.0342864990234 46.3515043323028,\n                    48.0351877212524 46.3537110935444))",property:{title:"Полигональный геоэлемент",layer_id:1}}),this.setMapStyles({styles:[Object.assign({},{id:1},this.styleEditorState.style)]}),this.setMapCenterDefault()}}]),e}(p["f"]);Object(d["a"])([Object(m["c"])("styleEditor")],Zn.prototype,"styleEditorState",void 0),Object(d["a"])([m["a"]],Zn.prototype,"setMapStyles",void 0),Object(d["a"])([m["a"]],Zn.prototype,"removeFeatureFromMap",void 0),Object(d["a"])([m["a"]],Zn.prototype,"addFeatureToMap",void 0),Object(d["a"])([m["a"]],Zn.prototype,"setMapCenterDefault",void 0),Object(d["a"])([Object(p["g"])("styleEditorState.style",{deep:!0})],Zn.prototype,"onChangeStyle",null),Object(d["a"])([Object(p["g"])("styleEditorState.geometryType")],Zn.prototype,"onChangeGeometryType",null),Zn=Object(d["a"])([Object(p["a"])({components:{LinestringFields:Un,PointFields:Fn,PolygonFields:Yn,OlMap:At}})],Zn);var Kn=Zn,Qn=Kn,Xn=Object(E["a"])(Qn,bn,_n,!1,null,null,null),ti=Xn.exports,ei=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-constructor"},[t.constructorState.tableFields.length?a("div",{staticClass:"alert alert-info"},[t._v('\n        Для добавления нового поля в группу нажмите "Добавить поле". Укажите тип поля, наименование и техническое наименование поля\n    ')]):a("div",{staticClass:"alert alert-info"},[t._v('\n        Для данного слоя дополнительные поля формы не заданы.\n        Для чтого, что бы создать дополнительные поля в конструкторе формы,\n        необходимо создать группу полей, нажав на кнопку "Добавить группу"\n    ')]),t._l(t.constructorState.tableFields,(function(e,r){return a("div",[a("div",{staticClass:"row align-items-center group-header"},[a("div",{staticClass:"col-2"},[t._v("\n                Группа:\n            ")]),a("div",{staticClass:"col-7"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.group,expression:"tableGroup.group"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Группа"},domProps:{value:e.group},on:{input:function(a){a.target.composing||t.$set(e,"group",a.target.value)}}})]),a("div",{staticClass:"col-3 action"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(a){return t.addField(r,e.group)}}},[t._v("Добавить\n                    поле\n                ")])])]),a("div",[t._m(0,!0),t._l(e.columns,(function(n,i){return a("div",{staticClass:"row constructor-table-fields",class:{deleted:n.is_deleted}},[a("div",{staticClass:"col-2 col col-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:n.group,expression:"tableField.group"}],staticClass:"form-control",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(n,"group",e.target.multiple?a:a[0])},function(e){return t.changeGroup(n,i,r)}]}},t._l(t.constructorState.tableFields,(function(e){return a("option",{domProps:{value:e.group}},[t._v(t._s(e.group)+"\n                        ")])})),0)]),a("div",{staticClass:"col-2 col col-type"},[a("select",{directives:[{name:"model",rawName:"v-model",value:n.type,expression:"tableField.type"}],staticClass:"form-control",attrs:{disabled:n.id},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(n,"type",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"text_field"}},[t._v("Текстовое поле")]),a("option",{attrs:{value:"long_text_field"}},[t._v("Длинное текстовое поле")]),a("option",{attrs:{value:"number_field"}},[t._v("Числовое поле")]),a("option",{attrs:{value:"date_field"}},[t._v("Дата")]),a("option",{attrs:{value:"one_from_many_field"}},[t._v("Один из многих")]),a("option",{attrs:{value:"many_from_many_field"}},[t._v("Многие из многих")]),a("option",{attrs:{value:"doc_field"}},[t._v("Загрузка документа")])])]),a("div",{staticClass:"col-3 col col-title"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:n.title,expression:"tableField.title"}],staticClass:"form-control",attrs:{type:"text",name:"наименование группы "+e.group+" под номером "+i,"data-vv-validate-on":"change|blur",placeholder:"Наименование поля"},domProps:{value:n.title},on:{input:function(e){e.target.composing||t.$set(n,"title",e.target.value)}}}),a("span",{staticClass:"validation-error"},[t._v(t._s(t.errors.first("наименование группы "+e.group+" под номером "+i)))])]),a("div",{staticClass:"col-3 col col-tech"},[a("input",{directives:[{name:"model",rawName:"v-model",value:n.tech_title,expression:"tableField.tech_title"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text","data-vv-validate-on":"change|blur",name:"тех_наименование группы"+e.group+" под номером "+i,placeholder:"техническое наименование поля"},domProps:{value:n.tech_title},on:{input:function(e){e.target.composing||t.$set(n,"tech_title",e.target.value)}}}),a("span",{staticClass:"validation-error"},[t._v(t._s(t.errors.first("тех_наименование группы"+e.group+" под номером "+i)))])]),a("div",{staticClass:"col-2 col col-required col-action"},[a("div",{staticClass:"input-container"},[a("select",{directives:[{name:"model",rawName:"v-model",value:n.required,expression:"tableField.required"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(n,"required",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"true"}},[t._v("Да")]),a("option",{attrs:{value:"false"}},[t._v("Нет")])])]),a("div",{staticClass:"btn-container"},[!0===n.is_deleted?a("button",{staticClass:"btn btn-warning btn-link",attrs:{type:"button"},on:{click:function(e){return t.undoColumn(n,i,r)}}},[a("i",{staticClass:"fas fa-trash-restore"})]):a("button",{staticClass:"btn btn-danger btn-link",attrs:{type:"button"},on:{click:function(e){return t.dropColumn(n,i,r)}}},[a("i",{staticClass:"far fa-trash-alt"})])])]),"one_from_many_field"===n.type||"many_from_many_field"===n.type?a("div",{staticClass:"col-12 col col-enums"},[a("div",{staticClass:"row no-gutters"},[t._m(1,!0),a("div",{staticClass:"col-8 col"},[a("tag-selector",{attrs:{name:"enums"},model:{value:n.enums,callback:function(e){t.$set(n,"enums",e)},expression:"tableField.enums"}})],1)])]):t._e()])})),a("hr")],2)])})),a("div",{staticClass:"action"},[a("button",{staticClass:"btn btn-primary btn-link",attrs:{type:"button"},on:{click:t.addGroup}},[a("i",{staticClass:"fas fa-plus-circle"}),t._v("Добавить группу")])])],2)},ai=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row no-gutters align-items-center constructor-table-fields-header"},[a("div",{staticClass:"col-2"},[a("p",[t._v("Группа")])]),a("div",{staticClass:"col-2"},[a("p",[t._v("Тип")])]),a("div",{staticClass:"col-3"},[a("p",[t._v("Наименование")])]),a("div",{staticClass:"col-3"},[a("p",[t._v("Тех. наименование")])]),a("div",{staticClass:"col-2"},[a("p",[t._v("Обязательное?")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-4 col"},[a("div",{staticClass:"alert alert-info"},[t._v("Перечислите значения, разделяя их пробелом")])])}],ri=a("b25c"),ni=a.n(ri),ii=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(s["a"])(e,[{key:"addGroup",value:function(){this.constructorState.tableFields.push({group:"Новая группа",columns:[{type:"text_field",title:"",tech_title:"name1",required:!1,enums:void 0,group:"Новая группа",is_deleted:!1}]})}},{key:"changeGroup",value:function(t,e,a){var r=!0,n=!1,i=void 0;try{for(var o,s=this.constructorState.tableFields[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;l.group===t.group&&(l.columns.push(t),this.constructorState.tableFields[a].columns.splice(e,1))}}catch(c){n=!0,i=c}finally{try{r||null==s.return||s.return()}finally{if(n)throw i}}}},{key:"addField",value:function(t,e){this.constructorState.tableFields[t].columns.push({type:"text_field",title:"",tech_title:"name1",required:!1,enums:void 0,group:e,is_deleted:!1})}},{key:"dropColumn",value:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e,a,r){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=Object.assign({},this.constructorState.tableFields[r]),n.columns[a].is_deleted=!0,this.constructorState.tableFields[r]=Object.assign({},n);case 3:case"end":return t.stop()}}),t,this)})));function e(e,a,r){return t.apply(this,arguments)}return e}()},{key:"undoColumn",value:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e,a,r){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=Object.assign({},this.constructorState.tableFields[r]),n.columns[a].is_deleted=!1,this.constructorState.tableFields[r]=Object.assign({},n);case 3:case"end":return t.stop()}}),t,this)})));function e(e,a,r){return t.apply(this,arguments)}return e}()}]),e}(p["f"]);Object(d["a"])([m["a"]],ii.prototype,"getConstructorByLayer",void 0),Object(d["a"])([Object(m["c"])("konstructor")],ii.prototype,"constructorState",void 0),ii=Object(d["a"])([Object(p["a"])({components:{TagSelector:ni.a}})],ii);var oi=ii,si=oi,li=Object(E["a"])(si,ei,ai,!1,null,null,null),ci=li.exports,ui=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.toolbar=[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{align:[]}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["clean"]],t}return Object(u["a"])(e,t),Object(s["a"])(e,[{key:"onChangeJsonStyle",value:function(){this.layerState.layer.style=Object.assign({},this.styleEditorState.style)}},{key:"created",value:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.managerGetModules();case 2:return t.next=4,this.getConstructorByLayer({layerId:this.layerState.layer.id});case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"geometryTypeChanged",value:function(){this.setGeometryTypeByStyleEditor({geometryType:this.layerState.layer.geometry_type}),this.setDefaultStyleByStyleEditor()}},{key:"resizeMap",value:function(){this.mapUpdateSize()}},{key:"updateSingleLayer",value:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.updateLayer();case 2:this.updateConstructorTable({layerId:this.layerState.layer.id});case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),e}(p["f"]);Object(d["a"])([Object(p["e"])()],ui.prototype,"toolbar",void 0),Object(d["a"])([m["a"]],ui.prototype,"managerGetModules",void 0),Object(d["a"])([m["a"]],ui.prototype,"updateLayer",void 0),Object(d["a"])([m["a"]],ui.prototype,"mapUpdateSize",void 0),Object(d["a"])([m["a"]],ui.prototype,"setGeometryTypeByStyleEditor",void 0),Object(d["a"])([m["a"]],ui.prototype,"setDefaultStyleByStyleEditor",void 0),Object(d["a"])([m["a"]],ui.prototype,"getConstructorByLayer",void 0),Object(d["a"])([m["a"]],ui.prototype,"updateConstructorTable",void 0),Object(d["a"])([Object(m["c"])("managerModule")],ui.prototype,"moduleState",void 0),Object(d["a"])([Object(m["c"])("managerLayer")],ui.prototype,"layerState",void 0),Object(d["a"])([Object(m["c"])("styleEditor")],ui.prototype,"styleEditorState",void 0),Object(d["a"])([Object(p["g"])("styleEditorState.style",{deep:!0})],ui.prototype,"onChangeJsonStyle",null),ui=Object(d["a"])([Object(p["a"])({components:{LayerStyleEditor:ti,VueEditor:oe["a"],TableConstructor:ci}})],ui);var di=ui,pi=di,mi=Object(E["a"])(pi,hn,gn,!1,null,null,null),vi=mi.exports,fi=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(s["a"])(e,[{key:"created",value:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.managerGetLayers();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"setSureModalContent",value:function(t){var e=this;this.setSureModal({title:"Удалить слой?",text:'Вы уверены, что хотите удалить слой "'.concat(t.title,'" из системы?'),action:function(){var a=Object(Z["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.setSingleLayer(t),a.next=3,e.deleteLayer();case 3:e.unsetSingleLayer();case 4:case"end":return a.stop()}}),a)})));function r(){return a.apply(this,arguments)}return r}()})}},{key:"createLayer",value:function(){this.unsetSingleLayer(),this.unsetConstructorByLayer(),this.setGeometryTypeByStyleEditor({geometryType:this.layerState.layer.geometry_type}),this.setDefaultStyleByStyleEditor(),this.setMapCenterDefault()}},{key:"editLayer",value:function(t){this.getConstructorByLayer({layerId:t.id}),this.setSingleLayer(t),this.setGeometryTypeByStyleEditor({geometryType:this.layerState.layer.geometry_type}),this.setStyleByStyleEditor({style:this.layerState.layer.style}),this.setMapCenterDefault()}},{key:"getGeometryTypeTitle",value:function(t){switch(t){case"point":return"Точечные элементы";case"linestring":return"Линейные элементы";case"polygon":return"Полигональные элементы"}}}]),e}(p["f"]);Object(d["a"])([m["a"]],fi.prototype,"managerGetLayers",void 0),Object(d["a"])([m["a"]],fi.prototype,"setSureModal",void 0),Object(d["a"])([m["a"]],fi.prototype,"deleteLayer",void 0),Object(d["a"])([m["a"]],fi.prototype,"setSingleLayer",void 0),Object(d["a"])([m["a"]],fi.prototype,"unsetSingleLayer",void 0),Object(d["a"])([m["a"]],fi.prototype,"setGeometryTypeByStyleEditor",void 0),Object(d["a"])([m["a"]],fi.prototype,"setStyleByStyleEditor",void 0),Object(d["a"])([m["a"]],fi.prototype,"setMapCenterDefault",void 0),Object(d["a"])([m["a"]],fi.prototype,"setDefaultStyleByStyleEditor",void 0),Object(d["a"])([m["a"]],fi.prototype,"getConstructorByLayer",void 0),Object(d["a"])([m["a"]],fi.prototype,"unsetConstructorByLayer",void 0),Object(d["a"])([Object(m["c"])("managerLayer")],fi.prototype,"layerState",void 0),fi=Object(d["a"])([Object(p["a"])({components:{SingleLayer:vi,SureModal:Ta}})],fi);var yi=fi,hi=yi,gi=Object(E["a"])(hi,fn,yn,!1,null,null,null),bi=gi.exports;r["default"].use(v["a"]);var _i=new v["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:P},{path:"/gis",name:"gis",component:Wt},{path:"/manager",name:"manager",component:z,children:[{path:"/manager/contractors/modules",name:"manager-contractors-modules",component:ee},{path:"/manager/information/:id",name:"manager-data",component:Va},{path:"/manager/contractors",name:"manager-contractors",component:Xr},{path:"/manager/contractors/users/:id",name:"manager-users",component:vn},{path:"/manager/gis",name:"manager-gis",component:wr},{path:"/manager/modules",name:"manager-modules",component:nr},{path:"/manager/layers",name:"manager-layers",component:bi}]}]}),Oi=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(s["a"])(e,[{key:"created",value:function(){""!==this.userState.token?this.getUser():_i.push({name:"home"})}}]),e}(p["f"]);Object(d["a"])([Object(m["c"])("user")],Oi.prototype,"userState",void 0),Object(d["a"])([m["a"]],Oi.prototype,"getUser",void 0),Oi=Object(d["a"])([Object(p["a"])({})],Oi);var ji=Oi,Ci=ji,Si=(a("5c0b"),Object(E["a"])(Ci,n,i,!1,null,null,null)),wi=Si.exports,ki=a("2f62"),xi={infomodule:{id:0,title:"",description:"",layers:[]},infomodules:[],contractorModules:[]},Ei={getModules:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.get("".concat(b,"modules"));case 3:e=t.sent,xi.infomodules=e.data,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),S.notify();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),getAllModules:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.get("".concat(b,"all_modules"));case 3:e=t.sent,xi.infomodules=e.data,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),S.notify();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}()},Mi={state:xi,actions:Ei},$i=a("6ee6"),Pi={compositions:[]},Li={editElement:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object($i["a"])(e),r="".concat(b,"info/elements"),t.prev=2,t.next=5,g.a.put(r,a.element);case 5:t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](2),S.notify();case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));function e(e,a){return t.apply(this,arguments)}return e}(),saveElement:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e,a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object($i["a"])(e),r="".concat(b,"info/elements"),t.prev=2,t.next=5,g.a.post(r,a.element);case 5:return n=t.sent,t.abrupt("return",n.data);case 9:t.prev=9,t.t0=t["catch"](2),S.notify();case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));function e(e,a){return t.apply(this,arguments)}return e}(),deleteElementInfo:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object($i["a"])(e),r="".concat(b,"info/elements/").concat(a.id),t.prev=2,t.next=5,g.a.delete(r);case 5:t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](2),S.notify();case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));function e(e,a){return t.apply(this,arguments)}return e}(),getCompositions:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e,a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object($i["a"])(e),r="".concat(b,"info/composition/").concat(a.layer_id),t.prev=2,t.next=5,g.a.get(r);case 5:n=t.sent,Pi.compositions=n.data,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),S.notify();case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));function e(e,a){return t.apply(this,arguments)}return e}(),saveGeometryGeo:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e,a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object($i["a"])(e),r="".concat(b,"geo/geometry"),t.prev=2,t.next=5,g.a.post(r,a.geometry);case 5:return n=t.sent,t.abrupt("return",n.data);case 9:t.prev=9,t.t0=t["catch"](2),S.notify();case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));function e(e,a){return t.apply(this,arguments)}return e}(),editGeometryGeo:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object($i["a"])(e),r="".concat(b,"geo/geometry/").concat(a.geometry.id),t.prev=2,t.next=5,g.a.put(r,a.geometry);case 5:t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](2),S.notify();case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));function e(e,a){return t.apply(this,arguments)}return e}()},Ri={state:Pi,actions:Li},Ii={user:{id:0,email:"",password:""},users:[],token:"",role:""},Fi={getUser:function(t,e){t.user=e,-1===_i.currentRoute.name.indexOf("manager")&&("superadmin"===t.role?_i.push({name:"manager-contractors"}):_i.push({name:"manager-contractors-modules"}))}},Ti={getUser:function(t){var e=t.commit,a=t.state;t.dispatch;g.a.get(b+"user").then((function(t){var r=t.data;a.role=t.data.role,e("getUser",r)}),(function(){S.notify()}))},getNewToken:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e,a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object($i["a"])(e),t.prev=1,r="".concat(b,"refresh"),t.next=5,g.a.post(r,Ii.user);case 5:n=t.sent,Ii.token="Bearer "+n.data.token,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),S.notify();case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));function e(e,a){return t.apply(this,arguments)}return e}(),logout:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object($i["a"])(e),t.prev=1,r="".concat(b,"logout"),t.next=5,g.a.get(r);case 5:t.sent,_i.push({name:"home"}),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),S.notify();case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));function e(e,a){return t.apply(this,arguments)}return e}()},Ni={state:Ii,mutations:Fi,actions:Ti},Ai=a("0e44"),Gi=function(t,e){var a=!0,r=!1,n=void 0;try{for(var i,o=t[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value;e.push({id:s.id,geotype:"point",title:s.title,description:s.description,address:s.address,edited:!1,add:!1,layer_id:s.layer_id})}}catch(l){r=!0,n=l}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}return e},Bi=function(t,e){var a=!0,r=!1,n=void 0;try{for(var i,o=t[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value;e.push({id:s.id,geotype:"linestring",title:s.title,description:s.description,address:s.address,edited:!1,add:!1})}}catch(l){r=!0,n=l}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}return e},Di=function(t,e){var a=!0,r=!1,n=void 0;try{for(var i,o=t[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value;e.push({id:s.id,geotype:"polygon",title:s.title,description:s.description,address:s.address,edited:!1,add:!1})}}catch(l){r=!0,n=l}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}return e},Ui=function(t){var e=[],a=!0,r=!1,n=void 0;try{for(var i,o=t[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value;s.points&&(e=Gi(s.points,e)),s.linestrings&&(e=Bi(s.linestrings,e)),s.polygons&&(e=Di(s.polygons,e))}}catch(l){r=!0,n=l}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}return e},qi=(a("8615"),function(t){for(var e=[],a=Object.values(t),r=0,n=a;r<n.length;r++){var i=n[r];e.push({id:i.id,title:i.title,description:i.description,points:Vi(i.points),visiblePoints:!1,layer_id:i.layer_id,edited:!1})}return e}),Vi=function(t){var e=[],a=!0,r=!1,n=void 0;try{for(var i,o=t[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value;e.push({id:s.id,geotype:"point",title:s.title,description:s.description,address:s.address,edited:!1,add:!1})}}catch(l){r=!0,n=l}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}return e},zi=function(t){return{id:t.id,geotype:"point",title:t.title,description:t.description,address:t.address,edited:!1,add:!1}},Hi=function(t){for(var e=[],a=Object.values(t),r=0,n=a;r<n.length;r++){var i=n[r];e.push({id:i.id,title:i.title,description:i.description,geometries:Ji(i),visiblePoints:!1,layer_id:i.layer_id,edited:!1})}return e},Ji=function(t){for(var e=[],a=[{type:"point",name:"points"},{type:"linestring",name:"linestrings"},{type:"polygon",name:"polygons"}],r=0,n=a;r<n.length;r++){var i=n[r],o=!0,s=!1,l=void 0;try{for(var c,u=t[i.name][Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var d=c.value;e.push({id:d.id,geotype:i.type,title:d.title,description:d.description,address:d.address,edited:!1,add:!1})}}catch(p){s=!0,l=p}finally{try{o||null==u.return||u.return()}finally{if(s)throw l}}}return e},Wi={infoItems:[],infoItemsLists:[]},Yi={getInfoElements:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object($i["a"])(e),t.prev=1,t.next=4,g.a.get("".concat(b,"info/elements/").concat(a.layer_id));case 4:r=t.sent,"infoLists"===a.type_layer?Wi.infoItemsLists=qi(r.data):"territories"===a.type_layer?Wi.infoItemsLists=Hi(r.data):Wi.infoItems=Ui(r.data),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),S.notify();case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));function e(e,a){return t.apply(this,arguments)}return e}(),editInfoElement:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object($i["a"])(e),r="".concat(b,"info/").concat(a.infoItem.geotype),t.prev=2,t.next=5,g.a.put(r,a.infoItem);case 5:t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](2),S.notify();case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));function e(e,a){return t.apply(this,arguments)}return e}(),createInfoElement:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e,a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object($i["a"])(e),r="".concat(b,"info/").concat(a.infoItem.geotype,"/").concat(a.layer_id),t.prev=2,t.next=5,g.a.post(r,a.infoItem);case 5:n=t.sent,Wi.infoItems.push(zi(n.data)),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),S.notify();case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));function e(e,a){return t.apply(this,arguments)}return e}(),deleteInfoElement:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object($i["a"])(e),r="".concat(b,"info/").concat(a.infoItem.geotype,"/").concat(a.id),t.prev=2,t.next=5,g.a.delete(r);case 5:t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](2),S.notify();case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));function e(e,a){return t.apply(this,arguments)}return e}(),createInfoElementSingle:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e,a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object($i["a"])(e),r="".concat(b,"info/").concat(a.infoItem.geotype,"/create/singleCreate"),t.prev=2,t.next=5,g.a.post(r,a.infoItem);case 5:n=t.sent,Wi.infoItems.push(zi(n.data)),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),S.notify();case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));function e(e,a){return t.apply(this,arguments)}return e}()},Zi={state:Wi,actions:Yi},Ki=function(){function t(){Object(o["a"])(this,t)}return Object(s["a"])(t,null,[{key:"notify",value:function(t,e){r["default"].prototype.$notify({title:t,text:e})}}]),t}(),Qi=Ki,Xi=function(t,e){return t.map((function(t){return t.id===e.id&&(t=Object.assign({},t,e)),t}))},to=function(t,e){return t.filter((function(t){return t.id!==e.id}))},eo={contractor:{id:0,name:"",full_name:"",inn:"",kpp:"",address:{id:0,build:"",city:"",region:"",street:""}},contractors:[]},ao={getContractors:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.get("".concat(b,"manager/contractor"));case 3:e=t.sent,eo.contractors=e.data,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),S.notify();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),geContractorById:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object($i["a"])(e),t.prev=1,t.next=4,g.a.get("".concat(b,"manager/contractor/").concat(a.id));case 4:r=t.sent,eo.contractor=Object.assign({},r.data),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),S.notify();case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));function e(e,a){return t.apply(this,arguments)}return e}(),updateContractor:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===eo.contractor.id){t.next=9;break}return t.next=4,g.a.put("".concat(b,"manager/contractor/").concat(eo.contractor.id),eo.contractor);case 4:e=t.sent,Qi.notify("Данные сохранены",'Контрагент "'.concat(eo.contractor.name,'" изменен')),eo.contractors=Xi(eo.contractors,e.data),t.next=14;break;case 9:return t.next=11,g.a.post("".concat(b,"manager/contractor"),eo.contractor);case 11:a=t.sent,Qi.notify("Данные сохранены",'Контрагент "'.concat(eo.contractor.name,'" создан')),eo.contractors.push(a.data);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),S.notify();case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));function e(){return t.apply(this,arguments)}return e}(),deleteContractor:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===eo.contractor.id){t.next=7;break}return t.next=4,g.a.delete("".concat(b,"manager/contractor/").concat(eo.contractor.id));case 4:t.sent,Qi.notify("Данные удалены",'Контрагент "'.concat(eo.contractor.name,'" удален')),eo.contractors=to(eo.contractors,eo.contractor);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),S.notify();case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}(),setSingleContractor:function(t,e){Object($i["a"])(t),eo.contractor=Object.assign({},eo.contractor,e)},unsetSingleContractor:function(){eo.contractor={id:0,name:"",full_name:"",inn:"",kpp:"",address:{id:0,build:"",city:"",region:"",street:""}}},attachContractorToModule:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.get("".concat(b,"manager/contractor/").concat(a.parent,"/attach/module/").concat(a.item));case 3:t.sent,Qi.notify("","Модуль подключен к контрагенту"),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),S.notify();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(e,a){return t.apply(this,arguments)}return e}(),detachContractorToModule:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.get("".concat(b,"manager/contractor/").concat(a.parent,"/detach/module/").concat(a.item));case 3:t.sent,Qi.notify("","Модуль отключен от контрагента"),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),S.notify();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(e,a){return t.apply(this,arguments)}return e}()},ro={state:eo,actions:ao},no={user:{id:0,email:"",password:""},users:[]},io={getUsersByContractor:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object($i["a"])(e),t.prev=1,t.next=4,g.a.get("".concat(b,"manager/user/").concat(a.contractorId));case 4:r=t.sent,no.users=r.data,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),S.notify();case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));function e(e,a){return t.apply(this,arguments)}return e}(),updateUser:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===no.user.id){t.next=9;break}return t.next=4,g.a.put("".concat(b,"manager/user"),no.user);case 4:t.sent,Qi.notify("Данные сохранены",'Пользователь "'.concat(no.user.email,'" изменен')),no.users=Xi(no.users,no.user),t.next=14;break;case 9:return t.next=11,g.a.post("".concat(b,"manager/user"),no.user);case 11:t.sent,Qi.notify("Данные сохранены",'Пользователь "'.concat(no.user.email,'" создан')),no.users.push(no.user);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),S.notify();case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));function e(){return t.apply(this,arguments)}return e}(),deleteUser:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===no.user.id){t.next=7;break}return t.next=4,g.a.delete("".concat(b,"manager/user/").concat(no.user.id));case 4:t.sent,Qi.notify("Данные удалены",'Пользователь "'.concat(no.user.email,'" удален')),no.users=to(no.users,no.user);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),S.notify();case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}(),setSingleUser:function(t,e){Object($i["a"])(t),no.user=Object.assign({},no.user,e)},unsetSingleUser:function(t,e){Object($i["a"])(t),no.user={id:0,email:"",password:"",contractor_id:e.contractorId}}},oo={state:no,actions:io},so={module:{id:0,title:"",description:"",layers:[],contractors:[]},modules:[]},lo={managerGetModules:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.get("".concat(b,"manager/module"));case 3:e=t.sent,so.modules=e.data,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),S.notify();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),updateModule:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===so.module.id){t.next=9;break}return t.next=4,g.a.put("".concat(b,"manager/module/").concat(so.module.id),so.module);case 4:t.sent,Qi.notify("Данные сохранены",'Модуль "'.concat(so.module.title,'" изменен')),so.modules=Xi(so.modules,so.module),t.next=14;break;case 9:return t.next=11,g.a.post("".concat(b,"manager/module"),so.module);case 11:e=t.sent,Qi.notify("Данные сохранены",'Модуль "'.concat(so.module.title,'" создан')),so.modules.push(Object.assign({},so.module,e.data));case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),S.notify();case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));function e(){return t.apply(this,arguments)}return e}(),deleteModule:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===so.module.id){t.next=7;break}return t.next=4,g.a.delete("".concat(b,"manager/module/").concat(so.module.id));case 4:t.sent,Qi.notify("Данные удалены",'Модуль "'.concat(so.module.title,'" удален')),so.modules=to(so.modules,so.module);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),S.notify();case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}(),setSingleModule:function(t,e){Object($i["a"])(t),so.module=Object.assign({},so.module,e)},unsetSingleModule:function(){so.module={id:0,title:"",description:"",layers:[],contractors:[]}}},co={state:so,actions:lo},uo={layer:{id:0,alias:"",title:"",description:"",parent_id:0,module_id:0,visibility:!1,geometry_type:"point"},layers:[]},po={managerGetLayers:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.get("".concat(b,"manager/layer"));case 3:e=t.sent,a=[],e.data.forEach((function(t){a.push(Object.assign({},t,{style:JSON.parse(t.style)}))})),uo.layers=a,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),S.notify();case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}(),getLayerById:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object($i["a"])(e),t.prev=1,t.next=4,g.a.get("".concat(b,"manager/layer/").concat(a.id));case 4:r=t.sent,uo.layer=Object.assign({},r.data,{style:JSON.parse(r.data.style)}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),S.notify();case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));function e(e,a){return t.apply(this,arguments)}return e}(),updateLayer:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===uo.layer.id){t.next=9;break}return t.next=4,g.a.put("".concat(b,"manager/layer/").concat(uo.layer.id),Object.assign({},uo.layer,{style:JSON.stringify(uo.layer.style)}));case 4:e=t.sent,Qi.notify("Данные сохранены",'Слой "'.concat(uo.layer.title,'" изменен')),uo.layers=Xi(uo.layers,Object.assign({},e.data,{style:JSON.parse(e.data)})),t.next=15;break;case 9:return t.next=11,g.a.post("".concat(b,"manager/layer"),Object.assign({},uo.layer,{style:JSON.stringify(uo.layer.style)}));case 11:a=t.sent,Qi.notify("Данные сохранены",'Слой "'.concat(uo.layer.title,'" создан')),uo.layer=Object.assign({},a.data,{style:JSON.parse(a.data)}),uo.layers.push(uo.layer);case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](0),S.notify();case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));function e(){return t.apply(this,arguments)}return e}(),deleteLayer:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===uo.layer.id){t.next=7;break}return t.next=4,g.a.delete("".concat(b,"manager/layer/").concat(uo.layer.id));case 4:t.sent,Qi.notify("Данные удалены",'Слой "'.concat(uo.layer.title,'" удален')),uo.layers=to(uo.layers,uo.layer);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),S.notify();case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}(),setSingleLayer:function(t,e){Object($i["a"])(t),uo.layer=Object.assign({},uo.layer,e)},unsetSingleLayer:function(){uo.layer={id:0,alias:"",title:"",description:"",parent_id:0,module_id:0,visibility:!1,geometry_type:"point"}}},mo={state:uo,actions:po};function vo(t){var e=[],a=!0,r=!1,n=void 0;try{for(var i,o=t[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value,l=!0,c=!1,u=void 0;try{for(var d,p=s.columns[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var m=d.value;"many_from_many_field"===m.type&&(m.value=JSON.stringify(m.value)),e.push(m)}}catch(v){c=!0,u=v}finally{try{l||null==p.return||p.return()}finally{if(c)throw u}}}}catch(v){r=!0,n=v}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}return e}var fo={element:{id:0,layer_id:0,title:"",description:"",length:0,area:0,perimeter:0},elements:[]},yo={managerGetElements:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object($i["a"])(e),t.prev=1,t.next=4,g.a.get("".concat(b,"manager/element/layer/").concat(a.layerId));case 4:r=t.sent,fo.elements=r.data,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),S.notify();case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));function e(e,a){return t.apply(this,arguments)}return e}(),managerGetElementById:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object($i["a"])(e),t.prev=1,t.next=4,g.a.get("".concat(b,"manager/element/").concat(a.id));case 4:r=t.sent,fo.element=Object.assign({},r.data),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),S.notify();case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));function e(e,a){return t.apply(this,arguments)}return e}(),managerUpdateElement:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.rootState,t.prev=1,fo.element.additionalData=vo(a.constructor.tableFields),0===fo.element.id){t.next=11;break}return t.next=6,g.a.put("".concat(b,"manager/element/").concat(fo.element.id),fo.element);case 6:r=t.sent,Qi.notify("Данные сохранены",'Элемент "'.concat(fo.element.title,'" изменен')),fo.elements=Xi(fo.elements,r.data),t.next=16;break;case 11:return t.next=13,g.a.post("".concat(b,"manager/element"),fo.element);case 13:n=t.sent,Qi.notify("Данные сохранены",'Элемент "'.concat(fo.element.title,'" создан')),fo.elements.push(n.data);case 16:t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](1),S.notify();case 21:case"end":return t.stop()}}),t,null,[[1,18]])})));function e(e){return t.apply(this,arguments)}return e}(),managerDeleteElement:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===fo.element.id){t.next=7;break}return t.next=4,g.a.delete("".concat(b,"manager/element/").concat(fo.element.id));case 4:t.sent,Qi.notify("Данные удалены",'Элемент "'.concat(fo.element.title,'" удален')),fo.elements=to(fo.elements,fo.element);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),S.notify();case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}(),managerSetSingleElement:function(t,e){Object($i["a"])(t),fo.element=Object.assign({},fo.element,e)},managerUnsetSingleElement:function(t,e){Object($i["a"])(t),fo.element={id:0,layer_id:e.layerId?e.layerId:0,title:"",description:"",length:0,area:0,perimeter:0}}},ho={state:fo,actions:yo},go={layers:[],styles:[]},bo={gisGetLayers:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(){var e,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.get("".concat(b,"gis/layer"));case 3:e=t.sent,a=[],r=[],e.data.forEach((function(t){var e=JSON.parse(t.style);a.push(Object.assign({},e,{id:t.id})),r.push(Object.assign({},t,{style:e}))})),go.styles=a,go.layers=r,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),S.notify();case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));function e(){return t.apply(this,arguments)}return e}(),gisGetLayersToContractor:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(){var e,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.get("".concat(b,"gis/layer/contractor"));case 3:e=t.sent,a=[],r=[],e.data.forEach((function(t){var e=JSON.parse(t.style);a.push(Object.assign({},e,{id:t.id})),r.push(Object.assign({},t,{style:e}))})),go.styles=a,go.layers=r,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),S.notify();case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));function e(){return t.apply(this,arguments)}return e}(),selectedLayer:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object($i["a"])(e),a.i;try{go.layers[a.i]}catch(r){S.notify()}case 3:case"end":return t.stop()}}),t)})));function e(e,a){return t.apply(this,arguments)}return e}(),setCurrentIndex:function(t,e){Object($i["a"])(t),go.currentLayerIndex=e.layerIndex,go.currentElementIndex=e.elementIndex},unsetCurrentIndex:function(){delete go.currentLayerIndex,delete go.currentElementIndex}},_o={state:go,actions:bo},Oo={element:{id:0,layer_id:0,title:"Новый элемент",description:"",geometry:"",length:0,area:0,perimeter:0}},jo={updateElement:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.rootState,t.prev=1,0===Oo.element.id){t.next=9;break}return t.next=5,g.a.put("".concat(b,"gis/element/").concat(Oo.element.id),{title:Oo.element.title,description:Oo.element.description});case 5:t.sent,Qi.notify("Данные сохранены",'Элемент "'.concat(Oo.element.title,'" изменен')),t.next=14;break;case 9:return t.next=11,g.a.post("".concat(b,"gis/element"),{title:Oo.element.title,description:Oo.element.description,layer_id:Oo.element.layer_id});case 11:a=t.sent,Oo.element=Object.assign({},Oo.element,a.data),Qi.notify("Данные сохранены",'Элемент "'.concat(Oo.element.title,'" создан'));case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](1),S.notify();case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));function e(e){return t.apply(this,arguments)}return e}(),updateGeometry:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.rootState,t.prev=1,0===a.id){t.next=7;break}return t.next=5,g.a.put("".concat(b,"gis/geometry/").concat(a.id),{geometry:a.geometry});case 5:t.sent,Qi.notify("Данные сохранены","Геометрия элемента обновлена");case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),S.notify();case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));function e(e,a){return t.apply(this,arguments)}return e}(),setSingleElement:function(t,e){Object($i["a"])(t),Oo.element=Object.assign({},Oo.element,e.element)},unsetSingleElement:function(t,e){Object($i["a"])(t),Oo.element={id:0,layer_id:e.layerId?e.layerId:0,title:"Новый элемент",description:"",geometry:"",length:0,area:0,perimeter:0}},deleteElement:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object($i["a"])(e),t.prev=1,t.next=4,g.a.delete("".concat(b,"gis/element/").concat(a.elementId));case 4:t.sent,Qi.notify("Данные удалены",'Элемент "'.concat(a.elementTitle,'" удален')),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),S.notify();case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));function e(e,a){return t.apply(this,arguments)}return e}()},Co={state:Oo,actions:jo},So={modal:{title:"Вы уверены?",text:"Вы уверены, что хотите удалить этот элемент?",buttonOk:"Да, удалить",buttonCansel:"Отменить",action:{}}},wo={setSureModal:function(t,e){Object($i["a"])(t),So.modal=Object.assign({},So.modal,e)}},ko={state:So,actions:wo},xo={parent:0,list:[],actions:{}},Eo={setIncludeList:function(t,e){Object($i["a"])(t),xo.list=[],e.list.forEach((function(t){var a=it(t[e.key],e.parent);xo.list.push({id:t.id,title:t.title,checked:!1!==a})})),xo.parent=e.parent},setIncludeListActions:function(t,e){Object($i["a"])(t),e.attach&&(xo.actions.attach=e.attach),e.detach&&(xo.actions.detach=e.detach)},toggleIncludeItem:function(t,e){Object($i["a"])(t),e.item.checked&&xo.actions.attach?xo.actions.attach&&xo.actions.attach({parent:xo.parent,item:e.item.id}):xo.actions.detach&&xo.actions.detach({parent:xo.parent,item:e.item.id})}},Mo={state:xo,actions:Eo},$o={point:{id:1,shape:{points:11,fill:{color:"#009fe3",opacity:0},stroke:{color:"#164194",width:1,opacity:0},radius:5,rotation:0},icon:{src:"".concat(_,"storage/images/layer/default.png"),anchor:[24,24],opacity:0,scale:1,rotation:0},pointType:"shape",font:{font:"16px Calibri, sans-serif",textBaseline:"bottom",offsetY:-6,fill:{color:"#000000"},stroke:{color:"#ffffff",width:3}},list:{hasList:!1,visibility:!1,color:"#000000",opacity:0}},linestring:{id:1,stroke:{color:"#164194",opacity:20,width:10},font:{font:"16px Calibri, sans-serif",textBaseline:"bottom",placement:"line",fill:{color:"#000000"},stroke:{color:"#ffffff",width:3}}},polygon:{id:1,fill:{color:"#009fe3",opacity:20},stroke:{color:"#164194",width:1,opacity:0},font:{font:"16px Calibri, sans-serif",textBaseline:"bottom",offsetY:-6,fill:{color:"#000000"},stroke:{color:"#ffffff",width:3}}}},Po={geometryType:"",style:$o.point},Lo={setGeometryTypeByStyleEditor:function(t,e){Object($i["a"])(t),Po.geometryType=e.geometryType},setStyleByStyleEditor:function(t,e){Object($i["a"])(t);var a="point"===Po.geometryType?$o.point:"linestring"===Po.geometryType?$o.linestring:$o.polygon;Po.style=Object.assign({},a,e.style)},setDefaultStyleByStyleEditor:function(){var t="point"===Po.geometryType?$o.point:"linestring"===Po.geometryType?$o.linestring:$o.polygon;Po.style=Object.assign({},t)},uploadIconByStyleEditor:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e,a){var r,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object($i["a"])(e),r=new FormData,r.append("file",a.file),t.prev=3,t.next=6,g.a.post("".concat(b,"manager/layer/upload"),r,{headers:{"Content-Type":"multipart/form-data"}});case 6:n=t.sent,i=Po.style,i.icon.src="".concat(_).concat(n.data.filename),i.icon.anchor=[n.data.width/2,n.data.height/2],Po.style=Object.assign({},i),Qi.notify("Загрузка завершена",'Изображение "'.concat(a.file.name,'" загружено на сервер')),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](3),S.notify();case 17:case"end":return t.stop()}}),t,null,[[3,14]])})));function e(e,a){return t.apply(this,arguments)}return e}()},Ro={state:Po,actions:Lo},Io={map:!1,properties:{longitude:48.036,latitude:46.3538,zoom:17,selectorMapContainer:"map"},layer:!1,styles:[],interaction:{draw:{layer:!1,mode:"",draw:!1}}},Fo={setMapCenter:function(t,e){Object($i["a"])(t),Io.properties.longitude=e.longitude?e.longitude:Io.properties.longitude,Io.properties.latitude=e.latitude?e.latitude:Io.properties.latitude,Io.properties.zoom=e.zoom?e.zoom:Io.properties.zoom,!1!==Io.map&&(Io.map.getView().setCenter(Object(kt["i"])([Io.properties.longitude,Io.properties.latitude],"EPSG:4326","EPSG:3857")),Io.map.getView().setZoom(Io.properties.zoom))},setMapCenterDefault:function(){Io.properties.longitude=48.036,Io.properties.latitude=46.3538,Io.properties.zoom=17,!1!==Io.map&&(Io.map.getView().setCenter(Object(kt["i"])([Io.properties.longitude,Io.properties.latitude],"EPSG:4326","EPSG:3857")),Io.map.getView().setZoom(Io.properties.zoom))},getMapCenter:function(t,e){if(Object($i["a"])(t),!1!==Io.map){var a=Object(kt["i"])(Io.map.getView().getCenter(),"EPSG:3857","EPSG:4326");Io.properties.longitude=a[0],Io.properties.latitude=a[1],Io.properties.zoom=Io.map.getView().getZoom()}},createMap:function(t,e){Object($i["a"])(t),Io.map=e.map,Io.layer=e.layer},mapUpdateSize:function(){r["default"].nextTick((function(){!1!==Io.map&&Io.map.updateSize()}))},setMapStyles:function(t,e){Object($i["a"])(t),Io.styles=e.styles,$t(Io.layer,Io.styles)},setMapInteraction:function(t,e){Object($i["a"])(t),Io.interaction.draw=Object.assign({},Io.interaction.draw,{mode:"point"===e.mode?"Point":"linestring"===e.mode?"LineString":"polygon"===e.mode?"Polygon":""})},addFeatureToMap:function(t,e){if(Object($i["a"])(t),e.style){if(!e.geom)return;var a=yt(e.id,e.geom,e.property,e.style);Io.layer.getSource().addFeature(a)}else{var r=ot(Io.styles,e.layer_id);if(-1===r||!e.geom)return;var n=yt(e.id,e.geom,e.property,Io.styles[r]);Io.layer.getSource().addFeature(n)}},removeFeatureFromMap:function(t,e){Object($i["a"])(t);var a=Io.layer.getSource().getFeatureById(e.id);a&&Io.layer.getSource().removeFeature(a)},focusOfFeature:function(t,e){Object($i["a"])(t);var a=Io.layer.getSource().getFeatureById(e.id);a&&Lt(Io.map,a)},focusOfFeatures:function(t,e){Object($i["a"])(t);var a=[];e.ids.forEach((function(t){var e=Io.layer.getSource().getFeatureById(t);e&&a.push(e)})),Rt(Io.map,a)}},To={state:Io,actions:Fo},No={isTableExists:!1,tableFields:[],additionalData:{},element:{id:0,title:""}},Ao={unsetAdditionalInfoValues:function(){No.element={id:0,title:""};var t=!0,e=!1,a=void 0;try{for(var r,n=No.tableFields[Symbol.iterator]();!(t=(r=n.next()).done);t=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var c,u=i.columns[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var d=c.value;d.value=""}}catch(p){s=!0,l=p}finally{try{o||null==u.return||u.return()}finally{if(s)throw l}}}}catch(p){e=!0,a=p}finally{try{t||null==n.return||n.return()}finally{if(e)throw a}}}},Go={getConstructorByLayer:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dispatch,t.prev=1,t.next=4,g.a.get("".concat(b,"constructor/").concat(a.layerId));case 4:r=t.sent,No.isTableExists=0!==r.data.length,No.tableFields=r.data,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),S.notify();case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));function e(e,a){return t.apply(this,arguments)}return e}(),updateConstructorTable:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Object($i["a"])(e),t.prev=1,r=vo(No.tableFields),!0!==No.isTableExists){t.next=10;break}return t.next=6,g.a.put("".concat(b,"constructor/").concat(a.layerId),{columns:r});case 6:t.sent,Qi.notify("Данные сохранены","Метаданные слоя обновлены"),t.next=15;break;case 10:return t.next=12,g.a.post("".concat(b,"constructor/").concat(a.layerId),{columns:r});case 12:t.sent,No.isTableExists=!0,Qi.notify("Данные сохранены","Метаданные слоя созданы");case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](1),S.notify();case 20:case"end":return t.stop()}}),t,null,[[1,17]])})));function e(e,a){return t.apply(this,arguments)}return e}(),unsetConstructorByLayer:function(){try{No.isTableExists=!1,No.tableFields=[]}catch(t){S.notify()}},getAdditionalData:function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object($i["a"])(e),t.prev=1,t.next=4,g.a.get("".concat(b,"constructor/").concat(a.layerId,"/").concat(No.element.id));case 4:r=t.sent,No.isTableExists=0!==r.data.length,No.tableFields=r.data.map((function(t){return t.columns=t.columns.map((function(t){return"many_from_many_field"===t.type&&(t.value=JSON.parse(t.value)),t})),t})),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),S.notify();case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));function e(e,a){return t.apply(this,arguments)}return e}()},Bo={state:No,actions:Go,mutations:Ao};r["default"].use(ki["a"]);var Do=new ki["a"].Store({state:{applicationName:"",infomodule:"",constructor:""},mutations:{},actions:{},modules:{infomodule:Mi,infoelement:Ri,infoitem:Zi,user:Ni,managerContractor:ro,managerUser:oo,managerModule:co,managerLayer:mo,managerElement:ho,gisLayer:_o,gisElement:Co,includeList:Mo,sureModal:ko,styleEditor:Ro,map:To,konstructor:Bo},plugins:[Object(Ai["a"])({paths:["user.token"]})]}),Uo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{style:{"text-align":t.column.align}},[t.column.component?a(t.column.component,{tag:"component",attrs:{row:t.row,column:t.column}}):t.column.interpolate?a("span",{domProps:{innerHTML:t._s(t.content)}}):a("span",[t._v(t._s(t.content))])],1)},qo=[],Vo={props:{column:[Object,Array],row:[Object,Array]},computed:{content:function(){return this.column.getRepresentation(this.row)}}},zo=Vo,Ho=Object(E["a"])(zo,Uo,qo,!1,null,null,null),Jo=Ho.exports,Wo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{style:{"text-align":t.column.align}},[t.column.headerComponent?a(t.column.headerComponent,{tag:"component",attrs:{column:t.column}}):a("span",[t._v(t._s(t.column.label))]),t.column.sortable?a("span",{class:t.classes,on:{click:t.toggleSort}}):t._e()],1)},Yo=[],Zo={props:{model:{prop:"direction",event:"change"},column:[Object,Array],settings:Object,direction:{type:String,default:null}},computed:{canSort:function(){return this.column.sortable},is_sorted_ascending:function(){return"asc"===this.direction},is_sorted_descending:function(){return"desc"===this.direction},is_sorted:function(){return this.is_sorted_descending||this.is_sorted_ascending},classes:function(){var t=this.settings.get("table.sorting.classes"),e=t.canSort;return this.canSort?this.is_sorted?(this.is_sorted_ascending&&(e=e.concat(t.sortAsc)),this.is_sorted_descending&&(e=e.concat(t.sortDesc)),this.joinClasses(e)):(e=e.concat(t.sortNone),this.joinClasses(e)):""}},methods:{joinClasses:function(t){return this.unique(t).join(" ")},toggleSort:function(){this.direction&&null!==this.direction?"asc"===this.direction?this.$emit("change","desc",this.column):this.$emit("change",null,this.column):this.$emit("change","asc",this.column)},unique:function(t){var e={};return t.filter((function(t){return!e.hasOwnProperty(t)&&(e[t]=!0)}))}}},Ko=Zo,Qo=Object(E["a"])(Ko,Wo,Yo,!1,null,null,null),Xo=Qo.exports,ts=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{class:t.li_classes},[a("a",{class:t.a_classes,attrs:{href:"javascript: void(0);"},on:{click:t.sendClick}},[t._t("default",[t._v(t._s(t.value))])],2)])},es=[],as=(a("c5f6"),a("7618")),rs=a("6e87"),ns=a.n(rs),is=function(){function t(){Object(o["a"])(this,t),this.properties={table:{class:"table table-hover table-striped",row:{classes:[""]},sorting:{classes:{canSort:["sort"],sortNone:["glyphicon","glyphicon-sort"],sortAsc:["glyphicon","glyphicon-sort-by-alphabet"],sortDesc:["glyphicon","glyphicon-sort-by-alphabet-alt"]}}},pager:{classes:{pager:"pagination",li:"",a:"",selected:"active",disabled:"disabled"},icons:{previous:"&lt;",next:"&gt;"}}}}return Object(s["a"])(t,[{key:"get",value:function(t){return ns.a.get(this.properties,t)}},{key:"set",value:function(t,e){return ns.a.set(this.properties,t,e),this}},{key:"merge",value:function(t){return this.properties=this._mergeObjects(this.properties,t),this}},{key:"_mergeObjects",value:function(t,e){for(var a in e)null!==e[a]?"object"!==Object(as["a"])(e[a])?t[a]=e[a]:t[a]=this._mergeObjects(t[a],e[a]):t[a]=e[a];return t}}]),t}(),os=is,ss={props:{disabled:{type:Boolean,default:!1},selected:{type:Boolean,default:!1},value:{type:Number,default:null}},computed:{li_classes:function(){var t=[];return this.settings.get("pager.classes.li")&&t.push(this.settings.get("pager.classes.li")),this.disabled&&t.push(this.settings.get("pager.classes.disabled")),this.selected&&t.push(this.settings.get("pager.classes.selected")),t.join(" ")},a_classes:function(){var t=[];return this.settings.get("pager.classes.a")&&t.push(this.settings.get("pager.classes.a")),t.join(" ")},settings:function(){return this.$parent.settings}},methods:{sendClick:function(){this.disabled||this.$emit("click",this.value)}}},ls=ss,cs=Object(E["a"])(ls,ts,es,!1,null,null,null),us=cs.exports,ds=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{class:t.table_class},[a("thead",[a("tr",t._l(t.normalized_columns,(function(e,r){return a("datatable-header",{key:r,attrs:{column:e,settings:t.settings,direction:t.getSortDirectionForColumn(e)},on:{change:t.setSortDirectionForColumn}})})),1)]),a("tbody",[t._l(t.processed_rows,(function(e){return t._t("default",[a("tr",{class:t.getRowClasses(e)},t._l(t.normalized_columns,(function(t,r){return a("datatable-cell",{key:r,attrs:{column:t,row:e}})})),1)],{row:e,columns:t.normalized_columns})})),0==t.processed_rows.length?a("tr",[a("td",{attrs:{colspan:t.normalized_columns.length}},[t._t("no-results")],2)]):t._e()],2),t.$slots.footer||t.$scopedSlots.footer?a("tfoot",[t._t("footer",null,{rows:t.processed_rows})],2):t._e()])},ps=[],ms=function(){function t(e){Object(o["a"])(this,t),this.setAlignment(e.align),this.label=e.label||"",this.field=e.field||null,this.representedAs=e.representedAs||null,this.component=e.component||null,this.interpolate=e.interpolate||!1,this.headerComponent=e.headerComponent||null,this.sortable=this.isSortable(e),this.filterable=this.isFilterable(e)}return Object(s["a"])(t,[{key:"setAlignment",value:function(t){return t&&"string"===typeof t?"center"===t.toLowerCase()?(this.align="center",this):"right"===t.toLowerCase()?(this.align="right",this):(this.align="left",this):(this.align="left",this)}},{key:"isFilterable",value:function(t){return!1!==t.filterable&&(!(!t.field&&!t.representedAs)&&!(this.component&&!this.representedAs&&!this.field))}},{key:"isSortable",value:function(t){return!1!==t.sortable&&(!(!t.field&&!t.representedAs)&&!(this.component&&!this.representedAs&&!this.field))}},{key:"getRepresentation",value:function(t){return this.representedAs&&"function"===typeof this.representedAs?this.representedAs(t):this.component&&this.filterable?this.plain_text_function(t,this):ns.a.get(t,this.field)}},{key:"getValue",value:function(t){return this.getRepresentation(t)}},{key:"matches",value:function(t,e){var a=(""+this.getRepresentation(t)).toLowerCase();return-1!==a.indexOf(e.toLowerCase())}}]),t}(),vs=ms,fs={props:{name:{type:String,default:"default"},columns:[Object,Array],data:[Object,Array,String,Function],filterBy:{type:String,default:null},rowClasses:{type:[String,Array,Object,Function],default:null}},data:function(){return{sort_by:null,sort_dir:null,total_rows:0,page:1,per_page:null,processed_rows:[]}},computed:{rows:function(){return this.data.slice(0)},settings:function(){return this.$options.settings},handler:function(){return this.$options.handler},normalized_columns:function(){return this.columns.map((function(t){return new vs(t)}))},table_class:function(){return this.settings.get("table.class")}},methods:{getSortDirectionForColumn:function(t){return this.sort_by!==t?null:this.sort_dir},setSortDirectionForColumn:function(t,e){this.sort_by=e,this.sort_dir=t},processRows:function(){if("function"!==typeof this.data){var t=this.handler.filterHandler(this.rows,this.filterBy,this.normalized_columns),e=this.handler.sortHandler(t,this.sort_by,this.sort_dir),a=this.handler.paginateHandler(e,this.per_page,this.page);this.handler.displayHandler(a,{filtered_data:t,sorted_data:e,paged_data:a},this.setRows,this.setTotalRowCount)}else{var r={filter:this.filterBy,sort_by:this.sort_by?this.sort_by.field:null,sort_dir:this.sort_dir,page_length:this.per_page,page_number:this.page};this.data(r,function(t,e){this.setRows(t),this.setTotalRowCount(e)}.bind(this))}},setRows:function(t){this.processed_rows=t},setTotalRowCount:function(t){this.total_rows=t},getRowClasses:function(t){var e=this.rowClasses;return null===e&&(e=this.settings.get("table.row.classes")),"function"===typeof e?e(t):e}},created:function(){r["default"].$datatables[this.name]=this,this.$root.$emit("table.ready",this.name),this.$watch(function(){return this.data}.bind(this),this.processRows,{deep:!0}),this.$watch("columns",this.processRows),this.$watch(function(){return this.filterBy+this.per_page+this.page+this.sort_by+this.sort_dir}.bind(this),this.processRows),this.processRows()},handler:null,settings:null},ys=fs,hs=Object(E["a"])(ys,ds,ps,!1,null,null,null),gs=hs.exports,bs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.show?a("nav",["abbreviated"===t.type?a("ul",{class:t.pagination_class},[t.page-3>=1?a("datatable-button",{attrs:{value:1},on:{click:t.setPageNum}}):t._e(),t.page-4>=1?a("datatable-button",{attrs:{disabled:""}},[t._v("...")]):t._e(),t.page-2>=1?a("datatable-button",{attrs:{value:t.page-2},on:{click:t.setPageNum}}):t._e(),t.page-1>=1?a("datatable-button",{attrs:{value:t.page-1},on:{click:t.setPageNum}}):t._e(),a("datatable-button",{attrs:{value:t.page,selected:""}}),t.page+1<=t.total_pages?a("datatable-button",{attrs:{value:t.page+1},on:{click:t.setPageNum}}):t._e(),t.page+2<=t.total_pages?a("datatable-button",{attrs:{value:t.page+2},on:{click:t.setPageNum}}):t._e(),t.page+4<=t.total_pages?a("datatable-button",{attrs:{disabled:""}},[t._v("...")]):t._e(),t.page+3<=t.total_pages?a("datatable-button",{attrs:{value:t.total_pages},on:{click:t.setPageNum}}):t._e()],1):"long"===t.type?a("ul",{class:t.pagination_class},t._l(t.total_pages,(function(e){return a("datatable-button",{key:e,attrs:{value:e,selected:e===t.page},on:{click:t.setPageNum}})})),1):"short"===t.type?a("ul",{class:t.pagination_class},[a("datatable-button",{attrs:{disabled:t.page-1<1,value:t.page-1},on:{click:t.setPageNum}},[a("span",{domProps:{innerHTML:t._s(t.previous_icon)}})]),a("datatable-button",{attrs:{value:t.page,selected:""}}),a("datatable-button",{attrs:{disabled:t.page+1>t.total_pages,value:t.page+1},on:{click:t.setPageNum}},[a("span",{domProps:{innerHTML:t._s(t.next_icon)}})])],1):t._e()]):t._e()},_s=[],Os={model:{prop:"page",event:"change"},props:{table:{type:String,default:"default"},type:{type:String,default:"long"},perPage:{type:Number,default:10},page:{type:Number,default:1}},data:function(){return{table_instance:null}},computed:{show:function(){return this.table_instance&&this.total_rows>0},total_rows:function(){return this.table_instance?this.table_instance.total_rows:0},pagination_class:function(){return this.settings.get("pager.classes.pager")},disabled_class:function(){return this.settings.get("pager.classes.disabled")},previous_link_classes:function(){return this.page-1<1?this.settings.get("pager.classes.disabled"):""},next_link_classes:function(){return this.page+1>this.total_pages?this.settings.get("pager.classes.disabled"):""},total_pages:function(){return this.total_rows>0?Math.ceil(this.total_rows/this.perPage):0},previous_icon:function(){return this.settings.get("pager.icons.previous")},next_icon:function(){return this.settings.get("pager.icons.next")},settings:function(){return this.$options.settings}},methods:{setPageNum:function(t){this.table_instance.page=t,this.table_instance.per_page=this.perPage,this.$emit("change",t)},getClassForPage:function(t){return this.page==t?this.settings.get("pager.classes.selected"):""}},watch:{total_rows:function(){this.page>this.total_pages&&this.setPageNum(this.total_pages)},perPage:function(){var t=this.page;t>this.total_pages&&(t=this.total_pages),this.setPageNum(t)}},created:function(){if(r["default"].$datatables[this.table])return this.table_instance=r["default"].$datatables[this.table],void(this.table_instance.per_page=this.perPage);this.$root.$on("table.ready",function(t){t===this.table&&(this.table_instance=r["default"].$datatables[this.table],this.table_instance.per_page=this.perPage)}.bind(this))},settings:null},js=Os,Cs=Object(E["a"])(js,bs,_s,!1,null,null,null),Ss=Cs.exports,ws=(a("55dd"),a("28a5"),function(){function t(){Object(o["a"])(this,t),this.filterHandler=this.handleFilter,this.sortHandler=this.handleSort,this.paginateHandler=this.handlePaginate,this.displayHandler=this.handleDisplay}return Object(s["a"])(t,[{key:"handleFilter",value:function(t,e,a){if(!e)return t;var r=e.split(/\s/);return t.filter(function(t){for(var e in r)if(!this.rowMatches(t,r[e],a))return!1;return!0}.bind(this))}},{key:"rowMatches",value:function(t,e,a){for(var r in a)if(a[r].matches(t,e))return!0;return!1}},{key:"handleSort",value:function(t,e,a){return e&&null!==a?t.sort((function(t,r){var n=e.getRepresentation(t),i=e.getRepresentation(r);if(n==i)return 0;var o=n>i?1:-1;return"desc"===a&&(o*=-1),o})):t}},{key:"handlePaginate",value:function(t,e,a){if(!e)return t;a<1&&(a=1);var r=(a-1)*e,n=a*e;return t.slice(r,n)}},{key:"handleDisplay",value:function(t,e,a,r){a(t),r(e.filtered_data.length)}}]),t}()),ks=ws,xs=function(){function t(e){Object(o["a"])(this,t),this.id=e,this.handler=new ks,this.settings=new os}return Object(s["a"])(t,[{key:"getId",value:function(){return this.id}},{key:"setFilterHandler",value:function(t){return this.handler.filterHandler=t,this}},{key:"setSortHandler",value:function(t){return this.handler.sortHandler=t,this}},{key:"setPaginateHandler",value:function(t){return this.handler.paginateHandler=t,this}},{key:"setDisplayHandler",value:function(t){return this.handler.displayHandler=t,this}},{key:"setting",value:function(t,e){return void 0===e?this.settings.get(t):(this.settings.set(t,e),this)}},{key:"mergeSettings",value:function(t){return this.settings.merge(t),this}},{key:"getTableDefinition",value:function(){var t=this.clone(gs);return t.handler=this.handler,t.settings=this.settings,t.name=this.id,t}},{key:"getPagerDefinition",value:function(){var t=this.clone(Ss);return t.settings=this.settings,t.name=this.id,t}},{key:"clone",value:function(t){var e;if(null===t||"object"!==Object(as["a"])(t))return t;if(t instanceof Array){e=[];for(var a=0;a<t.length;a++)e[a]=this.clone(t[a]);return e}if(t instanceof Object){for(var r in e={},t)t.hasOwnProperty(r)&&(e[r]=this.clone(t[r]));return e}throw new Error("Unable to copy obj! Its type isn't supported.")}}]),t}(),Es=xs,Ms=function(){function t(){Object(o["a"])(this,t),this.table_types=[],this.use_default_type=!0,this.default_table_settings=new os}return Object(s["a"])(t,[{key:"useDefaultType",value:function(t){return this.use_default_type=!!t,this}},{key:"registerTableType",value:function(t,e){var a=new Es(t);return this.table_types.push(a),e&&"function"===typeof e&&e(a),this}},{key:"install",value:function(t){for(var e in t.$datatables={},t.component("datatable-cell",Jo),t.component("datatable-header",Xo),t.component("datatable-button",us),this.use_default_type&&this.registerTableType("datatable",function(t){t.mergeSettings(this.default_table_settings.properties)}.bind(this)),this.table_types)this.installTableType(this.table_types[e].getId(),this.table_types[e],t)}},{key:"installTableType",value:function(t,e,a){a.component(t,e.getTableDefinition()),a.component(t+"-pager",e.getPagerDefinition())}}]),t}(),$s=Ms,Ps=new $s,Ls=a("7bb1"),Rs=a("b451"),Is=a.n(Rs),Fs=a("5f5b"),Ts=(a("f9e3"),a("2dd8"),a("011e")),Ns=a.n(Ts),As=(a("c41f"),a("ee98")),Gs=a.n(As);r["default"].use(Ps),r["default"].use(Ls["b"],{fieldsBagName:"formFields"}),Ls["a"].localize("ru",Is.a),r["default"].use(Fs["a"]),r["default"].component("vue-scrollbar",Ns.a);try{window.$=window.jQuery=a("1157"),a("4989")}catch(Ds){}r["default"].use(Gs.a);var Bs=a("9483");Object(Bs["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}}),r["default"].config.productionTip=!1,new r["default"]({router:_i,store:Do,render:function(t){return t(wi)},created:function(){localStorage.getItem("vuex")&&j(localStorage.getItem("vuex"))}}).$mount("#app")},e332:function(t,e,a){}});
//# sourceMappingURL=app.e3f14b13.js.map